import{_ as tf}from"./CampaignForm-dda88f2e.js";import{A as Er,B as nf,r as e0,S as w2,m as si,p as ia,G as Bs,o as fe,c as me,a as M,d as R1,t as Fe,b as Ge,k as ur,j as st,u as nt,w as Rs,v as Es,a5 as v2,n as Mt,F as G1,y as Cr,Q as Tr,T as Ss,g as At,i as ir,f as E1,h as Rt,N as sr,R as Cs,s as aa,e as lr,E as y2,a6 as g2,V as ai,W as As,a7 as ra,J as rf,a8 as af,a9 as sf}from"./app-3e8877e3.js";import{P as h2}from"./style-7caf4626.js";import{_ as Ms}from"./AlertModal-e70349eb.js";import{_ as lf}from"./Dropdown-063ecb50.js";import{_ as of,a as Rr}from"./DropdownItem-8d0f375d.js";import{_ as uf}from"./FormSelectCombo-31c3c545.js";import{F as ff}from"./FormTextArea-f0cff5f9.js";import{_ as S2}from"./Modal-94522b20.js";import{t as cf}from"./FormSelect-707ebb8d.js";import{l as ri}from"./index-b92cfe8e.js";/* empty css              */import{P as _f}from"./Pagination-f1e6d96c.js";import{d as vf}from"./debounce-935eb07c.js";import{_ as hf}from"./ContactInfo-a1b8da07.js";import{g as df,A as mf}from"./App-903bd3e0.js";import"./FormInput-7ef34c59.js";import"./WhatsappTemplate-5008313f.js";import"./transition-18330a8a.js";import"./keyboard-49b00fa1.js";import"./use-text-value-db86cb19.js";import"./use-tree-walker-53e04018.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_baseGetTag-9b465718.js";import"./useRtl-5c9a48fc.js";import"./MobileSidebar-9eb2e596.js";import"./Menu-0b837f90.js";import"./ProfileModal-38da4bd8.js";import"./FormPhoneInput-0afe4c41.js";import"./OrganizationModal-d492220c.js";import"./Sidebar-d5998ac3.js";var A2={exports:{}};(function(W,be){(function(m,Ne){W.exports=Ne()})(Er,function(){function m(I){return new Int8Array(I)}function Ne(I){return new Int16Array(I)}function de(I){return new Int32Array(I)}function He(I){return new Float32Array(I)}function Be(I){return new Float64Array(I)}function We(I){if(I.length==1)return He(I[0]);var J=I[0];I=I.slice(1);for(var oe=[],j=0;j<J;j++)oe.push(We(I));return oe}function i0(I){if(I.length==1)return de(I[0]);var J=I[0];I=I.slice(1);for(var oe=[],j=0;j<J;j++)oe.push(i0(I));return oe}function u0(I){if(I.length==1)return Ne(I[0]);var J=I[0];I=I.slice(1);for(var oe=[],j=0;j<J;j++)oe.push(u0(I));return oe}function s0(I){if(I.length==1)return new Array(I[0]);var J=I[0];I=I.slice(1);for(var oe=[],j=0;j<J;j++)oe.push(s0(I));return oe}var Qe={};Qe.fill=function(I,J,oe,j){if(arguments.length==2)for(var Se=0;Se<I.length;Se++)I[Se]=arguments[1];else for(var Se=J;Se<oe;Se++)I[Se]=j};var E0={};E0.arraycopy=function(I,J,oe,j,Se){for(var ne=J+Se;J<ne;)oe[j++]=I[J++]};var S0={};S0.SQRT2=1.4142135623730951,S0.FAST_LOG10=function(I){return Math.log10(I)},S0.FAST_LOG10_X=function(I,J){return Math.log10(I)*J};function Ue(I){this.ordinal=I}Ue.short_block_allowed=new Ue(0),Ue.short_block_coupled=new Ue(1),Ue.short_block_dispensed=new Ue(2),Ue.short_block_forced=new Ue(3);var qe={};qe.MAX_VALUE=34028235e31;function xe(I){this.ordinal=I}xe.vbr_off=new xe(0),xe.vbr_mt=new xe(1),xe.vbr_rh=new xe(2),xe.vbr_abr=new xe(3),xe.vbr_mtrh=new xe(4),xe.vbr_default=xe.vbr_mtrh;var X=function(I){},le={System:E0,VbrMode:xe,Float:qe,ShortBlock:Ue,Util:S0,Arrays:Qe,new_array_n:s0,new_byte:m,new_double:Be,new_float:He,new_float_n:We,new_int:de,new_int_n:i0,new_short:Ne,new_short_n:u0,assert:X},f0=le.System,r0=le.Util,V0=le.Arrays,rt=le.new_float;function G0(){var I=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*r0.SQRT2*.5/2384e-9,.017876148*r0.SQRT2*.5/2384e-9,.003134727*r0.SQRT2*.5/2384e-9,.002457142*r0.SQRT2*.5/2384e-9,971317e-9*r0.SQRT2*.5/2384e-9,218868e-9*r0.SQRT2*.5/2384e-9,101566e-9*r0.SQRT2*.5/2384e-9,13828e-9*r0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],J=12,oe=36,j=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],Se=j[g.SHORT_TYPE],ne=j[g.SHORT_TYPE],_e=j[g.SHORT_TYPE],Ce=j[g.SHORT_TYPE],Oe=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function P(T,N,r){for(var G=10,q=N+238-14-286,V=-15;V<0;V++){var o,w,E;o=I[G+-10],w=T[q+-224]*o,E=T[N+224]*o,o=I[G+-9],w+=T[q+-160]*o,E+=T[N+160]*o,o=I[G+-8],w+=T[q+-96]*o,E+=T[N+96]*o,o=I[G+-7],w+=T[q+-32]*o,E+=T[N+32]*o,o=I[G+-6],w+=T[q+32]*o,E+=T[N+-32]*o,o=I[G+-5],w+=T[q+96]*o,E+=T[N+-96]*o,o=I[G+-4],w+=T[q+160]*o,E+=T[N+-160]*o,o=I[G+-3],w+=T[q+224]*o,E+=T[N+-224]*o,o=I[G+-2],w+=T[N+-256]*o,E-=T[q+256]*o,o=I[G+-1],w+=T[N+-192]*o,E-=T[q+192]*o,o=I[G+0],w+=T[N+-128]*o,E-=T[q+128]*o,o=I[G+1],w+=T[N+-64]*o,E-=T[q+64]*o,o=I[G+2],w+=T[N+0]*o,E-=T[q+0]*o,o=I[G+3],w+=T[N+64]*o,E-=T[q+-64]*o,o=I[G+4],w+=T[N+128]*o,E-=T[q+-128]*o,o=I[G+5],w+=T[N+192]*o,E-=T[q+-192]*o,w*=I[G+6],o=E-w,r[30+V*2]=E+w,r[31+V*2]=I[G+7]*o,G+=18,N--,q++}{var w,E,B,O;E=T[N+-16]*I[G+-10],w=T[N+-32]*I[G+-2],E+=(T[N+-48]-T[N+16])*I[G+-9],w+=T[N+-96]*I[G+-1],E+=(T[N+-80]+T[N+48])*I[G+-8],w+=T[N+-160]*I[G+0],E+=(T[N+-112]-T[N+80])*I[G+-7],w+=T[N+-224]*I[G+1],E+=(T[N+-144]+T[N+112])*I[G+-6],w-=T[N+32]*I[G+2],E+=(T[N+-176]-T[N+144])*I[G+-5],w-=T[N+96]*I[G+3],E+=(T[N+-208]+T[N+176])*I[G+-4],w-=T[N+160]*I[G+4],E+=(T[N+-240]-T[N+208])*I[G+-3],w-=T[N+224],B=w-E,O=w+E,E=r[14],w=r[15]-E,r[31]=O+E,r[30]=B+w,r[15]=B-w,r[14]=O-E}{var i;i=r[28]-r[0],r[0]+=r[28],r[28]=i*I[G+-2*18+7],i=r[29]-r[1],r[1]+=r[29],r[29]=i*I[G+-2*18+7],i=r[26]-r[2],r[2]+=r[26],r[26]=i*I[G+-4*18+7],i=r[27]-r[3],r[3]+=r[27],r[27]=i*I[G+-4*18+7],i=r[24]-r[4],r[4]+=r[24],r[24]=i*I[G+-6*18+7],i=r[25]-r[5],r[5]+=r[25],r[25]=i*I[G+-6*18+7],i=r[22]-r[6],r[6]+=r[22],r[22]=i*r0.SQRT2,i=r[23]-r[7],r[7]+=r[23],r[23]=i*r0.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],i=r[6],r[6]=r[31]-i,r[31]=r[31]+i,i=r[7],r[7]=r[30]-i,r[30]=r[30]+i,i=r[22],r[22]=r[15]-i,r[15]=r[15]+i,i=r[23],r[23]=r[14]-i,r[14]=r[14]+i,i=r[20]-r[8],r[8]+=r[20],r[20]=i*I[G+-10*18+7],i=r[21]-r[9],r[9]+=r[21],r[21]=i*I[G+-10*18+7],i=r[18]-r[10],r[10]+=r[18],r[18]=i*I[G+-12*18+7],i=r[19]-r[11],r[11]+=r[19],r[19]=i*I[G+-12*18+7],i=r[16]-r[12],r[12]+=r[16],r[16]=i*I[G+-14*18+7],i=r[17]-r[13],r[13]+=r[17],r[17]=i*I[G+-14*18+7],i=-r[20]+r[24],r[20]+=r[24],r[24]=i*I[G+-12*18+7],i=-r[21]+r[25],r[21]+=r[25],r[25]=i*I[G+-12*18+7],i=r[4]-r[8],r[4]+=r[8],r[8]=i*I[G+-12*18+7],i=r[5]-r[9],r[5]+=r[9],r[9]=i*I[G+-12*18+7],i=r[0]-r[12],r[0]+=r[12],r[12]=i*I[G+-4*18+7],i=r[1]-r[13],r[1]+=r[13],r[13]=i*I[G+-4*18+7],i=r[16]-r[28],r[16]+=r[28],r[28]=i*I[G+-4*18+7],i=-r[17]+r[29],r[17]+=r[29],r[29]=i*I[G+-4*18+7],i=r0.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=i,i=r0.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=i,i=r0.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=i-r[18],i=r0.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=i-r[19],i=r[2],r[19]-=r[3],r[3]-=i,r[2]=r[31]-i,r[31]+=i,i=r[3],r[11]-=r[19],r[18]-=i,r[3]=r[30]-i,r[30]+=i,i=r[18],r[27]-=r[11],r[19]-=i,r[18]=r[15]-i,r[15]+=i,i=r[19],r[10]-=i,r[19]=r[14]-i,r[14]+=i,i=r[10],r[11]-=i,r[10]=r[23]-i,r[23]+=i,i=r[11],r[26]-=i,r[11]=r[22]-i,r[22]+=i,i=r[26],r[27]-=i,r[26]=r[7]-i,r[7]+=i,i=r[27],r[27]=r[6]-i,r[6]+=i,i=r0.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=i,i=r0.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=i,i=r0.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=i,i=r0.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=i,i=-r0.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=i-r[8],i=-r0.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=i-r[9],i=-r0.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=i-r[25],i=-r0.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=i-r[24],i=r[24]-r[16],r[24]=i,i=r[20]-i,r[20]=i,i=r[28]-i,r[28]=i,i=r[25]-r[17],r[25]=i,i=r[21]-i,r[21]=i,i=r[29]-i,r[29]=i,i=r[17]-r[1],r[17]=i,i=r[9]-i,r[9]=i,i=r[25]-i,r[25]=i,i=r[5]-i,r[5]=i,i=r[21]-i,r[21]=i,i=r[13]-i,r[13]=i,i=r[29]-i,r[29]=i,i=r[1]-r[0],r[1]=i,i=r[16]-i,r[16]=i,i=r[17]-i,r[17]=i,i=r[8]-i,r[8]=i,i=r[9]-i,r[9]=i,i=r[24]-i,r[24]=i,i=r[25]-i,r[25]=i,i=r[4]-i,r[4]=i,i=r[5]-i,r[5]=i,i=r[20]-i,r[20]=i,i=r[21]-i,r[21]=i,i=r[12]-i,r[12]=i,i=r[13]-i,r[13]=i,i=r[28]-i,r[28]=i,i=r[29]-i,r[29]=i,i=r[0],r[0]+=r[31],r[31]-=i,i=r[1],r[1]+=r[30],r[30]-=i,i=r[16],r[16]+=r[15],r[15]-=i,i=r[17],r[17]+=r[14],r[14]-=i,i=r[8],r[8]+=r[23],r[23]-=i,i=r[9],r[9]+=r[22],r[22]-=i,i=r[24],r[24]+=r[7],r[7]-=i,i=r[25],r[25]+=r[6],r[6]-=i,i=r[4],r[4]+=r[27],r[27]-=i,i=r[5],r[5]+=r[26],r[26]-=i,i=r[20],r[20]+=r[11],r[11]-=i,i=r[21],r[21]+=r[10],r[10]-=i,i=r[12],r[12]+=r[19],r[19]-=i,i=r[13],r[13]+=r[18],r[18]-=i,i=r[28],r[28]+=r[3],r[3]-=i,i=r[29],r[29]+=r[2],r[2]-=i}}function we(T,N){for(var r=0;r<3;r++){var G,q,V,o,w,E;o=T[N+2*3]*j[g.SHORT_TYPE][0]-T[N+5*3],G=T[N+0*3]*j[g.SHORT_TYPE][2]-T[N+3*3],q=o+G,V=o-G,o=T[N+5*3]*j[g.SHORT_TYPE][0]+T[N+2*3],G=T[N+3*3]*j[g.SHORT_TYPE][2]+T[N+0*3],w=o+G,E=-o+G,G=(T[N+1*3]*j[g.SHORT_TYPE][1]-T[N+4*3])*2069978111953089e-26,o=(T[N+4*3]*j[g.SHORT_TYPE][1]+T[N+1*3])*2069978111953089e-26,T[N+3*0]=q*190752519173728e-25+G,T[N+3*5]=-w*190752519173728e-25+o,V=V*.8660254037844387*1907525191737281e-26,w=w*.5*1907525191737281e-26+o,T[N+3*1]=V-w,T[N+3*2]=V+w,q=q*.5*1907525191737281e-26-G,E=E*.8660254037844387*1907525191737281e-26,T[N+3*3]=q+E,T[N+3*4]=q-E,N++}}function R(T,N,r){var G,q;{var V,o,w,E,B,O,i,b;V=r[17]-r[9],w=r[15]-r[11],E=r[14]-r[12],B=r[0]+r[8],O=r[1]+r[7],i=r[2]+r[6],b=r[3]+r[5],T[N+17]=B+i-b-(O-r[4]),q=(B+i-b)*ne[12+7]+(O-r[4]),G=(V-w-E)*ne[12+6],T[N+5]=G+q,T[N+6]=G-q,o=(r[16]-r[10])*ne[12+6],O=O*ne[12+7]+r[4],G=V*ne[12+0]+o+w*ne[12+1]+E*ne[12+2],q=-B*ne[12+4]+O-i*ne[12+5]+b*ne[12+3],T[N+1]=G+q,T[N+2]=G-q,G=V*ne[12+1]-o-w*ne[12+2]+E*ne[12+0],q=-B*ne[12+5]+O-i*ne[12+3]+b*ne[12+4],T[N+9]=G+q,T[N+10]=G-q,G=V*ne[12+2]-o+w*ne[12+0]-E*ne[12+1],q=B*ne[12+3]-O+i*ne[12+4]-b*ne[12+5],T[N+13]=G+q,T[N+14]=G-q}{var h,u,d,p,l,f,c,C;h=r[8]-r[0],d=r[6]-r[2],p=r[5]-r[3],l=r[17]+r[9],f=r[16]+r[10],c=r[15]+r[11],C=r[14]+r[12],T[N+0]=l+c+C+(f+r[13]),G=(l+c+C)*ne[12+7]-(f+r[13]),q=(h-d+p)*ne[12+6],T[N+11]=G+q,T[N+12]=G-q,u=(r[7]-r[1])*ne[12+6],f=r[13]-f*ne[12+7],G=l*ne[12+3]-f+c*ne[12+4]+C*ne[12+5],q=h*ne[12+2]+u+d*ne[12+0]+p*ne[12+1],T[N+3]=G+q,T[N+4]=G-q,G=-l*ne[12+5]+f-c*ne[12+3]-C*ne[12+4],q=h*ne[12+1]+u-d*ne[12+2]-p*ne[12+0],T[N+7]=G+q,T[N+8]=G-q,G=-l*ne[12+4]+f-c*ne[12+5]-C*ne[12+3],q=h*ne[12+0]-u+d*ne[12+1]-p*ne[12+2],T[N+15]=G+q,T[N+16]=G-q}}this.mdct_sub48=function(T,N,r){for(var G=N,q=286,V=0;V<T.channels_out;V++){for(var o=0;o<T.mode_gr;o++){for(var w,E=T.l3_side.tt[o][V],B=E.xr,O=0,i=T.sb_sample[V][1-o],b=0,h=0;h<18/2;h++)for(P(G,q,i[b]),P(G,q+32,i[b+1]),b+=2,q+=64,w=1;w<32;w+=2)i[b-1][w]*=-1;for(w=0;w<32;w++,O+=18){var u=E.block_type,d=T.sb_sample[V][o],p=T.sb_sample[V][1-o];if(E.mixed_block_flag!=0&&w<2&&(u=0),T.amp_filter[w]<1e-12)V0.fill(B,O+0,O+18,0);else{if(T.amp_filter[w]<1)for(var h=0;h<18;h++)p[h][Oe[w]]*=T.amp_filter[w];if(u==g.SHORT_TYPE){for(var h=-J/4;h<0;h++){var l=j[g.SHORT_TYPE][h+3];B[O+h*3+9]=d[9+h][Oe[w]]*l-d[8-h][Oe[w]],B[O+h*3+18]=d[14-h][Oe[w]]*l+d[15+h][Oe[w]],B[O+h*3+10]=d[15+h][Oe[w]]*l-d[14-h][Oe[w]],B[O+h*3+19]=p[2-h][Oe[w]]*l+p[3+h][Oe[w]],B[O+h*3+11]=p[3+h][Oe[w]]*l-p[2-h][Oe[w]],B[O+h*3+20]=p[8-h][Oe[w]]*l+p[9+h][Oe[w]]}we(B,O)}else{for(var f=rt(18),h=-oe/4;h<0;h++){var c,C;c=j[u][h+27]*p[h+9][Oe[w]]+j[u][h+36]*p[8-h][Oe[w]],C=j[u][h+9]*d[h+9][Oe[w]]-j[u][h+18]*d[8-h][Oe[w]],f[h+9]=c-C*Se[3+h+9],f[h+18]=c*Se[3+h+9]+C}R(B,O,f)}}if(u!=g.SHORT_TYPE&&w!=0)for(var h=7;h>=0;--h){var ie,F;ie=B[O+h]*_e[20+h]+B[O+-1-h]*Ce[28+h],F=B[O+h]*Ce[28+h]-B[O+-1-h]*_e[20+h],B[O+-1-h]=ie,B[O+h]=F}}}if(G=r,q=286,T.mode_gr==1)for(var U=0;U<18;U++)f0.arraycopy(T.sb_sample[V][1][U],0,T.sb_sample[V][0][U],0,32)}}}var M0=G0,$0=le.System,z0=le.new_float,mt=le.new_float_n;function kt(){this.l=z0(g.SBMAX_l),this.s=mt([g.SBMAX_s,3]);var I=this;this.assign=function(J){$0.arraycopy(J.l,0,I.l,0,g.SBMAX_l);for(var oe=0;oe<g.SBMAX_s;oe++)for(var j=0;j<3;j++)I.s[oe][j]=J.s[oe][j]}}var Et=kt;function A0(){this.thm=new Et,this.en=new Et}var ze=A0,K0=le.System,w0=le.VbrMode,pt=le.new_array_n,d1=le.new_float,r1=le.new_float_n,bt=le.new_int,Ut=le.assert;v0.ENCDELAY=576,v0.POSTDELAY=1152,v0.MDCTDELAY=48,v0.FFTOFFSET=224+v0.MDCTDELAY,v0.DECDELAY=528,v0.SBLIMIT=32,v0.CBANDS=64,v0.SBPSY_l=21,v0.SBPSY_s=12,v0.SBMAX_l=22,v0.SBMAX_s=13,v0.PSFB21=6,v0.PSFB12=6,v0.BLKSIZE=1024,v0.HBLKSIZE=v0.BLKSIZE/2+1,v0.BLKSIZE_s=256,v0.HBLKSIZE_s=v0.BLKSIZE_s/2+1,v0.NORM_TYPE=0,v0.START_TYPE=1,v0.SHORT_TYPE=2,v0.STOP_TYPE=3,v0.MPG_MD_LR_LR=0,v0.MPG_MD_LR_I=1,v0.MPG_MD_MS_LR=2,v0.MPG_MD_MS_I=3,v0.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function v0(){var I=M0,J=ze,oe=v0.FFTOFFSET,j=v0.MPG_MD_MS_LR,Se=null;this.psy=null;var ne=null,_e=null,Ce=null;this.setModules=function(T,N,r,G){Se=T,this.psy=N,ne=N,_e=G,Ce=r};var Oe=new I;function P(T){var N,r;if(T.ATH.useAdjust==0){T.ATH.adjust=1;return}if(r=T.loudness_sq[0][0],N=T.loudness_sq[1][0],T.channels_out==2?(r+=T.loudness_sq[0][1],N+=T.loudness_sq[1][1]):(r+=r,N+=N),T.mode_gr==2&&(r=Math.max(r,N)),r*=.5,r*=T.ATH.aaSensitivityP,r>.03125)T.ATH.adjust>=1?T.ATH.adjust=1:T.ATH.adjust<T.ATH.adjustLimit&&(T.ATH.adjust=T.ATH.adjustLimit),T.ATH.adjustLimit=1;else{var G=31.98*r+625e-6;T.ATH.adjust>=G?(T.ATH.adjust*=G*.075+.925,T.ATH.adjust<G&&(T.ATH.adjust=G)):T.ATH.adjustLimit>=G?T.ATH.adjust=G:T.ATH.adjust<T.ATH.adjustLimit&&(T.ATH.adjust=T.ATH.adjustLimit),T.ATH.adjustLimit=G}}function we(T){var N,r;for(Ut(0<=T.bitrate_index&&T.bitrate_index<16),Ut(0<=T.mode_ext&&T.mode_ext<4),T.bitrate_stereoMode_Hist[T.bitrate_index][4]++,T.bitrate_stereoMode_Hist[15][4]++,T.channels_out==2&&(T.bitrate_stereoMode_Hist[T.bitrate_index][T.mode_ext]++,T.bitrate_stereoMode_Hist[15][T.mode_ext]++),N=0;N<T.mode_gr;++N)for(r=0;r<T.channels_out;++r){var G=T.l3_side.tt[N][r].block_type|0;T.l3_side.tt[N][r].mixed_block_flag!=0&&(G=4),T.bitrate_blockType_Hist[T.bitrate_index][G]++,T.bitrate_blockType_Hist[T.bitrate_index][5]++,T.bitrate_blockType_Hist[15][G]++,T.bitrate_blockType_Hist[15][5]++}}function R(T,N){var r=T.internal_flags,G,q;if(r.lame_encode_frame_init==0){var V,o,w=d1(2014),E=d1(286+1152+576);for(r.lame_encode_frame_init=1,V=0,o=0;V<286+576*(1+r.mode_gr);++V)V<576*r.mode_gr?(w[V]=0,r.channels_out==2&&(E[V]=0)):(w[V]=N[0][o],r.channels_out==2&&(E[V]=N[1][o]),++o);for(q=0;q<r.mode_gr;q++)for(G=0;G<r.channels_out;G++)r.l3_side.tt[q][G].block_type=v0.SHORT_TYPE;Oe.mdct_sub48(r,w,E),Ut(r.mf_size>=v0.BLKSIZE+T.framesize-v0.FFTOFFSET),Ut(r.mf_size>=512+T.framesize-32)}}this.lame_encode_mp3_frame=function(T,N,r,G,q,V){var o,w=pt([2,2]);w[0][0]=new J,w[0][1]=new J,w[1][0]=new J,w[1][1]=new J;var E=pt([2,2]);E[0][0]=new J,E[0][1]=new J,E[1][0]=new J,E[1][1]=new J;var B,O=[null,null],i=T.internal_flags,b=r1([2,4]),h=[.5,.5],u=[[0,0],[0,0]],d=[[0,0],[0,0]],p,l,f;if(O[0]=N,O[1]=r,i.lame_encode_frame_init==0&&R(T,O),i.padding=0,(i.slot_lag-=i.frac_SpF)<0&&(i.slot_lag+=T.out_samplerate,i.padding=1),i.psymodel!=0){var c,C=[null,null],ie=0,F=bt(2);for(f=0;f<i.mode_gr;f++){for(l=0;l<i.channels_out;l++)C[l]=O[l],ie=576+f*576-v0.FFTOFFSET;if(T.VBR==w0.vbr_mtrh||T.VBR==w0.vbr_mt?c=ne.L3psycho_anal_vbr(T,C,ie,f,w,E,u[f],d[f],b[f],F):c=ne.L3psycho_anal_ns(T,C,ie,f,w,E,u[f],d[f],b[f],F),c!=0)return-4;for(T.mode==ct.JOINT_STEREO&&(h[f]=b[f][2]+b[f][3],h[f]>0&&(h[f]=b[f][3]/h[f])),l=0;l<i.channels_out;l++){var U=i.l3_side.tt[f][l];U.block_type=F[l],U.mixed_block_flag=0}}}else for(f=0;f<i.mode_gr;f++)for(l=0;l<i.channels_out;l++)i.l3_side.tt[f][l].block_type=v0.NORM_TYPE,i.l3_side.tt[f][l].mixed_block_flag=0,d[f][l]=u[f][l]=700;if(P(i),Oe.mdct_sub48(i,O[0],O[1]),i.mode_ext=v0.MPG_MD_LR_LR,T.force_ms)i.mode_ext=v0.MPG_MD_MS_LR;else if(T.mode==ct.JOINT_STEREO){var s=0,_=0;for(f=0;f<i.mode_gr;f++)for(l=0;l<i.channels_out;l++)s+=d[f][l],_+=u[f][l];if(s<=1*_){var ue=i.l3_side.tt[0],he=i.l3_side.tt[i.mode_gr-1];ue[0].block_type==ue[1].block_type&&he[0].block_type==he[1].block_type&&(i.mode_ext=v0.MPG_MD_MS_LR)}}if(i.mode_ext==j?(B=E,p=d):(B=w,p=u),T.analysis&&i.pinfo!=null)for(f=0;f<i.mode_gr;f++)for(l=0;l<i.channels_out;l++)i.pinfo.ms_ratio[f]=i.ms_ratio[f],i.pinfo.ms_ener_ratio[f]=h[f],i.pinfo.blocktype[f][l]=i.l3_side.tt[f][l].block_type,i.pinfo.pe[f][l]=p[f][l],K0.arraycopy(i.l3_side.tt[f][l].xr,0,i.pinfo.xr[f][l],0,576),i.mode_ext==j&&(i.pinfo.ers[f][l]=i.pinfo.ers[f][l+2],K0.arraycopy(i.pinfo.energy[f][l+2],0,i.pinfo.energy[f][l],0,i.pinfo.energy[f][l].length));if(T.VBR==w0.vbr_off||T.VBR==w0.vbr_abr){var Le,$e;for(Le=0;Le<18;Le++)i.nsPsy.pefirbuf[Le]=i.nsPsy.pefirbuf[Le+1];for($e=0,f=0;f<i.mode_gr;f++)for(l=0;l<i.channels_out;l++)$e+=p[f][l];for(i.nsPsy.pefirbuf[18]=$e,$e=i.nsPsy.pefirbuf[9],Le=0;Le<9;Le++)$e+=(i.nsPsy.pefirbuf[Le]+i.nsPsy.pefirbuf[18-Le])*v0.fircoef[Le];for($e=670*5*i.mode_gr*i.channels_out/$e,f=0;f<i.mode_gr;f++)for(l=0;l<i.channels_out;l++)p[f][l]*=$e}if(i.iteration_loop.iteration_loop(T,p,h,B),Se.format_bitstream(T),o=Se.copy_buffer(i,G,q,V,1),T.bWriteVbrTag&&_e.addVbrFrame(T),T.analysis&&i.pinfo!=null){for(l=0;l<i.channels_out;l++){var ke;for(ke=0;ke<oe;ke++)i.pinfo.pcmdata[l][ke]=i.pinfo.pcmdata[l][ke+T.framesize];for(ke=oe;ke<1600;ke++)i.pinfo.pcmdata[l][ke]=O[l][ke-oe]}Ce.set_frame_pinfo(T,B)}return we(i),o}}var g=v0,It=le.Util,m1=le.new_float;function W1(){var I=m1(g.BLKSIZE),J=m1(g.BLKSIZE_s/2),oe=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function j(ne,_e,Ce){var Oe=0,P,we,R;Ce<<=1;var T=_e+Ce;P=4;do{var N,r,G,q,V,o,w;w=P>>1,q=P,V=P<<1,o=V+q,P=V<<1,we=_e,R=we+w;do{var E,B,O,i;B=ne[we+0]-ne[we+q],E=ne[we+0]+ne[we+q],i=ne[we+V]-ne[we+o],O=ne[we+V]+ne[we+o],ne[we+V]=E-O,ne[we+0]=E+O,ne[we+o]=B-i,ne[we+q]=B+i,B=ne[R+0]-ne[R+q],E=ne[R+0]+ne[R+q],i=It.SQRT2*ne[R+o],O=It.SQRT2*ne[R+V],ne[R+V]=E-O,ne[R+0]=E+O,ne[R+o]=B-i,ne[R+q]=B+i,R+=P,we+=P}while(we<T);for(r=oe[Oe+0],N=oe[Oe+1],G=1;G<w;G++){var b,h;b=1-2*N*N,h=2*N*r,we=_e+G,R=_e+q-G;do{var u,d,p,E,B,l,O,f,i,c;d=h*ne[we+q]-b*ne[R+q],u=b*ne[we+q]+h*ne[R+q],B=ne[we+0]-u,E=ne[we+0]+u,l=ne[R+0]-d,p=ne[R+0]+d,d=h*ne[we+o]-b*ne[R+o],u=b*ne[we+o]+h*ne[R+o],i=ne[we+V]-u,O=ne[we+V]+u,c=ne[R+V]-d,f=ne[R+V]+d,d=N*O-r*c,u=r*O+N*c,ne[we+V]=E-u,ne[we+0]=E+u,ne[R+o]=l-d,ne[R+q]=l+d,d=r*f-N*i,u=N*f+r*i,ne[R+V]=p-u,ne[R+0]=p+u,ne[we+o]=B-d,ne[we+q]=B+d,R+=P,we+=P}while(we<T);b=r,r=b*oe[Oe+0]-N*oe[Oe+1],N=b*oe[Oe+1]+N*oe[Oe+0]}Oe+=2}while(P<Ce)}var Se=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(ne,_e,Ce,Oe,P){for(var we=0;we<3;we++){var R=g.BLKSIZE_s/2,T=65535&576/3*(we+1),N=g.BLKSIZE_s/8-1;do{var r,G,q,V,o,w=Se[N<<2]&255;r=J[w]*Oe[Ce][P+w+T],o=J[127-w]*Oe[Ce][P+w+T+128],G=r-o,r=r+o,q=J[w+64]*Oe[Ce][P+w+T+64],o=J[63-w]*Oe[Ce][P+w+T+192],V=q-o,q=q+o,R-=4,_e[we][R+0]=r+q,_e[we][R+2]=r-q,_e[we][R+1]=G+V,_e[we][R+3]=G-V,r=J[w+1]*Oe[Ce][P+w+T+1],o=J[126-w]*Oe[Ce][P+w+T+129],G=r-o,r=r+o,q=J[w+65]*Oe[Ce][P+w+T+65],o=J[62-w]*Oe[Ce][P+w+T+193],V=q-o,q=q+o,_e[we][R+g.BLKSIZE_s/2+0]=r+q,_e[we][R+g.BLKSIZE_s/2+2]=r-q,_e[we][R+g.BLKSIZE_s/2+1]=G+V,_e[we][R+g.BLKSIZE_s/2+3]=G-V}while(--N>=0);j(_e[we],R,g.BLKSIZE_s/2)}},this.fft_long=function(ne,_e,Ce,Oe,P){var we=g.BLKSIZE/8-1,R=g.BLKSIZE/2;do{var T,N,r,G,q,V=Se[we]&255;T=I[V]*Oe[Ce][P+V],q=I[V+512]*Oe[Ce][P+V+512],N=T-q,T=T+q,r=I[V+256]*Oe[Ce][P+V+256],q=I[V+768]*Oe[Ce][P+V+768],G=r-q,r=r+q,R-=4,_e[R+0]=T+r,_e[R+2]=T-r,_e[R+1]=N+G,_e[R+3]=N-G,T=I[V+1]*Oe[Ce][P+V+1],q=I[V+513]*Oe[Ce][P+V+513],N=T-q,T=T+q,r=I[V+257]*Oe[Ce][P+V+257],q=I[V+769]*Oe[Ce][P+V+769],G=r-q,r=r+q,_e[R+g.BLKSIZE/2+0]=T+r,_e[R+g.BLKSIZE/2+2]=T-r,_e[R+g.BLKSIZE/2+1]=N+G,_e[R+g.BLKSIZE/2+3]=N-G}while(--we>=0);j(_e,R,g.BLKSIZE/2)},this.init_fft=function(ne){for(var _e=0;_e<g.BLKSIZE;_e++)I[_e]=.42-.5*Math.cos(2*Math.PI*(_e+.5)/g.BLKSIZE)+.08*Math.cos(4*Math.PI*(_e+.5)/g.BLKSIZE);for(var _e=0;_e<g.BLKSIZE_s/2;_e++)J[_e]=.5*(1-Math.cos(2*Math.PI*(_e+.5)/g.BLKSIZE_s))}}var a1=W1,Lt=le.VbrMode,a0=le.Float,ye=le.ShortBlock,Ke=le.Util,T1=le.Arrays,L0=le.new_float,lt=le.new_float_n,B1=le.new_int,o0=le.assert;function Xn(){var I=new a1,J=2.302585092994046,oe=2,j=16,Se=2,ne=16,_e=.34,Ce=1/(14752*14752)/(g.BLKSIZE/2),Oe=.01,P=.8,we=.6,R=.3,T=3.5,N=21,r=.2302585093;function G(y){return y}function q(y,A){for(var H=0,D=0;D<g.BLKSIZE/2;++D)H+=y[D]*A.ATH.eql_w[D];return H*=Ce,H}function V(y,A,H,D,K,k,Q,re,z,ve,ae){var pe=y.internal_flags;if(z<2)I.fft_long(pe,D[K],z,ve,ae),I.fft_short(pe,k[Q],z,ve,ae);else if(z==2){for(var De=g.BLKSIZE-1;De>=0;--De){var je=D[K+0][De],Re=D[K+1][De];D[K+0][De]=(je+Re)*Ke.SQRT2*.5,D[K+1][De]=(je-Re)*Ke.SQRT2*.5}for(var Je=2;Je>=0;--Je)for(var De=g.BLKSIZE_s-1;De>=0;--De){var je=k[Q+0][Je][De],Re=k[Q+1][Je][De];k[Q+0][Je][De]=(je+Re)*Ke.SQRT2*.5,k[Q+1][Je][De]=(je-Re)*Ke.SQRT2*.5}}A[0]=D[K+0][0],A[0]*=A[0];for(var De=g.BLKSIZE/2-1;De>=0;--De){var ce=D[K+0][g.BLKSIZE/2-De],Ze=D[K+0][g.BLKSIZE/2+De];A[g.BLKSIZE/2-De]=(ce*ce+Ze*Ze)*.5}for(var Je=2;Je>=0;--Je){H[Je][0]=k[Q+0][Je][0],H[Je][0]*=H[Je][0];for(var De=g.BLKSIZE_s/2-1;De>=0;--De){var ce=k[Q+0][Je][g.BLKSIZE_s/2-De],Ze=k[Q+0][Je][g.BLKSIZE_s/2+De];H[Je][g.BLKSIZE_s/2-De]=(ce*ce+Ze*Ze)*.5}}{for(var b0=0,De=11;De<g.HBLKSIZE;De++)b0+=A[De];pe.tot_ener[z]=b0}if(y.analysis){for(var De=0;De<g.HBLKSIZE;De++)pe.pinfo.energy[re][z][De]=pe.pinfo.energy_save[z][De],pe.pinfo.energy_save[z][De]=A[De];pe.pinfo.pe[re][z]=pe.pe[z]}y.athaa_loudapprox==2&&z<2&&(pe.loudness_sq[re][z]=pe.loudness_sq_save[z],pe.loudness_sq_save[z]=q(A,pe))}var o=8,w=23,E=15,B,O,i,b=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function h(){B=Math.pow(10,(o+1)/16),O=Math.pow(10,(w+1)/16),i=Math.pow(10,E/10)}var u=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],d=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],p=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function l(y,A,H,D,K,k){var Q;if(A>y)if(A<y*O)Q=A/y;else return y+A;else{if(y>=A*O)return y+A;Q=y/A}if(y+=A,D+3<=3+3){if(Q>=B)return y;var re=0|Ke.FAST_LOG10_X(Q,16);return y*d[re]}var re=0|Ke.FAST_LOG10_X(Q,16);if(k!=0?A=K.ATH.cb_s[H]*K.ATH.adjust:A=K.ATH.cb_l[H]*K.ATH.adjust,y<i*A){if(y>A){var z,ve;return z=1,re<=13&&(z=p[re]),ve=Ke.FAST_LOG10_X(y/A,10/15),y*((u[re]-z)*ve+z)}return re>13?y:y*p[re]}return y*u[re]}var f=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function c(y,A,H){var D;if(y<0&&(y=0),A<0&&(A=0),y<=0)return A;if(A<=0)return y;if(A>y?D=A/y:D=y/A,-2<=H&&H<=2){if(D>=B)return y+A;var K=0|Ke.FAST_LOG10_X(D,16);return(y+A)*f[K]}return D<O?y+A:(y<A&&(y=A),y)}function C(y,A){var H=y.internal_flags;if(H.channels_out>1){for(var D=0;D<g.SBMAX_l;D++){var K=H.thm[0].l[D],k=H.thm[1].l[D];H.thm[0].l[D]+=k*A,H.thm[1].l[D]+=K*A}for(var D=0;D<g.SBMAX_s;D++)for(var Q=0;Q<3;Q++){var K=H.thm[0].s[D][Q],k=H.thm[1].s[D][Q];H.thm[0].s[D][Q]+=k*A,H.thm[1].s[D][Q]+=K*A}}}function ie(y){for(var A=0;A<g.SBMAX_l;A++)if(!(y.thm[0].l[A]>1.58*y.thm[1].l[A]||y.thm[1].l[A]>1.58*y.thm[0].l[A])){var H=y.mld_l[A]*y.en[3].l[A],D=Math.max(y.thm[2].l[A],Math.min(y.thm[3].l[A],H));H=y.mld_l[A]*y.en[2].l[A];var K=Math.max(y.thm[3].l[A],Math.min(y.thm[2].l[A],H));y.thm[2].l[A]=D,y.thm[3].l[A]=K}for(var A=0;A<g.SBMAX_s;A++)for(var k=0;k<3;k++)if(!(y.thm[0].s[A][k]>1.58*y.thm[1].s[A][k]||y.thm[1].s[A][k]>1.58*y.thm[0].s[A][k])){var H=y.mld_s[A]*y.en[3].s[A][k],D=Math.max(y.thm[2].s[A][k],Math.min(y.thm[3].s[A][k],H));H=y.mld_s[A]*y.en[2].s[A][k];var K=Math.max(y.thm[3].s[A][k],Math.min(y.thm[2].s[A][k],H));y.thm[2].s[A][k]=D,y.thm[3].s[A][k]=K}}function F(y,A,H){var D=A,K=Math.pow(10,H);A*=2,D*=2;for(var k=0;k<g.SBMAX_l;k++){var Q,re,z,ve;if(ve=y.ATH.cb_l[y.bm_l[k]]*K,Q=Math.min(Math.max(y.thm[0].l[k],ve),Math.max(y.thm[1].l[k],ve)),re=Math.max(y.thm[2].l[k],ve),z=Math.max(y.thm[3].l[k],ve),Q*A<re+z){var ae=Q*D/(re+z);re*=ae,z*=ae}y.thm[2].l[k]=Math.min(re,y.thm[2].l[k]),y.thm[3].l[k]=Math.min(z,y.thm[3].l[k])}K*=g.BLKSIZE_s/g.BLKSIZE;for(var k=0;k<g.SBMAX_s;k++)for(var pe=0;pe<3;pe++){var Q,re,z,ve;if(ve=y.ATH.cb_s[y.bm_s[k]]*K,Q=Math.min(Math.max(y.thm[0].s[k][pe],ve),Math.max(y.thm[1].s[k][pe],ve)),re=Math.max(y.thm[2].s[k][pe],ve),z=Math.max(y.thm[3].s[k][pe],ve),Q*A<re+z){var ae=Q*A/(re+z);re*=ae,z*=ae}y.thm[2].s[k][pe]=Math.min(y.thm[2].s[k][pe],re),y.thm[3].s[k][pe]=Math.min(y.thm[3].s[k][pe],z)}}function U(y,A,H,D,K){var k,Q,re=0,z=0;for(k=Q=0;k<g.SBMAX_s;++Q,++k){for(var ve=y.bo_s[k],ae=y.npart_s,pe=ve<ae?ve:ae;Q<pe;)o0(A[Q]>=0),o0(H[Q]>=0),re+=A[Q],z+=H[Q],Q++;if(y.en[D].s[k][K]=re,y.thm[D].s[k][K]=z,Q>=ae){++k;break}o0(A[Q]>=0),o0(H[Q]>=0);{var De=y.PSY.bo_s_weight[k],je=1-De;re=De*A[Q],z=De*H[Q],y.en[D].s[k][K]+=re,y.thm[D].s[k][K]+=z,re=je*A[Q],z=je*H[Q]}}for(;k<g.SBMAX_s;++k)y.en[D].s[k][K]=0,y.thm[D].s[k][K]=0}function s(y,A,H,D){var K,k,Q=0,re=0;for(K=k=0;K<g.SBMAX_l;++k,++K){for(var z=y.bo_l[K],ve=y.npart_l,ae=z<ve?z:ve;k<ae;)o0(A[k]>=0),o0(H[k]>=0),Q+=A[k],re+=H[k],k++;if(y.en[D].l[K]=Q,y.thm[D].l[K]=re,k>=ve){++K;break}o0(A[k]>=0),o0(H[k]>=0);{var pe=y.PSY.bo_l_weight[K],De=1-pe;Q=pe*A[k],re=pe*H[k],y.en[D].l[K]+=Q,y.thm[D].l[K]+=re,Q=De*A[k],re=De*H[k]}}for(;K<g.SBMAX_l;++K)y.en[D].l[K]=0,y.thm[D].l[K]=0}function _(y,A,H,D,K,k){var Q=y.internal_flags,re,z;for(z=re=0;z<Q.npart_s;++z){for(var ve=0,ae=Q.numlines_s[z],pe=0;pe<ae;++pe,++re){var De=A[k][re];ve+=De}H[z]=ve}for(o0(z==Q.npart_s),re=z=0;z<Q.npart_s;z++){var je=Q.s3ind_s[z][0],Re=Q.s3_ss[re++]*H[je];for(++je;je<=Q.s3ind_s[z][1];)Re+=Q.s3_ss[re]*H[je],++re,++je;{var Je=Se*Q.nb_s1[K][z];D[z]=Math.min(Re,Je)}if(Q.blocktype_old[K&1]==g.SHORT_TYPE){var Je=ne*Q.nb_s2[K][z],ce=D[z];D[z]=Math.min(Je,ce)}Q.nb_s2[K][z]=Q.nb_s1[K][z],Q.nb_s1[K][z]=Re,o0(D[z]>=0)}for(;z<=g.CBANDS;++z)H[z]=0,D[z]=0}function ue(y,A,H,D){var K=y.internal_flags;y.short_blocks==ye.short_block_coupled&&!(A[0]!=0&&A[1]!=0)&&(A[0]=A[1]=0);for(var k=0;k<K.channels_out;k++)D[k]=g.NORM_TYPE,y.short_blocks==ye.short_block_dispensed&&(A[k]=1),y.short_blocks==ye.short_block_forced&&(A[k]=0),A[k]!=0?(o0(K.blocktype_old[k]!=g.START_TYPE),K.blocktype_old[k]==g.SHORT_TYPE&&(D[k]=g.STOP_TYPE)):(D[k]=g.SHORT_TYPE,K.blocktype_old[k]==g.NORM_TYPE&&(K.blocktype_old[k]=g.START_TYPE),K.blocktype_old[k]==g.STOP_TYPE&&(K.blocktype_old[k]=g.SHORT_TYPE)),H[k]=K.blocktype_old[k],K.blocktype_old[k]=D[k]}function he(y,A,H){return H>=1?y:H<=0?A:A>0?Math.pow(y/A,H)*A:0}var Le=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function $e(y,A){for(var H=309.07,D=0;D<g.SBMAX_s-1;D++)for(var K=0;K<3;K++){var k=y.thm.s[D][K];if(k>0){var Q=k*A,re=y.en.s[D][K];re>Q&&(re>Q*1e10?H+=Le[D]*(10*J):H+=Le[D]*Ke.FAST_LOG10(re/Q))}}return H}var ke=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function L(y,A){for(var H=281.0575,D=0;D<g.SBMAX_l-1;D++){var K=y.thm.l[D];if(K>0){var k=K*A,Q=y.en.l[D];Q>k&&(Q>k*1e10?H+=ke[D]*(10*J):H+=ke[D]*Ke.FAST_LOG10(Q/k))}}return H}function ee(y,A,H,D,K){var k,Q;for(k=Q=0;k<y.npart_l;++k){var re=0,z=0,ve;for(ve=0;ve<y.numlines_l[k];++ve,++Q){var ae=A[Q];re+=ae,z<ae&&(z=ae)}H[k]=re,D[k]=z,K[k]=re*y.rnumlines_l[k],o0(y.rnumlines_l[k]>=0),o0(H[k]>=0),o0(D[k]>=0),o0(K[k]>=0)}}function Z(y,A,H,D){var K=b.length-1,k=0,Q=H[k]+H[k+1];if(Q>0){var re=A[k];re<A[k+1]&&(re=A[k+1]),o0(y.numlines_l[k]+y.numlines_l[k+1]-1>0),Q=20*(re*2-Q)/(Q*(y.numlines_l[k]+y.numlines_l[k+1]-1));var z=0|Q;z>K&&(z=K),D[k]=z}else D[k]=0;for(k=1;k<y.npart_l-1;k++)if(Q=H[k-1]+H[k]+H[k+1],Q>0){var re=A[k-1];re<A[k]&&(re=A[k]),re<A[k+1]&&(re=A[k+1]),o0(y.numlines_l[k-1]+y.numlines_l[k]+y.numlines_l[k+1]-1>0),Q=20*(re*3-Q)/(Q*(y.numlines_l[k-1]+y.numlines_l[k]+y.numlines_l[k+1]-1));var z=0|Q;z>K&&(z=K),D[k]=z}else D[k]=0;if(o0(k==y.npart_l-1),Q=H[k-1]+H[k],Q>0){var re=A[k-1];re<A[k]&&(re=A[k]),o0(y.numlines_l[k-1]+y.numlines_l[k]-1>0),Q=20*(re*2-Q)/(Q*(y.numlines_l[k-1]+y.numlines_l[k]-1));var z=0|Q;z>K&&(z=K),D[k]=z}else D[k]=0;o0(k==y.npart_l-1)}var se=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(y,A,H,D,K,k,Q,re,z,ve){var ae=y.internal_flags,pe=lt([2,g.BLKSIZE]),De=lt([2,3,g.BLKSIZE_s]),je=L0(g.CBANDS+1),Re=L0(g.CBANDS+1),Je=L0(g.CBANDS+2),ce=B1(2),Ze=B1(2),b0,Te,Ve,ge,t0,j0,Pe,d0,x0=lt([2,576]),Z0,Vt=B1(g.CBANDS+2),et=B1(g.CBANDS+2);for(T1.fill(et,0),b0=ae.channels_out,y.mode==ct.JOINT_STEREO&&(b0=4),y.VBR==Lt.vbr_off?Z0=ae.ResvMax==0?0:ae.ResvSize/ae.ResvMax*.5:y.VBR==Lt.vbr_rh||y.VBR==Lt.vbr_mtrh||y.VBR==Lt.vbr_mt?Z0=.6:Z0=1,Te=0;Te<ae.channels_out;Te++){var U0=A[Te],yt=H+576-350-N+192;for(ge=0;ge<576;ge++){var Tt,gt;for(Tt=U0[yt+ge+10],gt=0,t0=0;t0<(N-1)/2-1;t0+=2)Tt+=se[t0]*(U0[yt+ge+t0]+U0[yt+ge+N-t0]),gt+=se[t0+1]*(U0[yt+ge+t0+1]+U0[yt+ge+N-t0-1]);x0[Te][ge]=Tt+gt}K[D][Te].en.assign(ae.en[Te]),K[D][Te].thm.assign(ae.thm[Te]),b0>2&&(k[D][Te].en.assign(ae.en[Te+2]),k[D][Te].thm.assign(ae.thm[Te+2]))}for(Te=0;Te<b0;Te++){var w1,y1,Bt=L0(12),L1=[0,0,0,0],Nn=L0(12),Hn=1,Vn,Pr=L0(g.CBANDS),x=L0(g.CBANDS),X0=[0,0,0,0],Kn=L0(g.HBLKSIZE),Qt=lt([3,g.HBLKSIZE_s]);for(o0(ae.npart_s<=g.CBANDS),o0(ae.npart_l<=g.CBANDS),ge=0;ge<3;ge++)Bt[ge]=ae.nsPsy.last_en_subshort[Te][ge+6],o0(ae.nsPsy.last_en_subshort[Te][ge+4]>0),Nn[ge]=Bt[ge]/ae.nsPsy.last_en_subshort[Te][ge+4],L1[0]+=Bt[ge];if(Te==2)for(ge=0;ge<576;ge++){var T0,qr;T0=x0[0][ge],qr=x0[1][ge],x0[0][ge]=T0+qr,x0[1][ge]=T0-qr}{var Oa=x0[Te&1],Qn=0;for(ge=0;ge<9;ge++){for(var hn=Qn+64,St=1;Qn<hn;Qn++)St<Math.abs(Oa[Qn])&&(St=Math.abs(Oa[Qn]));ae.nsPsy.last_en_subshort[Te][ge]=Bt[ge+3]=St,L1[1+ge/3]+=St,St>Bt[ge+3-2]?(o0(Bt[ge+3-2]>0),St=St/Bt[ge+3-2]):Bt[ge+3-2]>St*10?St=Bt[ge+3-2]/(St*10):St=0,Nn[ge+3]=St}}if(y.analysis){var Xr=Nn[0];for(ge=1;ge<12;ge++)Xr<Nn[ge]&&(Xr=Nn[ge]);ae.pinfo.ers[D][Te]=ae.pinfo.ers_save[Te],ae.pinfo.ers_save[Te]=Xr}for(Vn=Te==3?ae.nsPsy.attackthre_s:ae.nsPsy.attackthre,ge=0;ge<12;ge++)X0[ge/3]==0&&Nn[ge]>Vn&&(X0[ge/3]=ge%3+1);for(ge=1;ge<4;ge++){var Zr;L1[ge-1]>L1[ge]?(o0(L1[ge]>0),Zr=L1[ge-1]/L1[ge]):(o0(L1[ge-1]>0),Zr=L1[ge]/L1[ge-1]),Zr<1.7&&(X0[ge]=0,ge==1&&(X0[0]=0))}for(X0[0]!=0&&ae.nsPsy.lastAttacks[Te]!=0&&(X0[0]=0),(ae.nsPsy.lastAttacks[Te]==3||X0[0]+X0[1]+X0[2]+X0[3]!=0)&&(Hn=0,X0[1]!=0&&X0[0]!=0&&(X0[1]=0),X0[2]!=0&&X0[1]!=0&&(X0[2]=0),X0[3]!=0&&X0[2]!=0&&(X0[3]=0)),Te<2?Ze[Te]=Hn:Hn==0&&(Ze[0]=Ze[1]=0),z[Te]=ae.tot_ener[Te],y1=De,w1=pe,V(y,Kn,Qt,w1,Te&1,y1,Te&1,D,Te,A,H),ee(ae,Kn,je,Pr,x),Z(ae,Pr,x,Vt),d0=0;d0<3;d0++){var Ur,Xt;for(_(y,Qt,Re,Je,Te,d0),U(ae,Re,Je,Te,d0),Pe=0;Pe<g.SBMAX_s;Pe++){if(Xt=ae.thm[Te].s[Pe][d0],Xt*=P,X0[d0]>=2||X0[d0+1]==1){var Jt=d0!=0?d0-1:2,St=he(ae.thm[Te].s[Pe][Jt],Xt,we*Z0);Xt=Math.min(Xt,St)}if(X0[d0]==1){var Jt=d0!=0?d0-1:2,St=he(ae.thm[Te].s[Pe][Jt],Xt,R*Z0);Xt=Math.min(Xt,St)}else if(d0!=0&&X0[d0-1]==3||d0==0&&ae.nsPsy.lastAttacks[Te]==3){var Jt=d0!=2?d0+1:0,St=he(ae.thm[Te].s[Pe][Jt],Xt,R*Z0);Xt=Math.min(Xt,St)}Ur=Bt[d0*3+3]+Bt[d0*3+4]+Bt[d0*3+5],Bt[d0*3+5]*6<Ur&&(Xt*=.5,Bt[d0*3+4]*6<Ur&&(Xt*=.5)),ae.thm[Te].s[Pe][d0]=Xt}}for(ae.nsPsy.lastAttacks[Te]=X0[2],j0=0,Ve=0;Ve<ae.npart_l;Ve++){for(var dn=ae.s3ind[Ve][0],Yr=je[dn]*b[Vt[dn]],mn=ae.s3_ll[j0++]*Yr;++dn<=ae.s3ind[Ve][1];)Yr=je[dn]*b[Vt[dn]],mn=l(mn,ae.s3_ll[j0++]*Yr,dn,dn-Ve,ae,0);mn*=.158489319246111,ae.blocktype_old[Te&1]==g.SHORT_TYPE?Je[Ve]=mn:Je[Ve]=he(Math.min(mn,Math.min(oe*ae.nb_1[Te][Ve],j*ae.nb_2[Te][Ve])),mn,Z0),ae.nb_2[Te][Ve]=ae.nb_1[Te][Ve],ae.nb_1[Te][Ve]=mn}for(;Ve<=g.CBANDS;++Ve)je[Ve]=0,Je[Ve]=0;s(ae,je,Je,Te)}if((y.mode==ct.STEREO||y.mode==ct.JOINT_STEREO)&&y.interChRatio>0&&C(y,y.interChRatio),y.mode==ct.JOINT_STEREO){var Gr;ie(ae),Gr=y.msfix,Math.abs(Gr)>0&&F(ae,Gr,y.ATHlower*ae.ATH.adjust)}for(ue(y,Ze,ve,ce),Te=0;Te<b0;Te++){var Jn,jt=0,xr,wr;Te>1?(Jn=re,jt=-2,xr=g.NORM_TYPE,(ve[0]==g.SHORT_TYPE||ve[1]==g.SHORT_TYPE)&&(xr=g.SHORT_TYPE),wr=k[D][Te-2]):(Jn=Q,jt=0,xr=ve[Te],wr=K[D][Te]),xr==g.SHORT_TYPE?Jn[jt+Te]=$e(wr,ae.masking_lower):Jn[jt+Te]=L(wr,ae.masking_lower),y.analysis&&(ae.pinfo.pe[D][Te]=Jn[jt+Te])}return 0};function Xe(y,A,H,D,K,k,Q,re){var z=y.internal_flags;if(D<2)I.fft_long(z,Q[re],D,A,H);else if(D==2)for(var ve=g.BLKSIZE-1;ve>=0;--ve){var ae=Q[re+0][ve],pe=Q[re+1][ve];Q[re+0][ve]=(ae+pe)*Ke.SQRT2*.5,Q[re+1][ve]=(ae-pe)*Ke.SQRT2*.5}k[0]=Q[re+0][0],k[0]*=k[0];for(var ve=g.BLKSIZE/2-1;ve>=0;--ve){var De=Q[re+0][g.BLKSIZE/2-ve],je=Q[re+0][g.BLKSIZE/2+ve];k[g.BLKSIZE/2-ve]=(De*De+je*je)*.5}{for(var Re=0,ve=11;ve<g.HBLKSIZE;ve++)Re+=k[ve];z.tot_ener[D]=Re}if(y.analysis){for(var ve=0;ve<g.HBLKSIZE;ve++)z.pinfo.energy[K][D][ve]=z.pinfo.energy_save[D][ve],z.pinfo.energy_save[D][ve]=k[ve];z.pinfo.pe[K][D]=z.pe[D]}}function c0(y,A,H,D,K,k,Q,re){var z=y.internal_flags;if(K==0&&D<2&&I.fft_short(z,Q[re],D,A,H),D==2)for(var ve=g.BLKSIZE_s-1;ve>=0;--ve){var ae=Q[re+0][K][ve],pe=Q[re+1][K][ve];Q[re+0][K][ve]=(ae+pe)*Ke.SQRT2*.5,Q[re+1][K][ve]=(ae-pe)*Ke.SQRT2*.5}k[K][0]=Q[re+0][K][0],k[K][0]*=k[K][0];for(var ve=g.BLKSIZE_s/2-1;ve>=0;--ve){var De=Q[re+0][K][g.BLKSIZE_s/2-ve],je=Q[re+0][K][g.BLKSIZE_s/2+ve];k[K][g.BLKSIZE_s/2-ve]=(De*De+je*je)*.5}}function l0(y,A,H,D){var K=y.internal_flags;y.athaa_loudapprox==2&&H<2&&(K.loudness_sq[A][H]=K.loudness_sq_save[H],K.loudness_sq_save[H]=q(D,K))}var _0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function J0(y,A,H,D,K,k,Q,re,z,ve){for(var ae=lt([2,576]),pe=y.internal_flags,De=pe.channels_out,je=y.mode==ct.JOINT_STEREO?4:De,Re=0;Re<De;Re++){firbuf=A[Re];for(var Je=H+576-350-N+192,ce=0;ce<576;ce++){var Ze,b0;Ze=firbuf[Je+ce+10],b0=0;for(var Te=0;Te<(N-1)/2-1;Te+=2)Ze+=_0[Te]*(firbuf[Je+ce+Te]+firbuf[Je+ce+N-Te]),b0+=_0[Te+1]*(firbuf[Je+ce+Te+1]+firbuf[Je+ce+N-Te-1]);ae[Re][ce]=Ze+b0}K[D][Re].en.assign(pe.en[Re]),K[D][Re].thm.assign(pe.thm[Re]),je>2&&(k[D][Re].en.assign(pe.en[Re+2]),k[D][Re].thm.assign(pe.thm[Re+2]))}for(var Re=0;Re<je;Re++){var Ve=L0(12),ge=L0(12),t0=[0,0,0,0],j0=ae[Re&1],Pe=0,d0=Re==3?pe.nsPsy.attackthre_s:pe.nsPsy.attackthre,x0=1;if(Re==2)for(var ce=0,Te=576;Te>0;++ce,--Te){var Z0=ae[0][ce],Vt=ae[1][ce];ae[0][ce]=Z0+Vt,ae[1][ce]=Z0-Vt}for(var ce=0;ce<3;ce++)ge[ce]=pe.nsPsy.last_en_subshort[Re][ce+6],o0(pe.nsPsy.last_en_subshort[Re][ce+4]>0),Ve[ce]=ge[ce]/pe.nsPsy.last_en_subshort[Re][ce+4],t0[0]+=ge[ce];for(var ce=0;ce<9;ce++){for(var et=Pe+64,U0=1;Pe<et;Pe++)U0<Math.abs(j0[Pe])&&(U0=Math.abs(j0[Pe]));pe.nsPsy.last_en_subshort[Re][ce]=ge[ce+3]=U0,t0[1+ce/3]+=U0,U0>ge[ce+3-2]?(o0(ge[ce+3-2]>0),U0=U0/ge[ce+3-2]):ge[ce+3-2]>U0*10?U0=ge[ce+3-2]/(U0*10):U0=0,Ve[ce+3]=U0}for(var ce=0;ce<3;++ce){var yt=ge[ce*3+3]+ge[ce*3+4]+ge[ce*3+5],Tt=1;ge[ce*3+5]*6<yt&&(Tt*=.5,ge[ce*3+4]*6<yt&&(Tt*=.5)),re[Re][ce]=Tt}if(y.analysis){for(var gt=Ve[0],ce=1;ce<12;ce++)gt<Ve[ce]&&(gt=Ve[ce]);pe.pinfo.ers[D][Re]=pe.pinfo.ers_save[Re],pe.pinfo.ers_save[Re]=gt}for(var ce=0;ce<12;ce++)z[Re][ce/3]==0&&Ve[ce]>d0&&(z[Re][ce/3]=ce%3+1);for(var ce=1;ce<4;ce++){var w1=t0[ce-1],y1=t0[ce],Bt=Math.max(w1,y1);Bt<4e4&&w1<1.7*y1&&y1<1.7*w1&&(ce==1&&z[Re][0]<=z[Re][ce]&&(z[Re][0]=0),z[Re][ce]=0)}z[Re][0]<=pe.nsPsy.lastAttacks[Re]&&(z[Re][0]=0),(pe.nsPsy.lastAttacks[Re]==3||z[Re][0]+z[Re][1]+z[Re][2]+z[Re][3]!=0)&&(x0=0,z[Re][1]!=0&&z[Re][0]!=0&&(z[Re][1]=0),z[Re][2]!=0&&z[Re][1]!=0&&(z[Re][2]=0),z[Re][3]!=0&&z[Re][2]!=0&&(z[Re][3]=0)),Re<2?ve[Re]=x0:x0==0&&(ve[0]=ve[1]=0),Q[Re]=pe.tot_ener[Re]}}function it(y,A,H){if(H==0)for(var D=0;D<y.npart_s;D++)y.nb_s2[A][D]=y.nb_s1[A][D],y.nb_s1[A][D]=0}function q0(y,A){for(var H=0;H<y.npart_l;H++)y.nb_2[A][H]=y.nb_1[A][H],y.nb_1[A][H]=0}function Gt(y,A,H,D){var K=b.length-1,k=0,Q=H[k]+H[k+1];if(Q>0){var re=A[k];re<A[k+1]&&(re=A[k+1]),o0(y.numlines_s[k]+y.numlines_s[k+1]-1>0),Q=20*(re*2-Q)/(Q*(y.numlines_s[k]+y.numlines_s[k+1]-1));var z=0|Q;z>K&&(z=K),D[k]=z}else D[k]=0;for(k=1;k<y.npart_s-1;k++)if(Q=H[k-1]+H[k]+H[k+1],o0(k+1<y.npart_s),Q>0){var re=A[k-1];re<A[k]&&(re=A[k]),re<A[k+1]&&(re=A[k+1]),o0(y.numlines_s[k-1]+y.numlines_s[k]+y.numlines_s[k+1]-1>0),Q=20*(re*3-Q)/(Q*(y.numlines_s[k-1]+y.numlines_s[k]+y.numlines_s[k+1]-1));var z=0|Q;z>K&&(z=K),D[k]=z}else D[k]=0;if(o0(k==y.npart_s-1),Q=H[k-1]+H[k],Q>0){var re=A[k-1];re<A[k]&&(re=A[k]),o0(y.numlines_s[k-1]+y.numlines_s[k]-1>0),Q=20*(re*2-Q)/(Q*(y.numlines_s[k-1]+y.numlines_s[k]-1));var z=0|Q;z>K&&(z=K),D[k]=z}else D[k]=0;o0(k==y.npart_s-1)}function u1(y,A,H,D,K,k){var Q=y.internal_flags,re=new float[g.CBANDS],z=L0(g.CBANDS),ve,ae,pe,De=new int[g.CBANDS];for(pe=ae=0;pe<Q.npart_s;++pe){var je=0,Re=0,Je=Q.numlines_s[pe];for(ve=0;ve<Je;++ve,++ae){var ce=A[k][ae];je+=ce,Re<ce&&(Re=ce)}H[pe]=je,re[pe]=Re,z[pe]=je/Je,o0(z[pe]>=0)}for(o0(pe==Q.npart_s);pe<g.CBANDS;++pe)re[pe]=0,z[pe]=0;for(Gt(Q,re,z,De),ae=pe=0;pe<Q.npart_s;pe++){var Ze=Q.s3ind_s[pe][0],b0=Q.s3ind_s[pe][1],Te,Ve,ge,t0,j0;for(Te=De[Ze],Ve=1,t0=Q.s3_ss[ae]*H[Ze]*b[De[Ze]],++ae,++Ze;Ze<=b0;)Te+=De[Ze],Ve+=1,ge=Q.s3_ss[ae]*H[Ze]*b[De[Ze]],t0=c(t0,ge,Ze-pe),++ae,++Ze;Te=(1+2*Te)/(2*Ve),j0=b[Te]*.5,t0*=j0,D[pe]=t0,Q.nb_s2[K][pe]=Q.nb_s1[K][pe],Q.nb_s1[K][pe]=t0,ge=re[pe],ge*=Q.minval_s[pe],ge*=j0,D[pe]>ge&&(D[pe]=ge),Q.masking_lower>1&&(D[pe]*=Q.masking_lower),D[pe]>H[pe]&&(D[pe]=H[pe]),Q.masking_lower<1&&(D[pe]*=Q.masking_lower),o0(D[pe]>=0)}for(;pe<g.CBANDS;++pe)H[pe]=0,D[pe]=0}function vt(y,A,H,D,K){var k=L0(g.CBANDS),Q=L0(g.CBANDS),re=B1(g.CBANDS+2),z;ee(y,A,H,k,Q),Z(y,k,Q,re);var ve=0;for(z=0;z<y.npart_l;z++){var ae,pe,De,je,Re=y.s3ind[z][0],Je=y.s3ind[z][1],ce=0,Ze=0;for(ce=re[Re],Ze+=1,pe=y.s3_ll[ve]*H[Re]*b[re[Re]],++ve,++Re;Re<=Je;)ce+=re[Re],Ze+=1,ae=y.s3_ll[ve]*H[Re]*b[re[Re]],je=c(pe,ae,Re-z),pe=je,++ve,++Re;if(ce=(1+2*ce)/(2*Ze),De=b[ce]*.5,pe*=De,y.blocktype_old[K&1]==g.SHORT_TYPE){var b0=oe*y.nb_1[K][z];b0>0?D[z]=Math.min(pe,b0):D[z]=Math.min(pe,H[z]*R)}else{var Te=j*y.nb_2[K][z],Ve=oe*y.nb_1[K][z],b0;Te<=0&&(Te=pe),Ve<=0&&(Ve=pe),y.blocktype_old[K&1]==g.NORM_TYPE?b0=Math.min(Ve,Te):b0=Ve,D[z]=Math.min(pe,b0)}y.nb_2[K][z]=y.nb_1[K][z],y.nb_1[K][z]=pe,ae=k[z],ae*=y.minval_l[z],ae*=De,D[z]>ae&&(D[z]=ae),y.masking_lower>1&&(D[z]*=y.masking_lower),D[z]>H[z]&&(D[z]=H[z]),y.masking_lower<1&&(D[z]*=y.masking_lower),o0(D[z]>=0)}for(;z<g.CBANDS;++z)H[z]=0,D[z]=0}function qt(y,A){var H=y.internal_flags;y.short_blocks==ye.short_block_coupled&&!(A[0]!=0&&A[1]!=0)&&(A[0]=A[1]=0);for(var D=0;D<H.channels_out;D++)y.short_blocks==ye.short_block_dispensed&&(A[D]=1),y.short_blocks==ye.short_block_forced&&(A[D]=0)}function I1(y,A,H){for(var D=y.internal_flags,K=0;K<D.channels_out;K++){var k=g.NORM_TYPE;A[K]!=0?(o0(D.blocktype_old[K]!=g.START_TYPE),D.blocktype_old[K]==g.SHORT_TYPE&&(k=g.STOP_TYPE)):(k=g.SHORT_TYPE,D.blocktype_old[K]==g.NORM_TYPE&&(D.blocktype_old[K]=g.START_TYPE),D.blocktype_old[K]==g.STOP_TYPE&&(D.blocktype_old[K]=g.SHORT_TYPE)),H[K]=D.blocktype_old[K],D.blocktype_old[K]=k}}function I0(y,A,H,D,K,k,Q){for(var re=k*2,z=k>0?Math.pow(10,K):1,ve,ae,pe=0;pe<Q;++pe){var De=y[2][pe],je=y[3][pe],Re=A[0][pe],Je=A[1][pe],ce=A[2][pe],Ze=A[3][pe];if(Re<=1.58*Je&&Je<=1.58*Re){var b0=H[pe]*je,Te=H[pe]*De;ae=Math.max(ce,Math.min(Ze,b0)),ve=Math.max(Ze,Math.min(ce,Te))}else ae=ce,ve=Ze;if(k>0){var Ve,ge,t0=D[pe]*z;if(Ve=Math.min(Math.max(Re,t0),Math.max(Je,t0)),ce=Math.max(ae,t0),Ze=Math.max(ve,t0),ge=ce+Ze,ge>0&&Ve*re<ge){var j0=Ve*re/ge;ce*=j0,Ze*=j0}ae=Math.min(ce,ae),ve=Math.min(Ze,ve)}ae>De&&(ae=De),ve>je&&(ve=je),A[2][pe]=ae,A[3][pe]=ve}}this.L3psycho_anal_vbr=function(y,A,H,D,K,k,Q,re,z,ve){var ae=y.internal_flags,pe,De,je=L0(g.HBLKSIZE),Re=lt([3,g.HBLKSIZE_s]),Je=lt([2,g.BLKSIZE]),ce=lt([2,3,g.BLKSIZE_s]),Ze=lt([4,g.CBANDS]),b0=lt([4,g.CBANDS]),Te=lt([4,3]),Ve=.6,ge=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],t0=B1(2),j0=y.mode==ct.JOINT_STEREO?4:ae.channels_out;J0(y,A,H,D,K,k,z,Te,ge,t0),qt(y,t0);{for(var Pe=0;Pe<j0;Pe++){var d0=Pe&1;pe=Je,Xe(y,A,H,Pe,D,je,pe,d0),l0(y,D,Pe,je),t0[d0]!=0?vt(ae,je,Ze[Pe],b0[Pe],Pe):q0(ae,Pe)}t0[0]+t0[1]==2&&y.mode==ct.JOINT_STEREO&&I0(Ze,b0,ae.mld_cb_l,ae.ATH.cb_l,y.ATHlower*ae.ATH.adjust,y.msfix,ae.npart_l);for(var Pe=0;Pe<j0;Pe++){var d0=Pe&1;t0[d0]!=0&&s(ae,Ze[Pe],b0[Pe],Pe)}}{for(var x0=0;x0<3;x0++){for(var Pe=0;Pe<j0;++Pe){var d0=Pe&1;t0[d0]!=0?it(ae,Pe,x0):(De=ce,c0(y,A,H,Pe,x0,Re,De,d0),u1(y,Re,Ze[Pe],b0[Pe],Pe,x0))}t0[0]+t0[1]==0&&y.mode==ct.JOINT_STEREO&&I0(Ze,b0,ae.mld_cb_s,ae.ATH.cb_s,y.ATHlower*ae.ATH.adjust,y.msfix,ae.npart_s);for(var Pe=0;Pe<j0;++Pe){var d0=Pe&1;t0[d0]==0&&U(ae,Ze[Pe],b0[Pe],Pe,x0)}}for(var Pe=0;Pe<j0;Pe++){var d0=Pe&1;if(t0[d0]==0)for(var Z0=0;Z0<g.SBMAX_s;Z0++){for(var Vt=L0(3),x0=0;x0<3;x0++){var et=ae.thm[Pe].s[Z0][x0];if(et*=P,ge[Pe][x0]>=2||ge[Pe][x0+1]==1){var U0=x0!=0?x0-1:2,yt=he(ae.thm[Pe].s[Z0][U0],et,we*Ve);et=Math.min(et,yt)}else if(ge[Pe][x0]==1){var U0=x0!=0?x0-1:2,yt=he(ae.thm[Pe].s[Z0][U0],et,R*Ve);et=Math.min(et,yt)}else if(x0!=0&&ge[Pe][x0-1]==3||x0==0&&ae.nsPsy.lastAttacks[Pe]==3){var U0=x0!=2?x0+1:0,yt=he(ae.thm[Pe].s[Z0][U0],et,R*Ve);et=Math.min(et,yt)}et*=Te[Pe][x0],Vt[x0]=et}for(var x0=0;x0<3;x0++)ae.thm[Pe].s[Z0][x0]=Vt[x0]}}}for(var Pe=0;Pe<j0;Pe++)ae.nsPsy.lastAttacks[Pe]=ge[Pe][2];I1(y,t0,ve);for(var Pe=0;Pe<j0;Pe++){var Tt,gt,w1,y1;Pe>1?(Tt=re,gt=-2,w1=g.NORM_TYPE,(ve[0]==g.SHORT_TYPE||ve[1]==g.SHORT_TYPE)&&(w1=g.SHORT_TYPE),y1=k[D][Pe-2]):(Tt=Q,gt=0,w1=ve[Pe],y1=K[D][Pe]),w1==g.SHORT_TYPE?Tt[gt+Pe]=$e(y1,ae.masking_lower):Tt[gt+Pe]=L(y1,ae.masking_lower),y.analysis&&(ae.pinfo.pe[D][Pe]=Tt[gt+Pe])}return 0};function Wt(y,A){var H=y,D;return H>=0?D=-H*27:D=H*A,D<=-72?0:Math.exp(D*r)}function an(y){var A=0,H=0;{var D=0,K,k;for(D=0;Wt(D,y)>1e-20;D-=1);for(K=D,k=0;Math.abs(k-K)>1e-12;)D=(k+K)/2,Wt(D,y)>0?k=D:K=D;A=K}{var D=0,K,k;for(D=0;Wt(D,y)>1e-20;D+=1);for(K=0,k=D;Math.abs(k-K)>1e-12;)D=(k+K)/2,Wt(D,y)>0?K=D:k=D;H=k}{var Q=0,re=1e3,z;for(z=0;z<=re;++z){var D=A+z*(H-A)/re,ve=Wt(D,y);Q+=ve}{var ae=(re+1)/(Q*(H-A));return ae}}}function f1(y){var A,H,D,K;return A=y,A>=0?A*=3:A*=1.5,A>=.5&&A<=2.5?(K=A-.5,H=8*(K*K-2*K)):H=0,A+=.474,D=15.811389+7.5*A-17.5*Math.sqrt(1+A*A),D<=-60?0:(A=Math.exp((H+D)*r),A/=.6609193,A)}function zt(y){return y<0&&(y=0),y=y*.001,13*Math.atan(.76*y)+3.5*Math.atan(y*y/(7.5*7.5))}function On(y,A,H,D,K,k,Q,re,z,ve,ae,pe){var De=L0(g.CBANDS+1),je=re/(pe>15?2*576:2*192),Re=B1(g.HBLKSIZE),Je;re/=z;var ce=0,Ze=0;for(Je=0;Je<g.CBANDS;Je++){var b0,Te;for(b0=zt(re*ce),De[Je]=re*ce,Te=ce;zt(re*Te)-b0<_e&&Te<=z/2;Te++);for(y[Je]=Te-ce,Ze=Je+1;ce<Te;)Re[ce++]=Je;if(ce>z/2){ce=z/2,++Je;break}}De[Je]=re*ce;for(var Ve=0;Ve<pe;Ve++){var ge,t0,j0,Pe,d0;j0=ve[Ve],Pe=ve[Ve+1],ge=0|Math.floor(.5+ae*(j0-.5)),ge<0&&(ge=0),t0=0|Math.floor(.5+ae*(Pe-.5)),t0>z/2&&(t0=z/2),H[Ve]=(Re[ge]+Re[t0])/2,A[Ve]=Re[t0];var x0=je*Pe;Q[Ve]=(x0-De[A[Ve]])/(De[A[Ve]+1]-De[A[Ve]]),Q[Ve]<0?Q[Ve]=0:Q[Ve]>1&&(Q[Ve]=1),d0=zt(re*ve[Ve]*ae),d0=Math.min(d0,15.5)/15.5,k[Ve]=Math.pow(10,1.25*(1-Math.cos(Math.PI*d0))-2.5)}ce=0;for(var Z0=0;Z0<Ze;Z0++){var Vt=y[Z0],b0,et;b0=zt(re*ce),et=zt(re*(ce+Vt-1)),D[Z0]=.5*(b0+et),b0=zt(re*(ce-.5)),et=zt(re*(ce+Vt-.5)),K[Z0]=et-b0,ce+=Vt}return Ze}function La(y,A,H,D,K,k){var Q=lt([g.CBANDS,g.CBANDS]),re,z=0;if(k)for(var ve=0;ve<A;ve++)for(re=0;re<A;re++){var ae=f1(H[ve]-H[re])*D[re];Q[ve][re]=ae*K[ve]}else for(re=0;re<A;re++)for(var pe=15+Math.min(21/H[re],12),De=an(pe),ve=0;ve<A;ve++){var ae=De*Wt(H[ve]-H[re],pe)*D[re];Q[ve][re]=ae*K[ve]}for(var ve=0;ve<A;ve++){for(re=0;re<A&&!(Q[ve][re]>0);re++);for(y[ve][0]=re,re=A-1;re>0&&!(Q[ve][re]>0);re--);y[ve][1]=re,z+=y[ve][1]-y[ve][0]+1}for(var je=L0(z),Re=0,ve=0;ve<A;ve++)for(re=y[ve][0];re<=y[ve][1];re++)je[Re++]=Q[ve][re];return je}function zn(y){var A=zt(y);return A=Math.min(A,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*A))-2.5)}this.psymodel_init=function(y){var A=y.internal_flags,H,D=!0,K=13,k=24,Q=0,re=0,z=-8.25,ve=-4.5,ae=L0(g.CBANDS),pe=L0(g.CBANDS),De=L0(g.CBANDS),je=y.out_samplerate;switch(y.experimentalZ){default:case 0:D=!0;break;case 1:D=!(y.VBR==Lt.vbr_mtrh||y.VBR==Lt.vbr_mt);break;case 2:D=!1;break;case 3:K=8,Q=-1.75,re=-.0125,z=-8.25,ve=-2.25;break}for(A.ms_ener_ratio_old=.25,A.blocktype_old[0]=A.blocktype_old[1]=g.NORM_TYPE,H=0;H<4;++H){for(var ce=0;ce<g.CBANDS;++ce)A.nb_1[H][ce]=1e20,A.nb_2[H][ce]=1e20,A.nb_s1[H][ce]=A.nb_s2[H][ce]=1;for(var Re=0;Re<g.SBMAX_l;Re++)A.en[H].l[Re]=1e20,A.thm[H].l[Re]=1e20;for(var ce=0;ce<3;++ce){for(var Re=0;Re<g.SBMAX_s;Re++)A.en[H].s[Re][ce]=1e20,A.thm[H].s[Re][ce]=1e20;A.nsPsy.lastAttacks[H]=0}for(var ce=0;ce<9;ce++)A.nsPsy.last_en_subshort[H][ce]=10}for(A.loudness_sq_save[0]=A.loudness_sq_save[1]=0,A.npart_l=On(A.numlines_l,A.bo_l,A.bm_l,ae,pe,A.mld_l,A.PSY.bo_l_weight,je,g.BLKSIZE,A.scalefac_band.l,g.BLKSIZE/(2*576),g.SBMAX_l),o0(A.npart_l<g.CBANDS),H=0;H<A.npart_l;H++){var Je=Q;ae[H]>=K&&(Je=re*(ae[H]-K)/(k-K)+Q*(k-ae[H])/(k-K)),De[H]=Math.pow(10,Je/10),A.numlines_l[H]>0?A.rnumlines_l[H]=1/A.numlines_l[H]:A.rnumlines_l[H]=0}A.s3_ll=La(A.s3ind,A.npart_l,ae,pe,De,D);var ce=0;for(H=0;H<A.npart_l;H++){var Ze;Ze=a0.MAX_VALUE;for(var b0=0;b0<A.numlines_l[H];b0++,ce++){var Te=je*ce/(1e3*g.BLKSIZE),Ve;Ve=this.ATHformula(Te*1e3,y)-20,Ve=Math.pow(10,.1*Ve),Ve*=A.numlines_l[H],Ze>Ve&&(Ze=Ve)}A.ATH.cb_l[H]=Ze,Ze=-20+ae[H]*20/10,Ze>6&&(Ze=100),Ze<-15&&(Ze=-15),Ze-=8,A.minval_l[H]=Math.pow(10,Ze/10)*A.numlines_l[H]}for(A.npart_s=On(A.numlines_s,A.bo_s,A.bm_s,ae,pe,A.mld_s,A.PSY.bo_s_weight,je,g.BLKSIZE_s,A.scalefac_band.s,g.BLKSIZE_s/(2*192),g.SBMAX_s),o0(A.npart_s<g.CBANDS),ce=0,H=0;H<A.npart_s;H++){var Ze,Je=z;ae[H]>=K&&(Je=ve*(ae[H]-K)/(k-K)+z*(k-ae[H])/(k-K)),De[H]=Math.pow(10,Je/10),Ze=a0.MAX_VALUE;for(var b0=0;b0<A.numlines_s[H];b0++,ce++){var Te=je*ce/(1e3*g.BLKSIZE_s),Ve;Ve=this.ATHformula(Te*1e3,y)-20,Ve=Math.pow(10,.1*Ve),Ve*=A.numlines_s[H],Ze>Ve&&(Ze=Ve)}A.ATH.cb_s[H]=Ze,Ze=-7+ae[H]*7/12,ae[H]>12&&(Ze*=1+Math.log(1+Ze)*3.1),ae[H]<12&&(Ze*=1+Math.log(1-Ze)*2.3),Ze<-15&&(Ze=-15),Ze-=8,A.minval_s[H]=Math.pow(10,Ze/10)*A.numlines_s[H]}A.s3_ss=La(A.s3ind_s,A.npart_s,ae,pe,De,D),h(),I.init_fft(A),A.decay=Math.exp(-1*J/(Oe*je/192));{var ge;ge=T,y.exp_nspsytune&2&&(ge=1),Math.abs(y.msfix)>0&&(ge=y.msfix),y.msfix=ge;for(var t0=0;t0<A.npart_l;t0++)A.s3ind[t0][1]>A.npart_l-1&&(A.s3ind[t0][1]=A.npart_l-1)}var j0=576*A.mode_gr/je;if(A.ATH.decay=Math.pow(10,-12/10*j0),A.ATH.adjust=.01,A.ATH.adjustLimit=1,o0(A.bo_l[g.SBMAX_l-1]<=A.npart_l),o0(A.bo_s[g.SBMAX_s-1]<=A.npart_s),y.ATHtype!=-1){var Te,Pe=y.out_samplerate/g.BLKSIZE,d0=0;for(Te=0,H=0;H<g.BLKSIZE/2;++H)Te+=Pe,A.ATH.eql_w[H]=1/Math.pow(10,this.ATHformula(Te,y)/10),d0+=A.ATH.eql_w[H];for(d0=1/d0,H=g.BLKSIZE/2;--H>=0;)A.ATH.eql_w[H]*=d0}{for(var t0=ce=0;t0<A.npart_s;++t0)for(H=0;H<A.numlines_s[t0];++H)++ce;for(var t0=ce=0;t0<A.npart_l;++t0)for(H=0;H<A.numlines_l[t0];++H)++ce}for(ce=0,H=0;H<A.npart_l;H++){var Te=je*(ce+A.numlines_l[H]/2)/(1*g.BLKSIZE);A.mld_cb_l[H]=zn(Te),ce+=A.numlines_l[H]}for(;H<g.CBANDS;++H)A.mld_cb_l[H]=1;for(ce=0,H=0;H<A.npart_s;H++){var Te=je*(ce+A.numlines_s[H]/2)/(1*g.BLKSIZE_s);A.mld_cb_s[H]=zn(Te),ce+=A.numlines_s[H]}for(;H<g.CBANDS;++H)A.mld_cb_s[H]=1;return 0};function Kt(y,A){y<-.3&&(y=3410),y/=1e3,y=Math.max(.1,y);var H=3.64*Math.pow(y,-.8)-6.8*Math.exp(-.6*Math.pow(y-3.4,2))+6*Math.exp(-.15*Math.pow(y-8.7,2))+(.6+.04*A)*.001*Math.pow(y,4);return H}this.ATHformula=function(y,A){var H;switch(A.ATHtype){case 0:H=Kt(y,9);break;case 1:H=Kt(y,-1);break;case 2:H=Kt(y,0);break;case 3:H=Kt(y,1)+6;break;case 4:H=Kt(y,A.ATHcurve);break;default:H=Kt(y,0);break}return H}}var An=Xn;function xt(I){var J=I;this.ordinal=function(){return J}}xt.STEREO=new xt(0),xt.JOINT_STEREO=new xt(1),xt.DUAL_CHANNEL=new xt(2),xt.MONO=new xt(3),xt.NOT_SET=new xt(4);var Ot=xt;function z1(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ot.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var un=z1,Zn={};Zn.SFBMAX=g.SBMAX_s*3;var Ft=Zn,fr=le.new_float,Dt=le.new_int;function $1(){this.xr=fr(576),this.l3_enc=Dt(576),this.scalefac=Dt(Ft.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Dt(3),this.subblock_gain=Dt(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Dt(Ft.SFBMAX),this.window=Dt(Ft.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Dt(4),this.max_nonzero_coeff=0;var I=this;function J(j){return new Int32Array(j)}function oe(j){return new Float32Array(j)}this.assign=function(j){I.xr=oe(j.xr),I.l3_enc=J(j.l3_enc),I.scalefac=J(j.scalefac),I.xrpow_max=j.xrpow_max,I.part2_3_length=j.part2_3_length,I.big_values=j.big_values,I.count1=j.count1,I.global_gain=j.global_gain,I.scalefac_compress=j.scalefac_compress,I.block_type=j.block_type,I.mixed_block_flag=j.mixed_block_flag,I.table_select=J(j.table_select),I.subblock_gain=J(j.subblock_gain),I.region0_count=j.region0_count,I.region1_count=j.region1_count,I.preflag=j.preflag,I.scalefac_scale=j.scalefac_scale,I.count1table_select=j.count1table_select,I.part2_length=j.part2_length,I.sfb_lmax=j.sfb_lmax,I.sfb_smin=j.sfb_smin,I.psy_lmax=j.psy_lmax,I.sfbmax=j.sfbmax,I.psymax=j.psymax,I.sfbdivide=j.sfbdivide,I.width=J(j.width),I.window=J(j.window),I.count1bits=j.count1bits,I.sfb_partition_table=j.sfb_partition_table.slice(0),I.slen=J(j.slen),I.max_nonzero_coeff=j.max_nonzero_coeff}}var F1=$1,fn=le.new_int;function Mn(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[fn(4),fn(4)];for(var I=0;I<2;I++)for(var J=0;J<2;J++)this.tt[I][J]=new F1}var Rn=Mn,D1=le.System,P1=le.new_int;function En(I,J,oe,j){this.l=P1(1+g.SBMAX_l),this.s=P1(1+g.SBMAX_s),this.psfb21=P1(1+g.PSFB21),this.psfb12=P1(1+g.PSFB12);var Se=this.l,ne=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],D1.arraycopy(this.arrL,0,Se,0,Math.min(this.arrL.length,this.l.length)),D1.arraycopy(this.arrS,0,ne,0,Math.min(this.arrS.length,this.s.length)),D1.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),D1.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var y0=En,Nt=le.new_float,sa=le.new_float_n,li=le.new_int;function oi(){this.last_en_subshort=sa([4,9]),this.lastAttacks=li(4),this.pefirbuf=Nt(19),this.longfact=Nt(g.SBMAX_l),this.shortfact=Nt(g.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var la=oi;function oa(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var ui=oa,fi=le.new_byte,ci=le.new_double,i1=le.new_float,K1=le.new_float_n,p1=le.new_int,cr=le.new_int_n;q1.MFSIZE=3*1152+g.ENCDELAY-g.MDCTDELAY,q1.MAX_HEADER_BUF=256,q1.MAX_BITS_PER_CHANNEL=4095,q1.MAX_BITS_PER_GRANULE=7680,q1.BPC=320;function q1(){var I=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=K1([2,q1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Rn,this.ms_ratio=i1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=p1(2),this.CurrentStep=p1(2),this.masking_lower=0,this.bv_scf=p1(576),this.pseudohalf=p1(Ft.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*q1.BPC+1),this.itime=ci(2),this.sideinfo_len=0,this.sb_sample=K1([2,2,18,g.SBLIMIT]),this.amp_filter=i1(32);function J(){this.write_timing=0,this.ptr=0,this.buf=fi(I)}this.header=new Array(q1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new y0,this.minval_l=i1(g.CBANDS),this.minval_s=i1(g.CBANDS),this.nb_1=K1([4,g.CBANDS]),this.nb_2=K1([4,g.CBANDS]),this.nb_s1=K1([4,g.CBANDS]),this.nb_s2=K1([4,g.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=i1(4),this.loudness_sq=K1([2,2]),this.loudness_sq_save=i1(2),this.mld_l=i1(g.SBMAX_l),this.mld_s=i1(g.SBMAX_s),this.bm_l=p1(g.SBMAX_l),this.bo_l=p1(g.SBMAX_l),this.bm_s=p1(g.SBMAX_s),this.bo_s=p1(g.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=cr([g.CBANDS,2]),this.s3ind_s=cr([g.CBANDS,2]),this.numlines_s=p1(g.CBANDS),this.numlines_l=p1(g.CBANDS),this.rnumlines_l=i1(g.CBANDS),this.mld_cb_l=i1(g.CBANDS),this.mld_cb_s=i1(g.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=i1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=p1(2),this.nsPsy=new la,this.VBR_seek_table=new ui,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=cr([16,4+1]),this.bitrate_blockType_Hist=cr([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var oe=0;oe<this.en.length;oe++)this.en[oe]=new Et;for(var oe=0;oe<this.thm.length;oe++)this.thm[oe]=new Et;for(var oe=0;oe<this.header.length;oe++)this.header[oe]=new J}var W0=q1,cn=le.new_float;function kr(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=cn(g.SBMAX_l),this.s=cn(g.SBMAX_s),this.psfb21=cn(g.PSFB21),this.psfb12=cn(g.PSFB12),this.cb_l=cn(g.CBANDS),this.cb_s=cn(g.CBANDS),this.eql_w=cn(g.BLKSIZE/2)}var _i=kr,Pt=le.System,ua=le.Arrays;at.STEPS_per_dB=100,at.MAX_dB=120,at.GAIN_NOT_ENOUGH_SAMPLES=-24601,at.GAIN_ANALYSIS_ERROR=0,at.GAIN_ANALYSIS_OK=1,at.INIT_GAIN_ANALYSIS_ERROR=0,at.INIT_GAIN_ANALYSIS_OK=1,at.YULE_ORDER=10,at.MAX_ORDER=at.YULE_ORDER,at.MAX_SAMP_FREQ=48e3,at.RMS_WINDOW_TIME_NUMERATOR=1,at.RMS_WINDOW_TIME_DENOMINATOR=20,at.MAX_SAMPLES_PER_WINDOW=at.MAX_SAMP_FREQ*at.RMS_WINDOW_TIME_NUMERATOR/at.RMS_WINDOW_TIME_DENOMINATOR+1;function at(){var I=64.82,J=.95,oe=at.RMS_WINDOW_TIME_NUMERATOR,j=at.RMS_WINDOW_TIME_DENOMINATOR,Se=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],ne=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function _e(R,T,N,r,G,q){for(;G--!=0;)N[r]=1e-10+R[T+0]*q[0]-N[r-1]*q[1]+R[T-1]*q[2]-N[r-2]*q[3]+R[T-2]*q[4]-N[r-3]*q[5]+R[T-3]*q[6]-N[r-4]*q[7]+R[T-4]*q[8]-N[r-5]*q[9]+R[T-5]*q[10]-N[r-6]*q[11]+R[T-6]*q[12]-N[r-7]*q[13]+R[T-7]*q[14]-N[r-8]*q[15]+R[T-8]*q[16]-N[r-9]*q[17]+R[T-9]*q[18]-N[r-10]*q[19]+R[T-10]*q[20],++r,++T}function Ce(R,T,N,r,G,q){for(;G--!=0;)N[r]=R[T+0]*q[0]-N[r-1]*q[1]+R[T-1]*q[2]-N[r-2]*q[3]+R[T-2]*q[4],++r,++T}function Oe(R,T){for(var N=0;N<MAX_ORDER;N++)R.linprebuf[N]=R.lstepbuf[N]=R.loutbuf[N]=R.rinprebuf[N]=R.rstepbuf[N]=R.routbuf[N]=0;switch(0|T){case 48e3:R.reqindex=0;break;case 44100:R.reqindex=1;break;case 32e3:R.reqindex=2;break;case 24e3:R.reqindex=3;break;case 22050:R.reqindex=4;break;case 16e3:R.reqindex=5;break;case 12e3:R.reqindex=6;break;case 11025:R.reqindex=7;break;case 8e3:R.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return R.sampleWindow=0|(T*oe+j-1)/j,R.lsum=0,R.rsum=0,R.totsamp=0,ua.ill(R.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(R,T){return Oe(R,T)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(R.linpre=MAX_ORDER,R.rinpre=MAX_ORDER,R.lstep=MAX_ORDER,R.rstep=MAX_ORDER,R.lout=MAX_ORDER,R.rout=MAX_ORDER,ua.fill(R.B,0),INIT_GAIN_ANALYSIS_OK)};function P(R){return R*R}this.AnalyzeSamples=function(R,T,N,r,G,q,V){var o,w,E,B,O,i,b;if(q==0)return GAIN_ANALYSIS_OK;switch(b=0,O=q,V){case 1:r=T,G=N;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(q<MAX_ORDER?(Pt.arraycopy(T,N,R.linprebuf,MAX_ORDER,q),Pt.arraycopy(r,G,R.rinprebuf,MAX_ORDER,q)):(Pt.arraycopy(T,N,R.linprebuf,MAX_ORDER,MAX_ORDER),Pt.arraycopy(r,G,R.rinprebuf,MAX_ORDER,MAX_ORDER));O>0;){i=O>R.sampleWindow-R.totsamp?R.sampleWindow-R.totsamp:O,b<MAX_ORDER?(o=R.linpre+b,w=R.linprebuf,E=R.rinpre+b,B=R.rinprebuf,i>MAX_ORDER-b&&(i=MAX_ORDER-b)):(o=N+b,w=T,E=G+b,B=r),_e(w,o,R.lstepbuf,R.lstep+R.totsamp,i,Se[R.reqindex]),_e(B,E,R.rstepbuf,R.rstep+R.totsamp,i,Se[R.reqindex]),Ce(R.lstepbuf,R.lstep+R.totsamp,R.loutbuf,R.lout+R.totsamp,i,ne[R.reqindex]),Ce(R.rstepbuf,R.rstep+R.totsamp,R.routbuf,R.rout+R.totsamp,i,ne[R.reqindex]),o=R.lout+R.totsamp,w=R.loutbuf,E=R.rout+R.totsamp,B=R.routbuf;for(var h=i%8;h--!=0;)R.lsum+=P(w[o++]),R.rsum+=P(B[E++]);for(h=i/8;h--!=0;)R.lsum+=P(w[o+0])+P(w[o+1])+P(w[o+2])+P(w[o+3])+P(w[o+4])+P(w[o+5])+P(w[o+6])+P(w[o+7]),o+=8,R.rsum+=P(B[E+0])+P(B[E+1])+P(B[E+2])+P(B[E+3])+P(B[E+4])+P(B[E+5])+P(B[E+6])+P(B[E+7]),E+=8;if(O-=i,b+=i,R.totsamp+=i,R.totsamp==R.sampleWindow){var u=at.STEPS_per_dB*10*Math.log10((R.lsum+R.rsum)/R.totsamp*.5+1e-37),d=u<=0?0:0|u;d>=R.A.length&&(d=R.A.length-1),R.A[d]++,R.lsum=R.rsum=0,Pt.arraycopy(R.loutbuf,R.totsamp,R.loutbuf,0,MAX_ORDER),Pt.arraycopy(R.routbuf,R.totsamp,R.routbuf,0,MAX_ORDER),Pt.arraycopy(R.lstepbuf,R.totsamp,R.lstepbuf,0,MAX_ORDER),Pt.arraycopy(R.rstepbuf,R.totsamp,R.rstepbuf,0,MAX_ORDER),R.totsamp=0}if(R.totsamp>R.sampleWindow)return GAIN_ANALYSIS_ERROR}return q<MAX_ORDER?(Pt.arraycopy(R.linprebuf,q,R.linprebuf,0,MAX_ORDER-q),Pt.arraycopy(R.rinprebuf,q,R.rinprebuf,0,MAX_ORDER-q),Pt.arraycopy(T,N,R.linprebuf,MAX_ORDER-q,q),Pt.arraycopy(r,G,R.rinprebuf,MAX_ORDER-q,q)):(Pt.arraycopy(T,N+q-MAX_ORDER,R.linprebuf,0,MAX_ORDER),Pt.arraycopy(r,G+q-MAX_ORDER,R.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function we(R,T){var N,r=0;for(N=0;N<T;N++)r+=R[N];if(r==0)return GAIN_NOT_ENOUGH_SAMPLES;var G=0|Math.ceil(r*(1-J));for(N=T;N-- >0&&!((G-=R[N])<=0););return I-N/at.STEPS_per_dB}this.GetTitleGain=function(R){for(var T=we(R.A,R.A.length),N=0;N<R.A.length;N++)R.B[N]+=R.A[N],R.A[N]=0;for(var N=0;N<MAX_ORDER;N++)R.linprebuf[N]=R.lstepbuf[N]=R.loutbuf[N]=R.rinprebuf[N]=R.rstepbuf[N]=R.routbuf[N]=0;return R.totsamp=0,R.lsum=R.rsum=0,T}}var Ht=at,Tn=le.new_float,fa=le.new_int;function vi(){this.linprebuf=Tn(Ht.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Tn(Ht.MAX_SAMPLES_PER_WINDOW+Ht.MAX_ORDER),this.lstep=0,this.loutbuf=Tn(Ht.MAX_SAMPLES_PER_WINDOW+Ht.MAX_ORDER),this.lout=0,this.rinprebuf=Tn(Ht.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Tn(Ht.MAX_SAMPLES_PER_WINDOW+Ht.MAX_ORDER),this.rstep=0,this.routbuf=Tn(Ht.MAX_SAMPLES_PER_WINDOW+Ht.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=fa(0|Ht.STEPS_per_dB*Ht.MAX_dB),this.B=fa(0|Ht.STEPS_per_dB*Ht.MAX_dB)}var ca=vi;function hi(I){this.bits=I}var _a=hi,va=le.new_float,di=le.new_int,ha=le.assert;function mi(I){var J=I;this.quantize=J,this.iteration_loop=function(oe,j,Se,ne){var _e=oe.internal_flags,Ce=va(Ft.SFBMAX),Oe=va(576),P=di(2),we=0,R,T=_e.l3_side,N=new _a(we);this.quantize.rv.ResvFrameBegin(oe,N),we=N.bits;for(var r=0;r<_e.mode_gr;r++){R=this.quantize.qupvt.on_pe(oe,j,P,we,r,r),_e.mode_ext==g.MPG_MD_MS_LR&&(this.quantize.ms_convert(_e.l3_side,r),this.quantize.qupvt.reduce_side(P,Se[r],we,R));for(var G=0;G<_e.channels_out;G++){var q,V,o=T.tt[r][G];o.block_type!=g.SHORT_TYPE?(q=0,V=_e.PSY.mask_adjust-q):(q=0,V=_e.PSY.mask_adjust_short-q),_e.masking_lower=Math.pow(10,V*.1),this.quantize.init_outer_loop(_e,o),this.quantize.init_xrpow(_e,o,Oe)&&(this.quantize.qupvt.calc_xmin(oe,ne[r][G],o,Ce),this.quantize.outer_loop(oe,o,Ce,Oe,G,P[G])),this.quantize.iteration_finish_one(_e,r,G),ha(o.part2_3_length<=W0.MAX_BITS_PER_CHANNEL),ha(o.part2_3_length<=P[G])}}this.quantize.rv.ResvFrameEnd(_e,we)}}var _r=mi;function N0(I,J,oe,j){this.xlen=I,this.linmax=J,this.table=oe,this.hlen=j}var Ee={};Ee.t1HB=[1,1,1,0],Ee.t2HB=[1,2,1,3,1,1,3,2,0],Ee.t3HB=[3,2,1,1,1,1,3,2,0],Ee.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],Ee.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],Ee.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],Ee.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],Ee.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],Ee.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],Ee.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],Ee.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],Ee.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],Ee.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],Ee.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],Ee.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],Ee.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],Ee.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],Ee.t1l=[1,4,3,5],Ee.t2l=[1,4,7,4,5,7,6,7,8],Ee.t3l=[2,3,7,4,4,7,6,7,8],Ee.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],Ee.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],Ee.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],Ee.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],Ee.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],Ee.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],Ee.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],Ee.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],Ee.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],Ee.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],Ee.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],Ee.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],Ee.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],Ee.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],Ee.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],Ee.ht=[new N0(0,0,null,null),new N0(2,0,Ee.t1HB,Ee.t1l),new N0(3,0,Ee.t2HB,Ee.t2l),new N0(3,0,Ee.t3HB,Ee.t3l),new N0(0,0,null,null),new N0(4,0,Ee.t5HB,Ee.t5l),new N0(4,0,Ee.t6HB,Ee.t6l),new N0(6,0,Ee.t7HB,Ee.t7l),new N0(6,0,Ee.t8HB,Ee.t8l),new N0(6,0,Ee.t9HB,Ee.t9l),new N0(8,0,Ee.t10HB,Ee.t10l),new N0(8,0,Ee.t11HB,Ee.t11l),new N0(8,0,Ee.t12HB,Ee.t12l),new N0(16,0,Ee.t13HB,Ee.t13l),new N0(0,0,null,Ee.t16_5l),new N0(16,0,Ee.t15HB,Ee.t15l),new N0(1,1,Ee.t16HB,Ee.t16l),new N0(2,3,Ee.t16HB,Ee.t16l),new N0(3,7,Ee.t16HB,Ee.t16l),new N0(4,15,Ee.t16HB,Ee.t16l),new N0(6,63,Ee.t16HB,Ee.t16l),new N0(8,255,Ee.t16HB,Ee.t16l),new N0(10,1023,Ee.t16HB,Ee.t16l),new N0(13,8191,Ee.t16HB,Ee.t16l),new N0(4,15,Ee.t24HB,Ee.t24l),new N0(5,31,Ee.t24HB,Ee.t24l),new N0(6,63,Ee.t24HB,Ee.t24l),new N0(7,127,Ee.t24HB,Ee.t24l),new N0(8,255,Ee.t24HB,Ee.t24l),new N0(9,511,Ee.t24HB,Ee.t24l),new N0(11,2047,Ee.t24HB,Ee.t24l),new N0(13,8191,Ee.t24HB,Ee.t24l),new N0(0,0,Ee.t32HB,Ee.t32l),new N0(0,0,Ee.t33HB,Ee.t33l)],Ee.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],Ee.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],Ee.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],Ee.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],Ee.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],Ee.scfsi_band=[0,6,11,16,21];var k0=Ee,_n=le.VbrMode,vr=le.Float,hr=le.Util,Q1=le.new_float,da=le.new_int,Un=le.assert;X1.Q_MAX=256+1,X1.Q_MAX2=116,X1.LARGE_BITS=1e5,X1.IXMAX_VAL=8206;function X1(){var I=null,J=null,oe=null;this.setModules=function(o,w,E){I=o,J=w,oe=E};function j(o){return R[o+X1.Q_MAX2]}this.IPOW20=function(o){return T[o]};var Se=2220446049250313e-31,ne=X1.IXMAX_VAL,_e=ne+2,Ce=X1.Q_MAX,Oe=X1.Q_MAX2,P=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var we=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=we,this.sfBandIndex=[new y0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y0([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var R=Q1(Ce+Oe+1),T=Q1(Ce),N=Q1(_e),r=Q1(_e);this.adj43=r;function G(o,w){var E=oe.ATHformula(w,o);return E-=P,E=Math.pow(10,E/10+o.ATHlower),E}function q(o){for(var w=o.internal_flags.ATH.l,E=o.internal_flags.ATH.psfb21,B=o.internal_flags.ATH.s,O=o.internal_flags.ATH.psfb12,i=o.internal_flags,b=o.out_samplerate,h=0;h<g.SBMAX_l;h++){var u=i.scalefac_band.l[h],d=i.scalefac_band.l[h+1];w[h]=vr.MAX_VALUE;for(var p=u;p<d;p++){var l=p*b/1152,f=G(o,l);w[h]=Math.min(w[h],f)}}for(var h=0;h<g.PSFB21;h++){var u=i.scalefac_band.psfb21[h],d=i.scalefac_band.psfb21[h+1];E[h]=vr.MAX_VALUE;for(var p=u;p<d;p++){var l=p*b/1152,f=G(o,l);E[h]=Math.min(E[h],f)}}for(var h=0;h<g.SBMAX_s;h++){var u=i.scalefac_band.s[h],d=i.scalefac_band.s[h+1];B[h]=vr.MAX_VALUE;for(var p=u;p<d;p++){var l=p*b/384,f=G(o,l);B[h]=Math.min(B[h],f)}B[h]*=i.scalefac_band.s[h+1]-i.scalefac_band.s[h]}for(var h=0;h<g.PSFB12;h++){var u=i.scalefac_band.psfb12[h],d=i.scalefac_band.psfb12[h+1];O[h]=vr.MAX_VALUE;for(var p=u;p<d;p++){var l=p*b/384,f=G(o,l);O[h]=Math.min(O[h],f)}O[h]*=i.scalefac_band.s[13]-i.scalefac_band.s[12]}if(o.noATH){for(var h=0;h<g.SBMAX_l;h++)w[h]=1e-20;for(var h=0;h<g.PSFB21;h++)E[h]=1e-20;for(var h=0;h<g.SBMAX_s;h++)B[h]=1e-20;for(var h=0;h<g.PSFB12;h++)O[h]=1e-20}i.ATH.floor=10*Math.log10(G(o,-1))}this.iteration_init=function(o){var w=o.internal_flags,E=w.l3_side,B;if(w.iteration_init_init==0){for(w.iteration_init_init=1,E.main_data_begin=0,q(o),N[0]=0,B=1;B<_e;B++)N[B]=Math.pow(B,4/3);for(B=0;B<_e-1;B++)r[B]=B+1-Math.pow(.5*(N[B]+N[B+1]),.75);for(r[B]=.5,B=0;B<Ce;B++)T[B]=Math.pow(2,(B-210)*-.1875);for(B=0;B<=Ce+Oe;B++)R[B]=Math.pow(2,(B-210-Oe)*.25);I.huffman_init(w);{var O,i,b,h;for(B=o.exp_nspsytune>>2&63,B>=32&&(B-=64),O=Math.pow(10,B/4/10),B=o.exp_nspsytune>>8&63,B>=32&&(B-=64),i=Math.pow(10,B/4/10),B=o.exp_nspsytune>>14&63,B>=32&&(B-=64),b=Math.pow(10,B/4/10),B=o.exp_nspsytune>>20&63,B>=32&&(B-=64),h=b*Math.pow(10,B/4/10),B=0;B<g.SBMAX_l;B++){var u;B<=6?u=O:B<=13?u=i:B<=20?u=b:u=h,w.nsPsy.longfact[B]=u}for(B=0;B<g.SBMAX_s;B++){var u;B<=5?u=O:B<=10?u=i:B<=11?u=b:u=h,w.nsPsy.shortfact[B]=u}}}},this.on_pe=function(o,w,E,B,O,i){var b=o.internal_flags,h=0,u,d=da(2),p,l=new _a(h),f=J.ResvMaxBits(o,B,l,i);h=l.bits;var c=h+f;for(c>W0.MAX_BITS_PER_GRANULE&&(c=W0.MAX_BITS_PER_GRANULE),u=0,p=0;p<b.channels_out;++p)E[p]=Math.min(W0.MAX_BITS_PER_CHANNEL,h/b.channels_out),d[p]=0|E[p]*w[O][p]/700-E[p],d[p]>B*3/4&&(d[p]=B*3/4),d[p]<0&&(d[p]=0),d[p]+E[p]>W0.MAX_BITS_PER_CHANNEL&&(d[p]=Math.max(0,W0.MAX_BITS_PER_CHANNEL-E[p])),u+=d[p];if(u>f)for(p=0;p<b.channels_out;++p)d[p]=f*d[p]/u;for(p=0;p<b.channels_out;++p)E[p]+=d[p],f-=d[p];for(u=0,p=0;p<b.channels_out;++p)u+=E[p];if(u>W0.MAX_BITS_PER_GRANULE){var C=0;for(p=0;p<b.channels_out;++p)E[p]*=W0.MAX_BITS_PER_GRANULE,E[p]/=u,C+=E[p]}return c},this.reduce_side=function(o,w,E,B){Un(o[0]+o[1]<=W0.MAX_BITS_PER_GRANULE);var O=.33*(.5-w)/.5;O<0&&(O=0),O>.5&&(O=.5);var i=0|O*.5*(o[0]+o[1]);i>W0.MAX_BITS_PER_CHANNEL-o[0]&&(i=W0.MAX_BITS_PER_CHANNEL-o[0]),i<0&&(i=0),o[1]>=125&&(o[1]-i>125?(o[0]<E&&(o[0]+=i),o[1]-=i):(o[0]+=o[1]-125,o[1]=125)),i=o[0]+o[1],i>B&&(o[0]=B*o[0]/i,o[1]=B*o[1]/i),Un(o[0]<=W0.MAX_BITS_PER_CHANNEL),Un(o[1]<=W0.MAX_BITS_PER_CHANNEL),Un(o[0]+o[1]<=W0.MAX_BITS_PER_GRANULE)},this.athAdjust=function(o,w,E){var B=90.30873362,O=94.82444863,i=hr.FAST_LOG10_X(w,10),b=o*o,h=0;return i-=E,b>1e-20&&(h=1+hr.FAST_LOG10_X(b,10/B)),h<0&&(h=0),i*=h,i+=E+B-O,Math.pow(10,.1*i)},this.calc_xmin=function(o,w,E,B){var O=0,i=o.internal_flags,b,h=0,u=0,d=i.ATH,p=E.xr,l=o.VBR==_n.vbr_mtrh?1:0,f=i.masking_lower;for((o.VBR==_n.vbr_mtrh||o.VBR==_n.vbr_mt)&&(f=1),b=0;b<E.psy_lmax;b++){var c,C,ie,F,U,s;o.VBR==_n.vbr_rh||o.VBR==_n.vbr_mtrh?C=athAdjust(d.adjust,d.l[b],d.floor):C=d.adjust*d.l[b],U=E.width[b],ie=C/U,F=Se,s=U>>1,c=0;do{var _,ue;_=p[h]*p[h],c+=_,F+=_<ie?_:ie,h++,ue=p[h]*p[h],c+=ue,F+=ue<ie?ue:ie,h++}while(--s>0);if(c>C&&u++,b==g.SBPSY_l){var he=C*i.nsPsy.longfact[b];F<he&&(F=he)}if(l!=0&&(C=F),!o.ATHonly){var Le=w.en.l[b];if(Le>0){var he;he=c*w.thm.l[b]*f/Le,l!=0&&(he*=i.nsPsy.longfact[b]),C<he&&(C=he)}}l!=0?B[O++]=C:B[O++]=C*i.nsPsy.longfact[b]}var $e=575;if(E.block_type!=g.SHORT_TYPE)for(var ke=576;ke--!=0&&k1.EQ(p[ke],0);)$e=ke;E.max_nonzero_coeff=$e;for(var L=E.sfb_smin;b<E.psymax;L++,b+=3){var U,ee,Z;for(o.VBR==_n.vbr_rh||o.VBR==_n.vbr_mtrh?Z=athAdjust(d.adjust,d.s[L],d.floor):Z=d.adjust*d.s[L],U=E.width[b],ee=0;ee<3;ee++){var c=0,C,ie,F,s=U>>1;ie=Z/U,F=Se;do{var _,ue;_=p[h]*p[h],c+=_,F+=_<ie?_:ie,h++,ue=p[h]*p[h],c+=ue,F+=ue<ie?ue:ie,h++}while(--s>0);if(c>Z&&u++,L==g.SBPSY_s){var he=Z*i.nsPsy.shortfact[L];F<he&&(F=he)}if(l!=0?C=F:C=Z,!o.ATHonly&&!o.ATHshort){var Le=w.en.s[L][ee];if(Le>0){var he;he=c*w.thm.s[L][ee]*f/Le,l!=0&&(he*=i.nsPsy.shortfact[L]),C<he&&(C=he)}}l!=0?B[O++]=C:B[O++]=C*i.nsPsy.shortfact[L]}o.useTemporal&&(B[O-3]>B[O-3+1]&&(B[O-3+1]+=(B[O-3]-B[O-3+1])*i.decay),B[O-3+1]>B[O-3+2]&&(B[O-3+2]+=(B[O-3+1]-B[O-3+2])*i.decay))}return u};function V(o){this.s=o}this.calc_noise_core=function(o,w,E,B){var O=0,i=w.s,b=o.l3_enc;if(i>o.count1)for(;E--!=0;){var h;h=o.xr[i],i++,O+=h*h,h=o.xr[i],i++,O+=h*h}else if(i>o.big_values){var u=Q1(2);for(u[0]=0,u[1]=B;E--!=0;){var h;h=Math.abs(o.xr[i])-u[b[i]],i++,O+=h*h,h=Math.abs(o.xr[i])-u[b[i]],i++,O+=h*h}}else for(;E--!=0;){var h;h=Math.abs(o.xr[i])-N[b[i]]*B,i++,O+=h*h,h=Math.abs(o.xr[i])-N[b[i]]*B,i++,O+=h*h}return w.s=i,O},this.calc_noise=function(o,w,E,B,O){var i=0,b=0,h,u,d=0,p=0,l=0,f=-20,c=0,C=o.scalefac,ie=0;for(B.over_SSD=0,h=0;h<o.psymax;h++){var F=o.global_gain-(C[ie++]+(o.preflag!=0?we[h]:0)<<o.scalefac_scale+1)-o.subblock_gain[o.window[h]]*8,U=0;if(O!=null&&O.step[h]==F)U=O.noise[h],c+=o.width[h],E[i++]=U/w[b++],U=O.noise_log[h];else{var s=j(F);if(u=o.width[h]>>1,c+o.width[h]>o.max_nonzero_coeff){var _;_=o.max_nonzero_coeff-c+1,_>0?u=_>>1:u=0}var ue=new V(c);U=this.calc_noise_core(o,ue,u,s),c=ue.s,O!=null&&(O.step[h]=F,O.noise[h]=U),U=E[i++]=U/w[b++],U=hr.FAST_LOG10(Math.max(U,1e-20)),O!=null&&(O.noise_log[h]=U)}if(O!=null&&(O.global_gain=o.global_gain),l+=U,U>0){var he;he=Math.max(0|U*10+.5,1),B.over_SSD+=he*he,d++,p+=U}f=Math.max(f,U)}return B.over_count=d,B.tot_noise=l,B.over_noise=p,B.max_noise=f,d},this.set_pinfo=function(o,w,E,B,O){var i=o.internal_flags,b,h,u,d,p,l=w.scalefac_scale==0?.5:1,f=w.scalefac,c=Q1(L3Side.SFBMAX),C=Q1(L3Side.SFBMAX),ie=new CalcNoiseResult;calc_xmin(o,E,w,c),calc_noise(w,c,C,ie,null);var F=0;for(h=w.sfb_lmax,w.block_type!=g.SHORT_TYPE&&w.mixed_block_flag==0&&(h=22),b=0;b<h;b++){var U=i.scalefac_band.l[b],s=i.scalefac_band.l[b+1],_=s-U;for(d=0;F<s;F++)d+=w.xr[F]*w.xr[F];d/=_,p=1e15,i.pinfo.en[B][O][b]=p*d,i.pinfo.xfsf[B][O][b]=p*c[b]*C[b]/_,E.en.l[b]>0&&!o.ATHonly?d=d/E.en.l[b]:d=0,i.pinfo.thr[B][O][b]=p*Math.max(d*E.thm.l[b],i.ATH.l[b]),i.pinfo.LAMEsfb[B][O][b]=0,w.preflag!=0&&b>=11&&(i.pinfo.LAMEsfb[B][O][b]=-l*we[b]),b<g.SBPSY_l&&(Un(f[b]>=0),i.pinfo.LAMEsfb[B][O][b]-=l*f[b])}if(w.block_type==g.SHORT_TYPE)for(h=b,b=w.sfb_smin;b<g.SBMAX_s;b++)for(var U=i.scalefac_band.s[b],s=i.scalefac_band.s[b+1],_=s-U,ue=0;ue<3;ue++){for(d=0,u=U;u<s;u++)d+=w.xr[F]*w.xr[F],F++;d=Math.max(d/_,1e-20),p=1e15,i.pinfo.en_s[B][O][3*b+ue]=p*d,i.pinfo.xfsf_s[B][O][3*b+ue]=p*c[h]*C[h]/_,E.en.s[b][ue]>0?d=d/E.en.s[b][ue]:d=0,(o.ATHonly||o.ATHshort)&&(d=0),i.pinfo.thr_s[B][O][3*b+ue]=p*Math.max(d*E.thm.s[b][ue],i.ATH.s[b]),i.pinfo.LAMEsfb_s[B][O][3*b+ue]=-2*w.subblock_gain[ue],b<g.SBPSY_s&&(i.pinfo.LAMEsfb_s[B][O][3*b+ue]-=l*f[h]),h++}i.pinfo.LAMEqss[B][O]=w.global_gain,i.pinfo.LAMEmainbits[B][O]=w.part2_3_length+w.part2_length,i.pinfo.LAMEsfbits[B][O]=w.part2_length,i.pinfo.over[B][O]=ie.over_count,i.pinfo.max_noise[B][O]=ie.max_noise*10,i.pinfo.over_noise[B][O]=ie.over_noise*10,i.pinfo.tot_noise[B][O]=ie.tot_noise*10,i.pinfo.over_SSD[B][O]=ie.over_SSD}}var J1=X1,pi=le.System,ma=le.Arrays,Bn=le.new_int,dr=le.assert;function Yn(){var I=null;this.qupvt=null,this.setModules=function(u){this.qupvt=u,I=u};function J(u){this.bits=0|u}var oe=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function j(u,d,p,l,f,c){var C=.5946/d;for(u=u>>1;u--!=0;)f[c++]=C>p[l++]?0:1,f[c++]=C>p[l++]?0:1}function Se(u,d,p,l,f,c){u=u>>1;var C=u%2;for(u=u>>1;u--!=0;){var ie,F,U,s,_,ue,he,Le;ie=p[l++]*d,F=p[l++]*d,_=0|ie,U=p[l++]*d,ue=0|F,s=p[l++]*d,he=0|U,ie+=I.adj43[_],Le=0|s,F+=I.adj43[ue],f[c++]=0|ie,U+=I.adj43[he],f[c++]=0|F,s+=I.adj43[Le],f[c++]=0|U,f[c++]=0|s}if(C!=0){var ie,F,_,ue;ie=p[l++]*d,F=p[l++]*d,_=0|ie,ue=0|F,ie+=I.adj43[_],F+=I.adj43[ue],f[c++]=0|ie,f[c++]=0|F}}function ne(u,d,p,l,f){var c,C,ie=0,F,U=0,s=0,_=0,ue=d,he=0,Le=ue,$e=0,ke=u,L=0;for(F=f!=null&&l.global_gain==f.global_gain,l.block_type==g.SHORT_TYPE?C=38:C=21,c=0;c<=C;c++){var ee=-1;if((F||l.block_type==g.NORM_TYPE)&&(ee=l.global_gain-(l.scalefac[c]+(l.preflag!=0?I.pretab[c]:0)<<l.scalefac_scale+1)-l.subblock_gain[l.window[c]]*8),dr(l.width[c]>=0),F&&f.step[c]==ee)U!=0&&(Se(U,p,ke,L,Le,$e),U=0),s!=0&&(j(s,p,ke,L,Le,$e),s=0);else{var Z=l.width[c];if(ie+l.width[c]>l.max_nonzero_coeff){var se;se=l.max_nonzero_coeff-ie+1,ma.fill(d,l.max_nonzero_coeff,576,0),Z=se,Z<0&&(Z=0),c=C+1}if(U==0&&s==0&&(Le=ue,$e=he,ke=u,L=_),f!=null&&f.sfb_count1>0&&c>=f.sfb_count1&&f.step[c]>0&&ee>=f.step[c]?(U!=0&&(Se(U,p,ke,L,Le,$e),U=0,Le=ue,$e=he,ke=u,L=_),s+=Z):(s!=0&&(j(s,p,ke,L,Le,$e),s=0,Le=ue,$e=he,ke=u,L=_),U+=Z),Z<=0){s!=0&&(j(s,p,ke,L,Le,$e),s=0),U!=0&&(Se(U,p,ke,L,Le,$e),U=0);break}}c<=C&&(he+=l.width[c],_+=l.width[c],ie+=l.width[c])}U!=0&&(Se(U,p,ke,L,Le,$e),U=0),s!=0&&(j(s,p,ke,L,Le,$e),s=0)}function _e(u,d,p){var l=0,f=0;do{var c=u[d++],C=u[d++];l<c&&(l=c),f<C&&(f=C)}while(d<p);return l<f&&(l=f),l}function Ce(u,d,p,l,f,c){var C=k0.ht[l].xlen*65536+k0.ht[f].xlen,ie=0,F;do{var U=u[d++],s=u[d++];U!=0&&(U>14&&(U=15,ie+=C),U*=16),s!=0&&(s>14&&(s=15,ie+=C),U+=s),ie+=k0.largetbl[U]}while(d<p);return F=ie&65535,ie>>=16,ie>F&&(ie=F,l=f),c.bits+=ie,l}function Oe(u,d,p,l){var f=0,c=k0.ht[1].hlen;do{var C=u[d+0]*2+u[d+1];d+=2,f+=c[C]}while(d<p);return l.bits+=f,1}function P(u,d,p,l,f){var c=0,C,ie=k0.ht[l].xlen,F;l==2?F=k0.table23:F=k0.table56;do{var U=u[d+0]*ie+u[d+1];d+=2,c+=F[U]}while(d<p);return C=c&65535,c>>=16,c>C&&(c=C,l++),f.bits+=c,l}function we(u,d,p,l,f){var c=0,C=0,ie=0,F=k0.ht[l].xlen,U=k0.ht[l].hlen,s=k0.ht[l+1].hlen,_=k0.ht[l+2].hlen;do{var ue=u[d+0]*F+u[d+1];d+=2,c+=U[ue],C+=s[ue],ie+=_[ue]}while(d<p);var he=l;return c>C&&(c=C,he++),c>ie&&(c=ie,he=l+2),f.bits+=c,he}var R=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function T(u,d,p,l){var f=_e(u,d,p);switch(f){case 0:return f;case 1:return Oe(u,d,p,l);case 2:case 3:return P(u,d,p,R[f-1],l);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return we(u,d,p,R[f-1],l);default:if(f>J1.IXMAX_VAL)return l.bits=J1.LARGE_BITS,-1;f-=15;var c;for(c=24;c<32&&!(k0.ht[c].linmax>=f);c++);var C;for(C=c-8;C<24&&!(k0.ht[C].linmax>=f);C++);return Ce(u,d,p,C,c,l)}}this.noquant_count_bits=function(u,d,p){var l=d.l3_enc,f=Math.min(576,d.max_nonzero_coeff+2>>1<<1);for(p!=null&&(p.sfb_count1=0);f>1&&!(l[f-1]|l[f-2]);f-=2);d.count1=f;for(var c=0,C=0;f>3;f-=4){var ie;if(((l[f-1]|l[f-2]|l[f-3]|l[f-4])&2147483647)>1)break;ie=((l[f-4]*2+l[f-3])*2+l[f-2])*2+l[f-1],c+=k0.t32l[ie],C+=k0.t33l[ie]}var F=c;if(d.count1table_select=0,c>C&&(F=C,d.count1table_select=1),d.count1bits=F,d.big_values=f,f==0)return F;if(d.block_type==g.SHORT_TYPE)c=3*u.scalefac_band.s[3],c>d.big_values&&(c=d.big_values),C=d.big_values;else if(d.block_type==g.NORM_TYPE){if(c=d.region0_count=u.bv_scf[f-2],C=d.region1_count=u.bv_scf[f-1],C=u.scalefac_band.l[c+C+2],c=u.scalefac_band.l[c+1],C<f){var U=new J(F);d.table_select[2]=T(l,C,f,U),F=U.bits}}else d.region0_count=7,d.region1_count=g.SBMAX_l-1-7-1,c=u.scalefac_band.l[7+1],C=f,c>C&&(c=C);if(c=Math.min(c,f),C=Math.min(C,f),0<c){var U=new J(F);d.table_select[0]=T(l,0,c,U),F=U.bits}if(c<C){var U=new J(F);d.table_select[1]=T(l,c,C,U),F=U.bits}if(u.use_best_huffman==2&&(d.part2_3_length=F,best_huffman_divide(u,d),F=d.part2_3_length),p!=null&&d.block_type==g.NORM_TYPE){for(var s=0;u.scalefac_band.l[s]<d.big_values;)s++;p.sfb_count1=s}return F},this.count_bits=function(u,d,p,l){var f=p.l3_enc,c=J1.IXMAX_VAL/I.IPOW20(p.global_gain);if(p.xrpow_max>c)return J1.LARGE_BITS;if(ne(d,f,I.IPOW20(p.global_gain),p,l),u.substep_shaping&2)for(var C=0,ie=p.global_gain+p.scalefac_scale,F=.634521682242439/I.IPOW20(ie),U=0;U<p.sfbmax;U++){var s=p.width[U];if(u.pseudohalf[U]==0)C+=s;else{var _;for(_=C,C+=s;_<C;++_)f[_]=d[_]>=F?f[_]:0}}return this.noquant_count_bits(u,p,l)};function N(u,d,p,l,f,c,C){for(var ie=d.big_values,F=0;F<=7+15;F++)l[F]=J1.LARGE_BITS;for(var F=0;F<16;F++){var U=u.scalefac_band.l[F+1];if(U>=ie)break;var s=0,_=new J(s),ue=T(p,0,U,_);s=_.bits;for(var he=0;he<8;he++){var Le=u.scalefac_band.l[F+he+2];if(Le>=ie)break;var $e=s;_=new J($e);var ke=T(p,U,Le,_);$e=_.bits,l[F+he]>$e&&(l[F+he]=$e,f[F+he]=F,c[F+he]=ue,C[F+he]=ke)}}}function r(u,d,p,l,f,c,C,ie){for(var F=d.big_values,U=2;U<g.SBMAX_l+1;U++){var s=u.scalefac_band.l[U];if(s>=F)break;var _=f[U-2]+d.count1bits;if(p.part2_3_length<=_)break;var ue=new J(_),he=T(l,s,F,ue);_=ue.bits,!(p.part2_3_length<=_)&&(p.assign(d),p.part2_3_length=_,p.region0_count=c[U-2],p.region1_count=U-2-c[U-2],p.table_select[0]=C[U-2],p.table_select[1]=ie[U-2],p.table_select[2]=he)}}this.best_huffman_divide=function(u,d){var p=new F1,l=d.l3_enc,f=Bn(7+15+1),c=Bn(7+15+1),C=Bn(7+15+1),ie=Bn(7+15+1);if(!(d.block_type==g.SHORT_TYPE&&u.mode_gr==1)){p.assign(d),d.block_type==g.NORM_TYPE&&(N(u,d,l,f,c,C,ie),r(u,p,d,l,f,c,C,ie));var F=p.big_values;if(!(F==0||(l[F-2]|l[F-1])>1)&&(F=d.count1+2,!(F>576))){p.assign(d),p.count1=F;for(var U=0,s=0;F>p.big_values;F-=4){var _=((l[F-4]*2+l[F-3])*2+l[F-2])*2+l[F-1];U+=k0.t32l[_],s+=k0.t33l[_]}if(p.big_values=F,p.count1table_select=0,U>s&&(U=s,p.count1table_select=1),p.count1bits=U,p.block_type==g.NORM_TYPE)r(u,p,d,l,f,c,C,ie);else{if(p.part2_3_length=U,U=u.scalefac_band.l[7+1],U>F&&(U=F),U>0){var ue=new J(p.part2_3_length);p.table_select[0]=T(l,0,U,ue),p.part2_3_length=ue.bits}if(F>U){var ue=new J(p.part2_3_length);p.table_select[1]=T(l,U,F,ue),p.part2_3_length=ue.bits}d.part2_3_length>p.part2_3_length&&d.assign(p)}}}};var G=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],q=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],V=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],o=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Yn.slen1_tab=V,Yn.slen2_tab=o;function w(u,d){for(var p,l=d.tt[1][u],f=d.tt[0][u],c=0;c<k0.scfsi_band.length-1;c++){for(p=k0.scfsi_band[c];p<k0.scfsi_band[c+1]&&!(f.scalefac[p]!=l.scalefac[p]&&l.scalefac[p]>=0);p++);if(p==k0.scfsi_band[c+1]){for(p=k0.scfsi_band[c];p<k0.scfsi_band[c+1];p++)l.scalefac[p]=-1;d.scfsi[u][c]=1}}var C=0,ie=0;for(p=0;p<11;p++)l.scalefac[p]!=-1&&(ie++,C<l.scalefac[p]&&(C=l.scalefac[p]));for(var F=0,U=0;p<g.SBPSY_l;p++)l.scalefac[p]!=-1&&(U++,F<l.scalefac[p]&&(F=l.scalefac[p]));for(var c=0;c<16;c++)if(C<G[c]&&F<q[c]){var s=V[c]*ie+o[c]*U;l.part2_length>s&&(l.part2_length=s,l.scalefac_compress=c)}}this.best_scalefac_store=function(u,d,p,l){var f=l.tt[d][p],c,C,ie,F,U=0;for(ie=0,c=0;c<f.sfbmax;c++){var s=f.width[c];for(ie+=s,F=-s;F<0&&f.l3_enc[F+ie]==0;F++);F==0&&(f.scalefac[c]=U=-2)}if(f.scalefac_scale==0&&f.preflag==0){var _=0;for(c=0;c<f.sfbmax;c++)f.scalefac[c]>0&&(_|=f.scalefac[c]);if(!(_&1)&&_!=0){for(c=0;c<f.sfbmax;c++)f.scalefac[c]>0&&(f.scalefac[c]>>=1);f.scalefac_scale=U=1}}if(f.preflag==0&&f.block_type!=g.SHORT_TYPE&&u.mode_gr==2){for(c=11;c<g.SBPSY_l&&!(f.scalefac[c]<I.pretab[c]&&f.scalefac[c]!=-2);c++);if(c==g.SBPSY_l){for(c=11;c<g.SBPSY_l;c++)f.scalefac[c]>0&&(f.scalefac[c]-=I.pretab[c]);f.preflag=U=1}}for(C=0;C<4;C++)l.scfsi[p][C]=0;for(u.mode_gr==2&&d==1&&l.tt[0][p].block_type!=g.SHORT_TYPE&&l.tt[1][p].block_type!=g.SHORT_TYPE&&(w(p,l),U=0),c=0;c<f.sfbmax;c++)f.scalefac[c]==-2&&(f.scalefac[c]=0);U!=0&&(u.mode_gr==2?this.scale_bitcount(f):this.scale_bitcount_lsf(u,f))};function E(u,d){for(var p=0;p<d;++p)if(u[p]<0)return!1;return!0}var B=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],O=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],i=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(u){var d,p,l=0,f=0,c,C=u.scalefac;if(dr(E(C,u.sfbmax)),u.block_type==g.SHORT_TYPE)c=B,u.mixed_block_flag!=0&&(c=O);else if(c=i,u.preflag==0){for(p=11;p<g.SBPSY_l&&!(C[p]<I.pretab[p]);p++);if(p==g.SBPSY_l)for(u.preflag=1,p=11;p<g.SBPSY_l;p++)C[p]-=I.pretab[p]}for(p=0;p<u.sfbdivide;p++)l<C[p]&&(l=C[p]);for(;p<u.sfbmax;p++)f<C[p]&&(f=C[p]);for(u.part2_length=J1.LARGE_BITS,d=0;d<16;d++)l<G[d]&&f<q[d]&&u.part2_length>c[d]&&(u.part2_length=c[d],u.scalefac_compress=d);return u.part2_length==J1.LARGE_BITS};var b=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(u,d){var p,l,f,c,C,ie,F,U,s=Bn(4),_=d.scalefac;for(d.preflag!=0?p=2:p=0,F=0;F<4;F++)s[F]=0;if(d.block_type==g.SHORT_TYPE){l=1;var ue=I.nr_of_sfb_block[p][l];for(U=0,f=0;f<4;f++)for(c=ue[f]/3,F=0;F<c;F++,U++)for(C=0;C<3;C++)_[U*3+C]>s[f]&&(s[f]=_[U*3+C])}else{l=0;var ue=I.nr_of_sfb_block[p][l];for(U=0,f=0;f<4;f++)for(c=ue[f],F=0;F<c;F++,U++)_[U]>s[f]&&(s[f]=_[U])}for(ie=!1,f=0;f<4;f++)s[f]>b[p][f]&&(ie=!0);if(!ie){var he,Le,$e,ke;for(d.sfb_partition_table=I.nr_of_sfb_block[p][l],f=0;f<4;f++)d.slen[f]=h[s[f]];switch(he=d.slen[0],Le=d.slen[1],$e=d.slen[2],ke=d.slen[3],p){case 0:d.scalefac_compress=(he*5+Le<<4)+($e<<2)+ke;break;case 1:d.scalefac_compress=400+(he*5+Le<<2)+$e;break;case 2:d.scalefac_compress=500+he*3+Le;break;default:pi.err.printf(`intensity stereo not implemented yet
`);break}}if(!ie)for(dr(d.sfb_partition_table!=null),d.part2_length=0,f=0;f<4;f++)d.part2_length+=d.slen[f]*d.sfb_partition_table[f];return ie};var h=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(u){for(var d=2;d<=576;d+=2){for(var p=0,l;u.scalefac_band.l[++p]<d;);for(l=oe[p][0];u.scalefac_band.l[l+1]>d;)l--;for(l<0&&(l=oe[p][0]),u.bv_scf[d-2]=l,l=oe[p][1];u.scalefac_band.l[l+u.bv_scf[d-2]+2]>d;)l--;l<0&&(l=oe[p][1]),u.bv_scf[d-1]=l}}}var Ir=Yn,b1=le.System,mr=le.Arrays,pa=le.new_byte,bi=le.new_float_n,ba=le.new_int,ot=le.assert;Cn.EQ=function(I,J){return Math.abs(I)>Math.abs(J)?Math.abs(I-J)<=Math.abs(I)*1e-6:Math.abs(I-J)<=Math.abs(J)*1e-6},Cn.NEQ=function(I,J){return!Cn.EQ(I,J)};function Cn(){var I=this,J=32773,oe=null,j=null,Se=null,ne=null;this.setModules=function(b,h,u,d){oe=b,j=h,Se=u,ne=d};var _e=null,Ce=0,Oe=0,P=0;this.getframebits=function(b){var h=b.internal_flags,u;h.bitrate_index!=0?u=k0.bitrate_table[b.version][h.bitrate_index]:u=b.brate;var d=0|(b.version+1)*72e3*u/b.out_samplerate+h.padding;return 8*d};function we(b){b1.arraycopy(b.header[b.w_ptr].buf,0,_e,Oe,b.sideinfo_len),Oe+=b.sideinfo_len,Ce+=b.sideinfo_len*8,b.w_ptr=b.w_ptr+1&W0.MAX_HEADER_BUF-1}function R(b,h,u){for(;u>0;){var d;P==0&&(P=8,Oe++,ot(b.header[b.w_ptr].write_timing>=Ce),b.header[b.w_ptr].write_timing==Ce&&we(b),_e[Oe]=0),d=Math.min(u,P),u-=d,P-=d,_e[Oe]|=h>>u<<P,Ce+=d}}function T(b,h,u){for(;u>0;){var d;P==0&&(P=8,Oe++,_e[Oe]=0),d=Math.min(u,P),u-=d,P-=d,_e[Oe]|=h>>u<<P,Ce+=d}}function N(b,h){var u=b.internal_flags,d;if(h>=8&&(R(u,76,8),h-=8),h>=8&&(R(u,65,8),h-=8),h>=8&&(R(u,77,8),h-=8),h>=8&&(R(u,69,8),h-=8),h>=32){var p=Se.getLameShortVersion();if(h>=32)for(d=0;d<p.length&&h>=8;++d)h-=8,R(u,p.charAt(d),8)}for(;h>=1;h-=1)R(u,u.ancillary_flag,1),u.ancillary_flag^=b.disable_reservoir?0:1}function r(b,h,u){for(var d=b.header[b.h_ptr].ptr;u>0;){var p=Math.min(u,8-(d&7));u-=p,b.header[b.h_ptr].buf[d>>3]|=h>>u<<8-(d&7)-p,d+=p}b.header[b.h_ptr].ptr=d}function G(b,h){b<<=8;for(var u=0;u<8;u++)b<<=1,h<<=1,(h^b)&65536&&(h^=J);return h}this.CRC_writeheader=function(b,h){var u=65535;u=G(h[2]&255,u),u=G(h[3]&255,u);for(var d=6;d<b.sideinfo_len;d++)u=G(h[d]&255,u);h[4]=byte(u>>8),h[5]=byte(u&255)};function q(b,h){var u=b.internal_flags,d,p,l;if(d=u.l3_side,u.header[u.h_ptr].ptr=0,mr.fill(u.header[u.h_ptr].buf,0,u.sideinfo_len,0),b.out_samplerate<16e3?r(u,4094,12):r(u,4095,12),r(u,b.version,1),r(u,4-3,2),r(u,b.error_protection?0:1,1),r(u,u.bitrate_index,4),r(u,u.samplerate_index,2),r(u,u.padding,1),r(u,b.extension,1),r(u,b.mode.ordinal(),2),r(u,u.mode_ext,2),r(u,b.copyright,1),r(u,b.original,1),r(u,b.emphasis,2),b.error_protection&&r(u,0,16),b.version==1){for(ot(d.main_data_begin>=0),r(u,d.main_data_begin,9),u.channels_out==2?r(u,d.private_bits,3):r(u,d.private_bits,5),l=0;l<u.channels_out;l++){var f;for(f=0;f<4;f++)r(u,d.scfsi[l][f],1)}for(p=0;p<2;p++)for(l=0;l<u.channels_out;l++){var c=d.tt[p][l];r(u,c.part2_3_length+c.part2_length,12),r(u,c.big_values/2,9),r(u,c.global_gain,8),r(u,c.scalefac_compress,4),c.block_type!=g.NORM_TYPE?(r(u,1,1),r(u,c.block_type,2),r(u,c.mixed_block_flag,1),c.table_select[0]==14&&(c.table_select[0]=16),r(u,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),r(u,c.table_select[1],5),r(u,c.subblock_gain[0],3),r(u,c.subblock_gain[1],3),r(u,c.subblock_gain[2],3)):(r(u,0,1),c.table_select[0]==14&&(c.table_select[0]=16),r(u,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),r(u,c.table_select[1],5),c.table_select[2]==14&&(c.table_select[2]=16),r(u,c.table_select[2],5),ot(0<=c.region0_count&&c.region0_count<16),ot(0<=c.region1_count&&c.region1_count<8),r(u,c.region0_count,4),r(u,c.region1_count,3)),r(u,c.preflag,1),r(u,c.scalefac_scale,1),r(u,c.count1table_select,1)}}else for(ot(d.main_data_begin>=0),r(u,d.main_data_begin,8),r(u,d.private_bits,u.channels_out),p=0,l=0;l<u.channels_out;l++){var c=d.tt[p][l];r(u,c.part2_3_length+c.part2_length,12),r(u,c.big_values/2,9),r(u,c.global_gain,8),r(u,c.scalefac_compress,9),c.block_type!=g.NORM_TYPE?(r(u,1,1),r(u,c.block_type,2),r(u,c.mixed_block_flag,1),c.table_select[0]==14&&(c.table_select[0]=16),r(u,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),r(u,c.table_select[1],5),r(u,c.subblock_gain[0],3),r(u,c.subblock_gain[1],3),r(u,c.subblock_gain[2],3)):(r(u,0,1),c.table_select[0]==14&&(c.table_select[0]=16),r(u,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),r(u,c.table_select[1],5),c.table_select[2]==14&&(c.table_select[2]=16),r(u,c.table_select[2],5),ot(0<=c.region0_count&&c.region0_count<16),ot(0<=c.region1_count&&c.region1_count<8),r(u,c.region0_count,4),r(u,c.region1_count,3)),r(u,c.scalefac_scale,1),r(u,c.count1table_select,1)}b.error_protection&&CRC_writeheader(u,u.header[u.h_ptr].buf);{var C=u.h_ptr;ot(u.header[C].ptr==u.sideinfo_len*8),u.h_ptr=C+1&W0.MAX_HEADER_BUF-1,u.header[u.h_ptr].write_timing=u.header[C].write_timing+h,u.h_ptr==u.w_ptr&&b1.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function V(b,h){var u=k0.ht[h.count1table_select+32],d,p=0,l=h.big_values,f=h.big_values;for(ot(h.count1table_select<2),d=(h.count1-h.big_values)/4;d>0;--d){var c=0,C=0,ie;ie=h.l3_enc[l+0],ie!=0&&(C+=8,h.xr[f+0]<0&&c++),ie=h.l3_enc[l+1],ie!=0&&(C+=4,c*=2,h.xr[f+1]<0&&c++),ie=h.l3_enc[l+2],ie!=0&&(C+=2,c*=2,h.xr[f+2]<0&&c++),ie=h.l3_enc[l+3],ie!=0&&(C++,c*=2,h.xr[f+3]<0&&c++),l+=4,f+=4,R(b,c+u.table[C],u.hlen[C]),p+=u.hlen[C]}return p}function o(b,h,u,d,p){var l=k0.ht[h],f=0;if(h==0)return f;for(var c=u;c<d;c+=2){var C=0,ie=0,F=l.xlen,U=l.xlen,s=0,_=p.l3_enc[c],ue=p.l3_enc[c+1];if(_!=0&&(p.xr[c]<0&&s++,C--),h>15){if(_>14){var he=_-15;ot(he<=l.linmax),s|=he<<1,ie=F,_=15}if(ue>14){var Le=ue-15;ot(Le<=l.linmax),s<<=F,s|=Le,ie+=F,ue=15}U=16}ue!=0&&(s<<=1,p.xr[c+1]<0&&s++,C--),_=_*U+ue,ie-=C,C+=l.hlen[_],R(b,l.table[_],C),R(b,s,ie),f+=C+ie}return f}function w(b,h){var u=3*b.scalefac_band.s[3];u>h.big_values&&(u=h.big_values);var d=o(b,h.table_select[0],0,u,h);return d+=o(b,h.table_select[1],u,h.big_values,h),d}function E(b,h){var u,d,p,l;u=h.big_values;var f=h.region0_count+1;return ot(f<b.scalefac_band.l.length),p=b.scalefac_band.l[f],f+=h.region1_count+1,ot(f<b.scalefac_band.l.length),l=b.scalefac_band.l[f],p>u&&(p=u),l>u&&(l=u),d=o(b,h.table_select[0],0,p,h),d+=o(b,h.table_select[1],p,l,h),d+=o(b,h.table_select[2],l,u,h),d}function B(b){var h,u,d,p,l=0,f=b.internal_flags,c=f.l3_side;if(b.version==1)for(h=0;h<2;h++)for(u=0;u<f.channels_out;u++){var C=c.tt[h][u],ie=Ir.slen1_tab[C.scalefac_compress],F=Ir.slen2_tab[C.scalefac_compress];for(p=0,d=0;d<C.sfbdivide;d++)C.scalefac[d]!=-1&&(R(f,C.scalefac[d],ie),p+=ie);for(;d<C.sfbmax;d++)C.scalefac[d]!=-1&&(R(f,C.scalefac[d],F),p+=F);ot(p==C.part2_length),C.block_type==g.SHORT_TYPE?p+=w(f,C):p+=E(f,C),p+=V(f,C),ot(p==C.part2_3_length+C.part2_length),l+=p}else for(h=0,u=0;u<f.channels_out;u++){var C=c.tt[h][u],U,s,_=0;if(ot(C.sfb_partition_table!=null),p=0,d=0,s=0,C.block_type==g.SHORT_TYPE){for(;s<4;s++){var ue=C.sfb_partition_table[s]/3,he=C.slen[s];for(U=0;U<ue;U++,d++)R(f,Math.max(C.scalefac[d*3+0],0),he),R(f,Math.max(C.scalefac[d*3+1],0),he),R(f,Math.max(C.scalefac[d*3+2],0),he),_+=3*he}p+=w(f,C)}else{for(;s<4;s++){var ue=C.sfb_partition_table[s],he=C.slen[s];for(U=0;U<ue;U++,d++)R(f,Math.max(C.scalefac[d],0),he),_+=he}p+=E(f,C)}p+=V(f,C),ot(p==C.part2_3_length),ot(_==C.part2_length),l+=_+p}return l}function O(){this.total=0}function i(b,h){var u=b.internal_flags,d,p,l,f,c;return c=u.w_ptr,f=u.h_ptr-1,f==-1&&(f=W0.MAX_HEADER_BUF-1),d=u.header[f].write_timing-Ce,h.total=d,d>=0&&(p=1+f-c,f<c&&(p=1+f-c+W0.MAX_HEADER_BUF),d-=p*8*u.sideinfo_len),l=I.getframebits(b),d+=l,h.total+=l,h.total%8!=0?h.total=1+h.total/8:h.total=h.total/8,h.total+=Oe+1,d<0&&b1.err.println(`strange error flushing buffer ... 
`),d}this.flush_bitstream=function(b){var h=b.internal_flags,u,d,p=h.h_ptr-1;if(p==-1&&(p=W0.MAX_HEADER_BUF-1),u=h.l3_side,!((d=i(b,new O))<0)){if(N(b,d),ot(h.header[p].write_timing+this.getframebits(b)==Ce),h.ResvSize=0,u.main_data_begin=0,h.findReplayGain){var l=oe.GetTitleGain(h.rgdata);ot(NEQ(l,In.GAIN_NOT_ENOUGH_SAMPLES)),h.RadioGain=Math.floor(l*10+.5)|0}h.findPeakSample&&(h.noclipGainChange=Math.ceil(Math.log10(h.PeakSample/32767)*20*10)|0,h.noclipGainChange>0&&(EQ(b.scale,1)||EQ(b.scale,0))?h.noclipScale=Math.floor(32767/h.PeakSample*100)/100:h.noclipScale=-1)}},this.add_dummy_byte=function(b,h,u){for(var d=b.internal_flags,p;u-- >0;)for(T(d,h,8),p=0;p<W0.MAX_HEADER_BUF;++p)d.header[p].write_timing+=8},this.format_bitstream=function(b){var h=b.internal_flags,u;u=h.l3_side;var d=this.getframebits(b);N(b,u.resvDrain_pre),q(b,d);var p=8*h.sideinfo_len;if(p+=B(b),N(b,u.resvDrain_post),p+=u.resvDrain_post,u.main_data_begin+=(d-p)/8,i(b,new O)!=h.ResvSize&&b1.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),u.main_data_begin*8!=h.ResvSize&&(b1.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*u.main_data_begin,h.ResvSize,u.resvDrain_post,u.resvDrain_pre,8*h.sideinfo_len,p-u.resvDrain_post-8*h.sideinfo_len,p,p%8,d),b1.err.println("This is a fatal error.  It has several possible causes:"),b1.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),b1.err.println(" 9%%  Your system is overclocked"),b1.err.println(" 1%%  bug in LAME encoding library"),h.ResvSize=u.main_data_begin*8),Ce>1e9){var l;for(l=0;l<W0.MAX_HEADER_BUF;++l)h.header[l].write_timing-=Ce;Ce=0}return 0},this.copy_buffer=function(b,h,u,d,p){var l=Oe+1;if(l<=0)return 0;if(d!=0&&l>d)return-1;if(b1.arraycopy(_e,0,h,u,l),Oe=-1,P=0,p!=0){var f=ba(1);if(f[0]=b.nMusicCRC,ne.updateMusicCRC(f,h,u,l),b.nMusicCRC=f[0],l>0&&(b.VBR_seek_table.nBytesWritten+=l),b.decode_on_the_fly){for(var c=bi([2,1152]),C=l,ie=-1,F;ie!=0;)if(ie=j.hip_decode1_unclipped(b.hip,h,u,C,c[0],c[1]),C=0,ie==-1&&(ie=0),ie>0){if(b.findPeakSample){for(F=0;F<ie;F++)c[0][F]>b.PeakSample?b.PeakSample=c[0][F]:-c[0][F]>b.PeakSample&&(b.PeakSample=-c[0][F]);if(b.channels_out>1)for(F=0;F<ie;F++)c[1][F]>b.PeakSample?b.PeakSample=c[1][F]:-c[1][F]>b.PeakSample&&(b.PeakSample=-c[1][F])}if(b.findReplayGain&&oe.AnalyzeSamples(b.rgdata,c[0],0,c[1],0,ie,b.channels_out)==In.GAIN_ANALYSIS_ERROR)return-6}}}return l},this.init_bit_stream_w=function(b){_e=pa(P0.LAME_MAXMP3BUFFER),b.h_ptr=b.w_ptr=0,b.header[b.h_ptr].write_timing=0,Oe=-1,P=0,Ce=0}}var j1=Cn,xa=le.System,F0=le.VbrMode,Gn=le.ShortBlock,s1=le.new_float,Lr=le.new_int_n,wa=le.new_short_n,en=le.assert;function ut(){var I=this,J=128*1024;ut.V9=410,ut.V8=420,ut.V7=430,ut.V6=440,ut.V5=450,ut.V4=460,ut.V3=470,ut.V2=480,ut.V1=490,ut.V0=500,ut.R3MIX=1e3,ut.STANDARD=1001,ut.EXTREME=1002,ut.INSANE=1003,ut.STANDARD_FAST=1004,ut.EXTREME_FAST=1005,ut.MEDIUM=1006,ut.MEDIUM_FAST=1007;var oe=16384+J;ut.LAME_MAXMP3BUFFER=oe;var j,Se,ne,_e,Ce,Oe=new An,P,we,R;this.enc=new g,this.setModules=function(s,_,ue,he,Le,$e,ke,L,ee){j=s,Se=_,ne=ue,_e=he,Ce=Le,P=$e,we=L,R=ee,this.enc.setModules(Se,Oe,_e,P)};function T(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=s1(g.SBMAX_l),this.bo_s_weight=s1(g.SBMAX_s)}function N(){this.lowerlimit=0}function r(s,_){this.lowpass=_}var G=4294479419;function q(s){var _;return s.class_id=G,_=s.internal_flags=new W0,s.mode=ct.NOT_SET,s.original=1,s.in_samplerate=44100,s.num_channels=2,s.num_samples=-1,s.bWriteVbrTag=!0,s.quality=-1,s.short_blocks=null,_.subblock_gain=-1,s.lowpassfreq=0,s.highpassfreq=0,s.lowpasswidth=-1,s.highpasswidth=-1,s.VBR=F0.vbr_off,s.VBR_q=4,s.ATHcurve=-1,s.VBR_mean_bitrate_kbps=128,s.VBR_min_bitrate_kbps=0,s.VBR_max_bitrate_kbps=0,s.VBR_hard_min=0,_.VBR_min_bitrate=1,_.VBR_max_bitrate=13,s.quant_comp=-1,s.quant_comp_short=-1,s.msfix=-1,_.resample_ratio=1,_.OldValue[0]=180,_.OldValue[1]=180,_.CurrentStep[0]=4,_.CurrentStep[1]=4,_.masking_lower=1,_.nsPsy.attackthre=-1,_.nsPsy.attackthre_s=-1,s.scale=-1,s.athaa_type=-1,s.ATHtype=-1,s.athaa_loudapprox=-1,s.athaa_sensitivity=0,s.useTemporal=null,s.interChRatio=-1,_.mf_samples_to_encode=g.ENCDELAY+g.POSTDELAY,s.encoder_padding=0,_.mf_size=g.ENCDELAY-g.MDCTDELAY,s.findReplayGain=!1,s.decode_on_the_fly=!1,_.decode_on_the_fly=!1,_.findReplayGain=!1,_.findPeakSample=!1,_.RadioGain=0,_.AudiophileGain=0,_.noclipGainChange=0,_.noclipScale=-1,s.preset=0,s.write_id3tag_automatic=!0,0}this.lame_init=function(){var s=new un;return q(s),s.lame_allocated_gfp=1,s};function V(s){return s>1?0:s<=0?1:Math.cos(Math.PI/2*s)}this.nearestBitrateFullIndex=function(s){var _=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ue=0,he=0,Le=0,$e=0;$e=_[16],Le=16,he=_[16],ue=16;for(var ke=0;ke<16;ke++)if(Math.max(s,_[ke+1])!=s){$e=_[ke+1],Le=ke+1,he=_[ke],ue=ke;break}return $e-s>s-he?ue:Le};function o(s,_){var ue=44100;return _>=48e3?ue=48e3:_>=44100?ue=44100:_>=32e3?ue=32e3:_>=24e3?ue=24e3:_>=22050?ue=22050:_>=16e3?ue=16e3:_>=12e3?ue=12e3:_>=11025?ue=11025:_>=8e3&&(ue=8e3),s==-1?ue:(s<=15960&&(ue=44100),s<=15250&&(ue=32e3),s<=11220&&(ue=24e3),s<=9970&&(ue=22050),s<=7230&&(ue=16e3),s<=5420&&(ue=12e3),s<=4510&&(ue=11025),s<=3970&&(ue=8e3),_<ue?_>44100?48e3:_>32e3?44100:_>24e3?32e3:_>22050?24e3:_>16e3?22050:_>12e3?16e3:_>11025?12e3:_>8e3?11025:8e3:ue)}function w(s,_){switch(s){case 44100:return _.version=1,0;case 48e3:return _.version=1,1;case 32e3:return _.version=1,2;case 22050:return _.version=0,0;case 24e3:return _.version=0,1;case 16e3:return _.version=0,2;case 11025:return _.version=0,0;case 12e3:return _.version=0,1;case 8e3:return _.version=0,2;default:return _.version=0,-1}}function E(s,_,ue){ue<16e3&&(_=2);for(var he=k0.bitrate_table[_][1],Le=2;Le<=14;Le++)k0.bitrate_table[_][Le]>0&&Math.abs(k0.bitrate_table[_][Le]-s)<Math.abs(he-s)&&(he=k0.bitrate_table[_][Le]);return he}function B(s,_,ue){ue<16e3&&(_=2);for(var he=0;he<=14;he++)if(k0.bitrate_table[_][he]>0&&k0.bitrate_table[_][he]==s)return he;return-1}function O(s,_){var ue=[new r(8,2e3),new r(16,3700),new r(24,3900),new r(32,5500),new r(40,7e3),new r(48,7500),new r(56,1e4),new r(64,11e3),new r(80,13500),new r(96,15100),new r(112,15600),new r(128,17e3),new r(160,17500),new r(192,18600),new r(224,19400),new r(256,19700),new r(320,20500)],he=I.nearestBitrateFullIndex(_);s.lowerlimit=ue[he].lowpass}function i(s){var _=s.internal_flags,ue=32,he=-1;if(_.lowpass1>0){for(var Le=999,$e=0;$e<=31;$e++){var ke=$e/31;ke>=_.lowpass2&&(ue=Math.min(ue,$e)),_.lowpass1<ke&&ke<_.lowpass2&&(Le=Math.min(Le,$e))}Le==999?_.lowpass1=(ue-.75)/31:_.lowpass1=(Le-.75)/31,_.lowpass2=ue/31}if(_.highpass2>0&&_.highpass2<.9*(.75/31)&&(_.highpass1=0,_.highpass2=0,xa.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),_.highpass2>0){for(var L=-1,$e=0;$e<=31;$e++){var ke=$e/31;ke<=_.highpass1&&(he=Math.max(he,$e)),_.highpass1<ke&&ke<_.highpass2&&(L=Math.max(L,$e))}_.highpass1=he/31,L==-1?_.highpass2=(he+.75)/31:_.highpass2=(L+.75)/31}for(var $e=0;$e<32;$e++){var ee,Z,ke=$e/31;_.highpass2>_.highpass1?ee=V((_.highpass2-ke)/(_.highpass2-_.highpass1+1e-20)):ee=1,_.lowpass2>_.lowpass1?Z=V((ke-_.lowpass1)/(_.lowpass2-_.lowpass1+1e-20)):Z=1,_.amp_filter[$e]=ee*Z}}function b(s){var _=s.internal_flags;switch(s.quality){default:case 9:_.psymodel=0,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 8:s.quality=7;case 7:_.psymodel=1,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 6:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 5:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 4:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 3:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 2:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 1:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 0:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break}}function h(s){var _=s.internal_flags;s.frameNum=0,s.write_id3tag_automatic&&we.id3tag_write_v2(s),_.bitrate_stereoMode_Hist=Lr([16,4+1]),_.bitrate_blockType_Hist=Lr([16,4+1+1]),_.PeakSample=0,s.bWriteVbrTag&&P.InitVbrTag(s)}this.lame_init_params=function(s){var _=s.internal_flags;if(_.Class_ID=0,_.ATH==null&&(_.ATH=new _i),_.PSY==null&&(_.PSY=new T),_.rgdata==null&&(_.rgdata=new ca),_.channels_in=s.num_channels,_.channels_in==1&&(s.mode=ct.MONO),_.channels_out=s.mode==ct.MONO?1:2,_.mode_ext=g.MPG_MD_MS_LR,s.mode==ct.MONO&&(s.force_ms=!1),s.VBR==F0.vbr_off&&s.VBR_mean_bitrate_kbps!=128&&s.brate==0&&(s.brate=s.VBR_mean_bitrate_kbps),s.VBR==F0.vbr_off||s.VBR==F0.vbr_mtrh||s.VBR==F0.vbr_mt||(s.free_format=!1),s.VBR==F0.vbr_off&&s.brate==0&&j1.EQ(s.compression_ratio,0)&&(s.compression_ratio=11.025),s.VBR==F0.vbr_off&&s.compression_ratio>0&&(s.out_samplerate==0&&(s.out_samplerate=map2MP3Frequency(int(.97*s.in_samplerate))),s.brate=0|s.out_samplerate*16*_.channels_out/(1e3*s.compression_ratio),_.samplerate_index=w(s.out_samplerate,s),s.free_format||(s.brate=E(s.brate,s.version,s.out_samplerate))),s.out_samplerate!=0&&(s.out_samplerate<16e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,64)):s.out_samplerate<32e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,160)):(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,32),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,320))),s.lowpassfreq==0){var ue=16e3;switch(s.VBR){case F0.vbr_off:{var he=new N;O(he,s.brate),ue=he.lowerlimit;break}case F0.vbr_abr:{var he=new N;O(he,s.VBR_mean_bitrate_kbps),ue=he.lowerlimit;break}case F0.vbr_rh:{var Le=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var $e=Le[s.VBR_q],ke=Le[s.VBR_q+1],L=s.VBR_q_frac;ue=linear_int($e,ke,L)}else ue=19500;break}default:{var Le=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var $e=Le[s.VBR_q],ke=Le[s.VBR_q+1],L=s.VBR_q_frac;ue=linear_int($e,ke,L)}else ue=19500}}s.mode==ct.MONO&&(s.VBR==F0.vbr_off||s.VBR==F0.vbr_abr)&&(ue*=1.5),s.lowpassfreq=ue|0}if(s.out_samplerate==0&&(2*s.lowpassfreq>s.in_samplerate&&(s.lowpassfreq=s.in_samplerate/2),s.out_samplerate=o(s.lowpassfreq|0,s.in_samplerate)),s.lowpassfreq=Math.min(20500,s.lowpassfreq),s.lowpassfreq=Math.min(s.out_samplerate/2,s.lowpassfreq),s.VBR==F0.vbr_off&&(s.compression_ratio=s.out_samplerate*16*_.channels_out/(1e3*s.brate)),s.VBR==F0.vbr_abr&&(s.compression_ratio=s.out_samplerate*16*_.channels_out/(1e3*s.VBR_mean_bitrate_kbps)),s.bWriteVbrTag||(s.findReplayGain=!1,s.decode_on_the_fly=!1,_.findPeakSample=!1),_.findReplayGain=s.findReplayGain,_.decode_on_the_fly=s.decode_on_the_fly,_.decode_on_the_fly&&(_.findPeakSample=!0),_.findReplayGain&&j.InitGainAnalysis(_.rgdata,s.out_samplerate)==In.INIT_GAIN_ANALYSIS_ERROR)return s.internal_flags=null,-6;switch(_.decode_on_the_fly&&!s.decode_only&&(_.hip!=null&&R.hip_decode_exit(_.hip),_.hip=R.hip_decode_init()),_.mode_gr=s.out_samplerate<=24e3?1:2,s.framesize=576*_.mode_gr,s.encoder_delay=g.ENCDELAY,_.resample_ratio=s.in_samplerate/s.out_samplerate,s.VBR){case F0.vbr_mt:case F0.vbr_rh:case F0.vbr_mtrh:{var ee=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];s.compression_ratio=ee[s.VBR_q]}break;case F0.vbr_abr:s.compression_ratio=s.out_samplerate*16*_.channels_out/(1e3*s.VBR_mean_bitrate_kbps);break;default:s.compression_ratio=s.out_samplerate*16*_.channels_out/(1e3*s.brate);break}if(s.mode==ct.NOT_SET&&(s.mode=ct.JOINT_STEREO),s.highpassfreq>0?(_.highpass1=2*s.highpassfreq,s.highpasswidth>=0?_.highpass2=2*(s.highpassfreq+s.highpasswidth):_.highpass2=(1+0)*2*s.highpassfreq,_.highpass1/=s.out_samplerate,_.highpass2/=s.out_samplerate):(_.highpass1=0,_.highpass2=0),s.lowpassfreq>0?(_.lowpass2=2*s.lowpassfreq,s.lowpasswidth>=0?(_.lowpass1=2*(s.lowpassfreq-s.lowpasswidth),_.lowpass1<0&&(_.lowpass1=0)):_.lowpass1=(1-0)*2*s.lowpassfreq,_.lowpass1/=s.out_samplerate,_.lowpass2/=s.out_samplerate):(_.lowpass1=0,_.lowpass2=0),i(s),_.samplerate_index=w(s.out_samplerate,s),_.samplerate_index<0)return s.internal_flags=null,-1;if(s.VBR==F0.vbr_off){if(s.free_format)_.bitrate_index=0;else if(s.brate=E(s.brate,s.version,s.out_samplerate),_.bitrate_index=B(s.brate,s.version,s.out_samplerate),_.bitrate_index<=0)return s.internal_flags=null,-1}else _.bitrate_index=1;s.analysis&&(s.bWriteVbrTag=!1),_.pinfo!=null&&(s.bWriteVbrTag=!1),Se.init_bit_stream_w(_);for(var Z=_.samplerate_index+3*s.version+6*(s.out_samplerate<16e3?1:0),se=0;se<g.SBMAX_l+1;se++)_.scalefac_band.l[se]=_e.sfBandIndex[Z].l[se];for(var se=0;se<g.PSFB21+1;se++){var Xe=(_.scalefac_band.l[22]-_.scalefac_band.l[21])/g.PSFB21,c0=_.scalefac_band.l[21]+se*Xe;_.scalefac_band.psfb21[se]=c0}_.scalefac_band.psfb21[g.PSFB21]=576;for(var se=0;se<g.SBMAX_s+1;se++)_.scalefac_band.s[se]=_e.sfBandIndex[Z].s[se];for(var se=0;se<g.PSFB12+1;se++){var Xe=(_.scalefac_band.s[13]-_.scalefac_band.s[12])/g.PSFB12,c0=_.scalefac_band.s[12]+se*Xe;_.scalefac_band.psfb12[se]=c0}_.scalefac_band.psfb12[g.PSFB12]=192,s.version==1?_.sideinfo_len=_.channels_out==1?4+17:4+32:_.sideinfo_len=_.channels_out==1?4+9:4+17,s.error_protection&&(_.sideinfo_len+=2),h(s),_.Class_ID=G;{var l0;for(l0=0;l0<19;l0++)_.nsPsy.pefirbuf[l0]=700*_.mode_gr*_.channels_out;s.ATHtype==-1&&(s.ATHtype=4)}switch(en(s.VBR_q<=9),en(s.VBR_q>=0),s.VBR){case F0.vbr_mt:s.VBR=F0.vbr_mtrh;case F0.vbr_mtrh:{s.useTemporal==null&&(s.useTemporal=!1),ne.apply_preset(s,500-s.VBR_q*10,0),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),s.quality<5&&(s.quality=0),s.quality>5&&(s.quality=5),_.PSY.mask_adjust=s.maskingadjust,_.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=s.out_samplerate>44e3,_.iteration_loop=new VBRNewIterationLoop(Ce);break}case F0.vbr_rh:{ne.apply_preset(s,500-s.VBR_q*10,0),_.PSY.mask_adjust=s.maskingadjust,_.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=s.out_samplerate>44e3,s.quality>6&&(s.quality=6),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),_.iteration_loop=new VBROldIterationLoop(Ce);break}default:{var _0;_.sfb21_extra=!1,s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),_0=s.VBR,_0==F0.vbr_off&&(s.VBR_mean_bitrate_kbps=s.brate),ne.apply_preset(s,s.VBR_mean_bitrate_kbps,0),s.VBR=_0,_.PSY.mask_adjust=s.maskingadjust,_.PSY.mask_adjust_short=s.maskingadjust_short,_0==F0.vbr_off?_.iteration_loop=new _r(Ce):_.iteration_loop=new ABRIterationLoop(Ce);break}}if(en(s.scale>=0),s.VBR!=F0.vbr_off){if(_.VBR_min_bitrate=1,_.VBR_max_bitrate=14,s.out_samplerate<16e3&&(_.VBR_max_bitrate=8),s.VBR_min_bitrate_kbps!=0&&(s.VBR_min_bitrate_kbps=E(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),_.VBR_min_bitrate=B(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),_.VBR_min_bitrate<0)||s.VBR_max_bitrate_kbps!=0&&(s.VBR_max_bitrate_kbps=E(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),_.VBR_max_bitrate=B(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),_.VBR_max_bitrate<0))return-1;s.VBR_min_bitrate_kbps=k0.bitrate_table[s.version][_.VBR_min_bitrate],s.VBR_max_bitrate_kbps=k0.bitrate_table[s.version][_.VBR_max_bitrate],s.VBR_mean_bitrate_kbps=Math.min(k0.bitrate_table[s.version][_.VBR_max_bitrate],s.VBR_mean_bitrate_kbps),s.VBR_mean_bitrate_kbps=Math.max(k0.bitrate_table[s.version][_.VBR_min_bitrate],s.VBR_mean_bitrate_kbps)}return s.tune&&(_.PSY.mask_adjust+=s.tune_value_a,_.PSY.mask_adjust_short+=s.tune_value_a),b(s),en(s.scale>=0),s.athaa_type<0?_.ATH.useAdjust=3:_.ATH.useAdjust=s.athaa_type,_.ATH.aaSensitivityP=Math.pow(10,s.athaa_sensitivity/-10),s.short_blocks==null&&(s.short_blocks=Gn.short_block_allowed),s.short_blocks==Gn.short_block_allowed&&(s.mode==ct.JOINT_STEREO||s.mode==ct.STEREO)&&(s.short_blocks=Gn.short_block_coupled),s.quant_comp<0&&(s.quant_comp=1),s.quant_comp_short<0&&(s.quant_comp_short=0),s.msfix<0&&(s.msfix=0),s.exp_nspsytune=s.exp_nspsytune|1,s.internal_flags.nsPsy.attackthre<0&&(s.internal_flags.nsPsy.attackthre=An.NSATTACKTHRE),s.internal_flags.nsPsy.attackthre_s<0&&(s.internal_flags.nsPsy.attackthre_s=An.NSATTACKTHRE_S),en(s.scale>=0),s.scale<0&&(s.scale=1),s.ATHtype<0&&(s.ATHtype=4),s.ATHcurve<0&&(s.ATHcurve=4),s.athaa_loudapprox<0&&(s.athaa_loudapprox=2),s.interChRatio<0&&(s.interChRatio=0),s.useTemporal==null&&(s.useTemporal=!0),_.slot_lag=_.frac_SpF=0,s.VBR==F0.vbr_off&&(_.slot_lag=_.frac_SpF=(s.version+1)*72e3*s.brate%s.out_samplerate|0),_e.iteration_init(s),Oe.psymodel_init(s),en(s.scale>=0),0};function u(s,_){(s.in_buffer_0==null||s.in_buffer_nsamples<_)&&(s.in_buffer_0=s1(_),s.in_buffer_1=s1(_),s.in_buffer_nsamples=_)}this.lame_encode_flush=function(s,_,ue,he){var Le=s.internal_flags,$e=wa([2,1152]),ke=0,L,ee,Z,se,Xe=Le.mf_samples_to_encode-g.POSTDELAY,c0=d(s);if(Le.mf_samples_to_encode<1)return 0;for(L=0,s.in_samplerate!=s.out_samplerate&&(Xe+=16*s.out_samplerate/s.in_samplerate),Z=s.framesize-Xe%s.framesize,Z<576&&(Z+=s.framesize),s.encoder_padding=Z,se=(Xe+Z)/s.framesize;se>0&&ke>=0;){var l0=c0-Le.mf_size,_0=s.frameNum;l0*=s.in_samplerate,l0/=s.out_samplerate,l0>1152&&(l0=1152),l0<1&&(l0=1),ee=he-L,he==0&&(ee=0),ke=this.lame_encode_buffer(s,$e[0],$e[1],l0,_,ue,ee),ue+=ke,L+=ke,se-=_0!=s.frameNum?1:0}if(Le.mf_samples_to_encode=0,ke<0||(ee=he-L,he==0&&(ee=0),Se.flush_bitstream(s),ke=Se.copy_buffer(Le,_,ue,ee,1),ke<0))return ke;if(ue+=ke,L+=ke,ee=he-L,he==0&&(ee=0),s.write_id3tag_automatic){if(we.id3tag_write_v1(s),ke=Se.copy_buffer(Le,_,ue,ee,0),ke<0)return ke;L+=ke}return L},this.lame_encode_buffer=function(s,_,ue,he,Le,$e,ke){var L=s.internal_flags,ee=[null,null];if(L.Class_ID!=G)return-3;if(he==0)return 0;u(L,he),ee[0]=L.in_buffer_0,ee[1]=L.in_buffer_1;for(var Z=0;Z<he;Z++)ee[0][Z]=_[Z],L.channels_in>1&&(ee[1][Z]=ue[Z]);return p(s,ee[0],ee[1],he,Le,$e,ke)};function d(s){var _=g.BLKSIZE+s.framesize-g.FFTOFFSET;return _=Math.max(_,512+s.framesize-32),_}function p(s,_,ue,he,Le,$e,ke){var L=s.internal_flags,ee=0,Z,se,Xe,c0,l0,_0=[null,null],J0=[null,null];if(L.Class_ID!=G)return-3;if(he==0)return 0;if(l0=Se.copy_buffer(L,Le,$e,ke,0),l0<0)return l0;if($e+=l0,ee+=l0,J0[0]=_,J0[1]=ue,j1.NEQ(s.scale,0)&&j1.NEQ(s.scale,1))for(se=0;se<he;++se)J0[0][se]*=s.scale,L.channels_out==2&&(J0[1][se]*=s.scale);if(j1.NEQ(s.scale_left,0)&&j1.NEQ(s.scale_left,1))for(se=0;se<he;++se)J0[0][se]*=s.scale_left;if(j1.NEQ(s.scale_right,0)&&j1.NEQ(s.scale_right,1))for(se=0;se<he;++se)J0[1][se]*=s.scale_right;if(s.num_channels==2&&L.channels_out==1)for(se=0;se<he;++se)J0[0][se]=.5*(J0[0][se]+J0[1][se]),J0[1][se]=0;c0=d(s),_0[0]=L.mfbuf[0],_0[1]=L.mfbuf[1];for(var it=0;he>0;){var q0=[null,null],Gt=0,u1=0;q0[0]=J0[0],q0[1]=J0[1];var vt=new f;if(U(s,_0,q0,it,he,vt),Gt=vt.n_in,u1=vt.n_out,L.findReplayGain&&!L.decode_on_the_fly&&j.AnalyzeSamples(L.rgdata,_0[0],L.mf_size,_0[1],L.mf_size,u1,L.channels_out)==In.GAIN_ANALYSIS_ERROR)return-6;if(he-=Gt,it+=Gt,L.channels_out==2,L.mf_size+=u1,en(L.mf_size<=W0.MFSIZE),L.mf_samples_to_encode<1&&(L.mf_samples_to_encode=g.ENCDELAY+g.POSTDELAY),L.mf_samples_to_encode+=u1,L.mf_size>=c0){var qt=ke-ee;if(ke==0&&(qt=0),Z=l(s,_0[0],_0[1],Le,$e,qt),Z<0)return Z;for($e+=Z,ee+=Z,L.mf_size-=s.framesize,L.mf_samples_to_encode-=s.framesize,Xe=0;Xe<L.channels_out;Xe++)for(se=0;se<L.mf_size;se++)_0[Xe][se]=_0[Xe][se+s.framesize]}}return ee}function l(s,_,ue,he,Le,$e){var ke=I.enc.lame_encode_mp3_frame(s,_,ue,he,Le,$e);return s.frameNum++,ke}function f(){this.n_in=0,this.n_out=0}function c(){this.num_used=0}function C(s,_){return _!=0?C(_,s%_):s}function ie(s,_,ue){var he=Math.PI*_;s/=ue,s<0&&(s=0),s>1&&(s=1);var Le=s-.5,$e=.42-.5*Math.cos(2*s*Math.PI)+.08*Math.cos(4*s*Math.PI);return Math.abs(Le)<1e-9?he/Math.PI:$e*Math.sin(ue*he*Le)/(Math.PI*ue*Le)}function F(s,_,ue,he,Le,$e,ke,L,ee){var Z=s.internal_flags,se,Xe=0,c0,l0=s.out_samplerate/C(s.out_samplerate,s.in_samplerate);l0>W0.BPC&&(l0=W0.BPC);var _0=Math.abs(Z.resample_ratio-Math.floor(.5+Z.resample_ratio))<1e-4?1:0,J0=1/Z.resample_ratio;J0>1&&(J0=1);var it=31;it%2==0&&--it,it+=_0;var q0=it+1;if(Z.fill_buffer_resample_init==0){for(Z.inbuf_old[0]=s1(q0),Z.inbuf_old[1]=s1(q0),se=0;se<=2*l0;++se)Z.blackfilt[se]=s1(q0);for(Z.itime[0]=0,Z.itime[1]=0,Xe=0;Xe<=2*l0;Xe++){var Gt=0,u1=(Xe-l0)/(2*l0);for(se=0;se<=it;se++)Gt+=Z.blackfilt[Xe][se]=ie(se-u1,J0,it);for(se=0;se<=it;se++)Z.blackfilt[Xe][se]/=Gt}Z.fill_buffer_resample_init=1}var vt=Z.inbuf_old[ee];for(c0=0;c0<he;c0++){var qt,I1;if(qt=c0*Z.resample_ratio,Xe=0|Math.floor(qt-Z.itime[ee]),it+Xe-it/2>=ke)break;var u1=qt-Z.itime[ee]-(Xe+.5*(it%2));I1=0|Math.floor(u1*2*l0+l0+.5);var I0=0;for(se=0;se<=it;++se){var Wt=se+Xe-it/2,an;an=Wt<0?vt[q0+Wt]:Le[$e+Wt],I0+=an*Z.blackfilt[I1][se]}_[ue+c0]=I0}if(L.num_used=Math.min(ke,it+Xe-it/2),Z.itime[ee]+=L.num_used-c0*Z.resample_ratio,L.num_used>=q0)for(se=0;se<q0;se++)vt[se]=Le[$e+L.num_used+se-q0];else{var f1=q0-L.num_used;for(se=0;se<f1;++se)vt[se]=vt[se+L.num_used];for(Xe=0;se<q0;++se,++Xe)vt[se]=Le[$e+Xe];en(Xe==L.num_used)}return c0}function U(s,_,ue,he,Le,$e){var ke=s.internal_flags;if(ke.resample_ratio<.9999||ke.resample_ratio>1.0001)for(var L=0;L<ke.channels_out;L++){var ee=new c;$e.n_out=F(s,_[L],ke.mf_size,s.framesize,ue[L],he,Le,ee,L),$e.n_in=ee.num_used}else{$e.n_out=Math.min(s.framesize,Le),$e.n_in=$e.n_out;for(var Z=0;Z<$e.n_out;++Z)_[0][ke.mf_size+Z]=ue[0][he+Z],ke.channels_out==2&&(_[1][ke.mf_size+Z]=ue[1][he+Z])}}}var ya=ut,x1=le.VbrMode;function ga(){function I(P,we,R,T,N,r,G,q,V,o,w,E,B,O,i){this.vbr_q=P,this.quant_comp=we,this.quant_comp_s=R,this.expY=T,this.st_lrm=N,this.st_s=r,this.masking_adj=G,this.masking_adj_short=q,this.ath_lower=V,this.ath_curve=o,this.ath_sensitivity=w,this.interch=E,this.safejoint=B,this.sfb21mod=O,this.msfix=i}function J(P,we,R,T,N,r,G,q,V,o,w,E,B,O){this.quant_comp=we,this.quant_comp_s=R,this.safejoint=T,this.nsmsfix=N,this.st_lrm=r,this.st_s=G,this.nsbass=q,this.scale=V,this.masking_adj=o,this.ath_lower=w,this.ath_curve=E,this.interch=B,this.sfscale=O}var oe;this.setModules=function(P){oe=P};var j=[new I(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new I(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new I(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new I(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new I(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new I(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new I(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new I(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new I(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new I(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new I(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],Se=[new I(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new I(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new I(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new I(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new I(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new I(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new I(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new I(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new I(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new I(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new I(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function ne(P,we,R){var T=P.VBR==x1.vbr_rh?j:Se,N=P.VBR_q_frac,r=T[we],G=T[we+1],q=r;r.st_lrm=r.st_lrm+N*(G.st_lrm-r.st_lrm),r.st_s=r.st_s+N*(G.st_s-r.st_s),r.masking_adj=r.masking_adj+N*(G.masking_adj-r.masking_adj),r.masking_adj_short=r.masking_adj_short+N*(G.masking_adj_short-r.masking_adj_short),r.ath_lower=r.ath_lower+N*(G.ath_lower-r.ath_lower),r.ath_curve=r.ath_curve+N*(G.ath_curve-r.ath_curve),r.ath_sensitivity=r.ath_sensitivity+N*(G.ath_sensitivity-r.ath_sensitivity),r.interch=r.interch+N*(G.interch-r.interch),r.msfix=r.msfix+N*(G.msfix-r.msfix),Oe(P,q.vbr_q),R!=0?P.quant_comp=q.quant_comp:Math.abs(P.quant_comp- -1)>0||(P.quant_comp=q.quant_comp),R!=0?P.quant_comp_short=q.quant_comp_s:Math.abs(P.quant_comp_short- -1)>0||(P.quant_comp_short=q.quant_comp_s),q.expY!=0&&(P.experimentalY=q.expY!=0),R!=0?P.internal_flags.nsPsy.attackthre=q.st_lrm:Math.abs(P.internal_flags.nsPsy.attackthre- -1)>0||(P.internal_flags.nsPsy.attackthre=q.st_lrm),R!=0?P.internal_flags.nsPsy.attackthre_s=q.st_s:Math.abs(P.internal_flags.nsPsy.attackthre_s- -1)>0||(P.internal_flags.nsPsy.attackthre_s=q.st_s),R!=0?P.maskingadjust=q.masking_adj:Math.abs(P.maskingadjust-0)>0||(P.maskingadjust=q.masking_adj),R!=0?P.maskingadjust_short=q.masking_adj_short:Math.abs(P.maskingadjust_short-0)>0||(P.maskingadjust_short=q.masking_adj_short),R!=0?P.ATHlower=-q.ath_lower/10:Math.abs(-P.ATHlower*10-0)>0||(P.ATHlower=-q.ath_lower/10),R!=0?P.ATHcurve=q.ath_curve:Math.abs(P.ATHcurve- -1)>0||(P.ATHcurve=q.ath_curve),R!=0?P.athaa_sensitivity=q.ath_sensitivity:Math.abs(P.athaa_sensitivity- -1)>0||(P.athaa_sensitivity=q.ath_sensitivity),q.interch>0&&(R!=0?P.interChRatio=q.interch:Math.abs(P.interChRatio- -1)>0||(P.interChRatio=q.interch)),q.safejoint>0&&(P.exp_nspsytune=P.exp_nspsytune|q.safejoint),q.sfb21mod>0&&(P.exp_nspsytune=P.exp_nspsytune|q.sfb21mod<<20),R!=0?P.msfix=q.msfix:Math.abs(P.msfix- -1)>0||(P.msfix=q.msfix),R==0&&(P.VBR_q=we,P.VBR_q_frac=N)}var _e=[new J(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new J(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new J(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new J(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new J(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new J(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new J(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new J(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new J(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new J(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new J(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new J(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new J(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new J(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new J(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new J(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new J(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function Ce(P,we,R){var T=we,N=oe.nearestBitrateFullIndex(we);if(P.VBR=x1.vbr_abr,P.VBR_mean_bitrate_kbps=T,P.VBR_mean_bitrate_kbps=Math.min(P.VBR_mean_bitrate_kbps,320),P.VBR_mean_bitrate_kbps=Math.max(P.VBR_mean_bitrate_kbps,8),P.brate=P.VBR_mean_bitrate_kbps,P.VBR_mean_bitrate_kbps>320&&(P.disable_reservoir=!0),_e[N].safejoint>0&&(P.exp_nspsytune=P.exp_nspsytune|2),_e[N].sfscale>0&&(P.internal_flags.noise_shaping=2),Math.abs(_e[N].nsbass)>0){var r=int(_e[N].nsbass*4);r<0&&(r+=64),P.exp_nspsytune=P.exp_nspsytune|r<<2}return R!=0?P.quant_comp=_e[N].quant_comp:Math.abs(P.quant_comp- -1)>0||(P.quant_comp=_e[N].quant_comp),R!=0?P.quant_comp_short=_e[N].quant_comp_s:Math.abs(P.quant_comp_short- -1)>0||(P.quant_comp_short=_e[N].quant_comp_s),R!=0?P.msfix=_e[N].nsmsfix:Math.abs(P.msfix- -1)>0||(P.msfix=_e[N].nsmsfix),R!=0?P.internal_flags.nsPsy.attackthre=_e[N].st_lrm:Math.abs(P.internal_flags.nsPsy.attackthre- -1)>0||(P.internal_flags.nsPsy.attackthre=_e[N].st_lrm),R!=0?P.internal_flags.nsPsy.attackthre_s=_e[N].st_s:Math.abs(P.internal_flags.nsPsy.attackthre_s- -1)>0||(P.internal_flags.nsPsy.attackthre_s=_e[N].st_s),R!=0?P.scale=_e[N].scale:Math.abs(P.scale- -1)>0||(P.scale=_e[N].scale),R!=0?P.maskingadjust=_e[N].masking_adj:Math.abs(P.maskingadjust-0)>0||(P.maskingadjust=_e[N].masking_adj),_e[N].masking_adj>0?R!=0?P.maskingadjust_short=_e[N].masking_adj*.9:Math.abs(P.maskingadjust_short-0)>0||(P.maskingadjust_short=_e[N].masking_adj*.9):R!=0?P.maskingadjust_short=_e[N].masking_adj*1.1:Math.abs(P.maskingadjust_short-0)>0||(P.maskingadjust_short=_e[N].masking_adj*1.1),R!=0?P.ATHlower=-_e[N].ath_lower/10:Math.abs(-P.ATHlower*10-0)>0||(P.ATHlower=-_e[N].ath_lower/10),R!=0?P.ATHcurve=_e[N].ath_curve:Math.abs(P.ATHcurve- -1)>0||(P.ATHcurve=_e[N].ath_curve),R!=0?P.interChRatio=_e[N].interch:Math.abs(P.interChRatio- -1)>0||(P.interChRatio=_e[N].interch),we}this.apply_preset=function(P,we,R){switch(we){case P0.R3MIX:{we=P0.V3,P.VBR=x1.vbr_mtrh;break}case P0.MEDIUM:{we=P0.V4,P.VBR=x1.vbr_rh;break}case P0.MEDIUM_FAST:{we=P0.V4,P.VBR=x1.vbr_mtrh;break}case P0.STANDARD:{we=P0.V2,P.VBR=x1.vbr_rh;break}case P0.STANDARD_FAST:{we=P0.V2,P.VBR=x1.vbr_mtrh;break}case P0.EXTREME:{we=P0.V0,P.VBR=x1.vbr_rh;break}case P0.EXTREME_FAST:{we=P0.V0,P.VBR=x1.vbr_mtrh;break}case P0.INSANE:return we=320,P.preset=we,Ce(P,we,R),P.VBR=x1.vbr_off,we}switch(P.preset=we,we){case P0.V9:return ne(P,9,R),we;case P0.V8:return ne(P,8,R),we;case P0.V7:return ne(P,7,R),we;case P0.V6:return ne(P,6,R),we;case P0.V5:return ne(P,5,R),we;case P0.V4:return ne(P,4,R),we;case P0.V3:return ne(P,3,R),we;case P0.V2:return ne(P,2,R),we;case P0.V1:return ne(P,1,R),we;case P0.V0:return ne(P,0,R),we}return 8<=we&&we<=320?Ce(P,we,R):(P.preset=0,we)};function Oe(P,we){var R=0;return 0>we&&(R=-1,we=0),9<we&&(R=-1,we=9),P.VBR_q=we,P.VBR_q_frac=0,R}}var xi=ga;function wi(){this.setModules=function(I,J){}}var yi=wi;function Sa(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Or=Sa,Aa=le.new_float,gi=le.new_int;function Si(){this.global_gain=0,this.sfb_count1=0,this.step=gi(39),this.noise=Aa(39),this.noise_log=Aa(39)}var Nr=Si,tn=le.System,Ma=le.VbrMode,Hr=le.Util,kn=le.Arrays,Wn=le.new_float,D0=le.assert;function Q0(){var I;this.rv=null;var J;this.qupvt=null;var oe,j=new yi,Se;this.setModules=function(V,o,w,E){I=V,J=o,this.rv=o,oe=w,this.qupvt=w,Se=E,j.setModules(oe,Se)},this.ms_convert=function(V,o){for(var w=0;w<576;++w){var E=V.tt[o][0].xr[w],B=V.tt[o][1].xr[w];V.tt[o][0].xr[w]=(E+B)*(Hr.SQRT2*.5),V.tt[o][1].xr[w]=(E-B)*(Hr.SQRT2*.5)}};function ne(V,o,w,E){E=0;for(var B=0;B<=w;++B){var O=Math.abs(V.xr[B]);E+=O,o[B]=Math.sqrt(O*Math.sqrt(O)),o[B]>V.xrpow_max&&(V.xrpow_max=o[B])}return E}this.init_xrpow=function(V,o,w){var E=0,B=0|o.max_nonzero_coeff;if(o.xrpow_max=0,kn.fill(w,B,576,0),E=ne(o,w,B,E),E>1e-20){var O=0;V.substep_shaping&2&&(O=1);for(var i=0;i<o.psymax;i++)V.pseudohalf[i]=O;return!0}return kn.fill(o.l3_enc,0,576,0),!1};function _e(V,o){var w=V.ATH,E=o.xr;if(o.block_type!=g.SHORT_TYPE)for(var B=!1,O=g.PSFB21-1;O>=0&&!B;O--){var i=V.scalefac_band.psfb21[O],b=V.scalefac_band.psfb21[O+1],h=oe.athAdjust(w.adjust,w.psfb21[O],w.floor);V.nsPsy.longfact[21]>1e-12&&(h*=V.nsPsy.longfact[21]);for(var u=b-1;u>=i;u--)if(Math.abs(E[u])<h)E[u]=0;else{B=!0;break}}else for(var d=0;d<3;d++)for(var B=!1,O=g.PSFB12-1;O>=0&&!B;O--){var i=V.scalefac_band.s[12]*3+(V.scalefac_band.s[13]-V.scalefac_band.s[12])*d+(V.scalefac_band.psfb12[O]-V.scalefac_band.psfb12[0]),b=i+(V.scalefac_band.psfb12[O+1]-V.scalefac_band.psfb12[O]),p=oe.athAdjust(w.adjust,w.psfb12[O],w.floor);V.nsPsy.shortfact[12]>1e-12&&(p*=V.nsPsy.shortfact[12]);for(var u=b-1;u>=i;u--)if(Math.abs(E[u])<p)E[u]=0;else{B=!0;break}}}this.init_outer_loop=function(V,o){o.part2_3_length=0,o.big_values=0,o.count1=0,o.global_gain=210,o.scalefac_compress=0,o.table_select[0]=0,o.table_select[1]=0,o.table_select[2]=0,o.subblock_gain[0]=0,o.subblock_gain[1]=0,o.subblock_gain[2]=0,o.subblock_gain[3]=0,o.region0_count=0,o.region1_count=0,o.preflag=0,o.scalefac_scale=0,o.count1table_select=0,o.part2_length=0,o.sfb_lmax=g.SBPSY_l,o.sfb_smin=g.SBPSY_s,o.psy_lmax=V.sfb21_extra?g.SBMAX_l:g.SBPSY_l,o.psymax=o.psy_lmax,o.sfbmax=o.sfb_lmax,o.sfbdivide=11;for(var w=0;w<g.SBMAX_l;w++)o.width[w]=V.scalefac_band.l[w+1]-V.scalefac_band.l[w],o.window[w]=3;if(o.block_type==g.SHORT_TYPE){var E=Wn(576);o.sfb_smin=0,o.sfb_lmax=0,o.mixed_block_flag!=0&&(o.sfb_smin=3,o.sfb_lmax=V.mode_gr*2+4),o.psymax=o.sfb_lmax+3*((V.sfb21_extra?g.SBMAX_s:g.SBPSY_s)-o.sfb_smin),o.sfbmax=o.sfb_lmax+3*(g.SBPSY_s-o.sfb_smin),o.sfbdivide=o.sfbmax-18,o.psy_lmax=o.sfb_lmax;var B=V.scalefac_band.l[o.sfb_lmax];tn.arraycopy(o.xr,0,E,0,576);for(var w=o.sfb_smin;w<g.SBMAX_s;w++)for(var O=V.scalefac_band.s[w],i=V.scalefac_band.s[w+1],b=0;b<3;b++)for(var h=O;h<i;h++)o.xr[B++]=E[3*h+b];for(var u=o.sfb_lmax,w=o.sfb_smin;w<g.SBMAX_s;w++)o.width[u]=o.width[u+1]=o.width[u+2]=V.scalefac_band.s[w+1]-V.scalefac_band.s[w],o.window[u]=0,o.window[u+1]=1,o.window[u+2]=2,u+=3}o.count1bits=0,o.sfb_partition_table=oe.nr_of_sfb_block[0][0],o.slen[0]=0,o.slen[1]=0,o.slen[2]=0,o.slen[3]=0,o.max_nonzero_coeff=575,kn.fill(o.scalefac,0),_e(V,o)};function Ce(V){this.ordinal=V}Ce.BINSEARCH_NONE=new Ce(0),Ce.BINSEARCH_UP=new Ce(1),Ce.BINSEARCH_DOWN=new Ce(2);function Oe(V,o,w,E,B){var O,i=V.CurrentStep[E],b=!1,h=V.OldValue[E],u=Ce.BINSEARCH_NONE;for(o.global_gain=h,w-=o.part2_length;;){var d;if(O=Se.count_bits(V,B,o,null),i==1||O==w)break;O>w?(u==Ce.BINSEARCH_DOWN&&(b=!0),b&&(i/=2),u=Ce.BINSEARCH_UP,d=i):(u==Ce.BINSEARCH_UP&&(b=!0),b&&(i/=2),u=Ce.BINSEARCH_DOWN,d=-i),o.global_gain+=d,o.global_gain<0&&(o.global_gain=0,b=!0),o.global_gain>255&&(o.global_gain=255,b=!0)}for(D0(o.global_gain>=0),D0(o.global_gain<256);O>w&&o.global_gain<255;)o.global_gain++,O=Se.count_bits(V,B,o,null);return V.CurrentStep[E]=h-o.global_gain>=4?4:2,V.OldValue[E]=o.global_gain,o.part2_3_length=O,O}this.trancate_smallspectrums=function(V,o,w,E){var B=Wn(Ft.SFBMAX);if(!(!(V.substep_shaping&4)&&o.block_type==g.SHORT_TYPE||V.substep_shaping&128)){oe.calc_noise(o,w,B,new Or,null);for(var i=0;i<576;i++){var O=0;o.l3_enc[i]!=0&&(O=Math.abs(o.xr[i])),E[i]=O}var i=0,b=8;o.block_type==g.SHORT_TYPE&&(b=6);do{var h,u,d,p,l=o.width[b];if(i+=l,!(B[b]>=1)&&(kn.sort(E,i-l,l),!k1.EQ(E[i-1],0))){h=(1-B[b])*w[b],u=0,p=0;do{var f;for(d=1;p+d<l&&!k1.NEQ(E[p+i-l],E[p+i+d-l]);d++);if(f=E[p+i-l]*E[p+i-l]*d,h<f){p!=0&&(u=E[p+i-l-1]);break}h-=f,p+=d}while(p<l);if(!k1.EQ(u,0))do Math.abs(o.xr[i-l])<=u&&(o.l3_enc[i-l]=0);while(--l>0)}}while(++b<o.psymax);o.part2_3_length=Se.noquant_count_bits(V,o,null)}};function P(V){for(var o=0;o<V.sfbmax;o++)if(V.scalefac[o]+V.subblock_gain[V.window[o]]==0)return!1;return!0}function we(V){return Hr.FAST_LOG10(.368+.632*V*V*V)}function R(V,o){for(var w=1e-37,E=0;E<o.psymax;E++)w+=we(V[E]);return Math.max(1e-20,w)}function T(V,o,w,E,B){var O;switch(V){default:case 9:{o.over_count>0?(O=w.over_SSD<=o.over_SSD,w.over_SSD==o.over_SSD&&(O=w.bits<o.bits)):O=w.max_noise<0&&w.max_noise*10+w.bits<=o.max_noise*10+o.bits;break}case 0:O=w.over_count<o.over_count||w.over_count==o.over_count&&w.over_noise<o.over_noise||w.over_count==o.over_count&&k1.EQ(w.over_noise,o.over_noise)&&w.tot_noise<o.tot_noise;break;case 8:w.max_noise=R(B,E);case 1:O=w.max_noise<o.max_noise;break;case 2:O=w.tot_noise<o.tot_noise;break;case 3:O=w.tot_noise<o.tot_noise&&w.max_noise<o.max_noise;break;case 4:O=w.max_noise<=0&&o.max_noise>.2||w.max_noise<=0&&o.max_noise<0&&o.max_noise>w.max_noise-.2&&w.tot_noise<o.tot_noise||w.max_noise<=0&&o.max_noise>0&&o.max_noise>w.max_noise-.2&&w.tot_noise<o.tot_noise+o.over_noise||w.max_noise>0&&o.max_noise>-.05&&o.max_noise>w.max_noise-.1&&w.tot_noise+w.over_noise<o.tot_noise+o.over_noise||w.max_noise>0&&o.max_noise>-.1&&o.max_noise>w.max_noise-.15&&w.tot_noise+w.over_noise+w.over_noise<o.tot_noise+o.over_noise+o.over_noise;break;case 5:O=w.over_noise<o.over_noise||k1.EQ(w.over_noise,o.over_noise)&&w.tot_noise<o.tot_noise;break;case 6:O=w.over_noise<o.over_noise||k1.EQ(w.over_noise,o.over_noise)&&(w.max_noise<o.max_noise||k1.EQ(w.max_noise,o.max_noise)&&w.tot_noise<=o.tot_noise);break;case 7:O=w.over_count<o.over_count||w.over_noise<o.over_noise;break}return o.over_count==0&&(O=O&&w.bits<o.bits),O}function N(V,o,w,E,B){var O=V.internal_flags,i;o.scalefac_scale==0?i=1.2968395546510096:i=1.6817928305074292;for(var b=0,h=0;h<o.sfbmax;h++)b<w[h]&&(b=w[h]);var u=O.noise_shaping_amp;switch(u==3&&(B?u=2:u=1),u){case 2:break;case 1:b>1?b=Math.pow(b,.5):b*=.95;break;case 0:default:b>1?b=1:b*=.95;break}for(var d=0,h=0;h<o.sfbmax;h++){var p=o.width[h],l;if(d+=p,!(w[h]<b)){if(O.substep_shaping&2&&(O.pseudohalf[h]=O.pseudohalf[h]==0?1:0,O.pseudohalf[h]==0&&O.noise_shaping_amp==2))return;for(o.scalefac[h]++,l=-p;l<0;l++)E[d+l]*=i,E[d+l]>o.xrpow_max&&(o.xrpow_max=E[d+l]);if(O.noise_shaping_amp==2)return}}}function r(V,o){for(var w=1.2968395546510096,E=0,B=0;B<V.sfbmax;B++){var O=V.width[B],i=V.scalefac[B];if(V.preflag!=0&&(i+=oe.pretab[B]),E+=O,i&1){i++;for(var b=-O;b<0;b++)o[E+b]*=w,o[E+b]>V.xrpow_max&&(V.xrpow_max=o[E+b])}V.scalefac[B]=i>>1}V.preflag=0,V.scalefac_scale=1}function G(V,o,w){var E,B=o.scalefac;for(E=0;E<o.sfb_lmax;E++)if(B[E]>=16)return!0;for(var O=0;O<3;O++){var i=0,b=0;for(E=o.sfb_lmax+O;E<o.sfbdivide;E+=3)i<B[E]&&(i=B[E]);for(;E<o.sfbmax;E+=3)b<B[E]&&(b=B[E]);if(!(i<16&&b<8)){if(o.subblock_gain[O]>=7)return!0;o.subblock_gain[O]++;var h=V.scalefac_band.l[o.sfb_lmax];for(E=o.sfb_lmax+O;E<o.sfbmax;E+=3){var u,d=o.width[E],p=B[E];if(p=p-(4>>o.scalefac_scale),p>=0){B[E]=p,h+=d*3;continue}B[E]=0;{var l=210+(p<<o.scalefac_scale+1);u=oe.IPOW20(l)}h+=d*(O+1);for(var f=-d;f<0;f++)w[h+f]*=u,w[h+f]>o.xrpow_max&&(o.xrpow_max=w[h+f]);h+=d*(3-O-1)}{var u=oe.IPOW20(202);h+=o.width[E]*(O+1);for(var f=-o.width[E];f<0;f++)w[h+f]*=u,w[h+f]>o.xrpow_max&&(o.xrpow_max=w[h+f])}}}return!1}function q(V,o,w,E,B){var O=V.internal_flags;N(V,o,w,E,B);var i=P(o);return i?!1:(O.mode_gr==2?i=Se.scale_bitcount(o):i=Se.scale_bitcount_lsf(O,o),i?(O.noise_shaping>1&&(kn.fill(O.pseudohalf,0),o.scalefac_scale==0?(r(o,E),i=!1):o.block_type==g.SHORT_TYPE&&O.subblock_gain>0&&(i=G(O,o,E)||P(o))),i||(O.mode_gr==2?i=Se.scale_bitcount(o):i=Se.scale_bitcount_lsf(O,o)),!i):!0)}this.outer_loop=function(V,o,w,E,B,O){var i=V.internal_flags,b=new F1,h=Wn(576),u=Wn(Ft.SFBMAX),d=new Or,p,l=new Nr,f=9999999,c=!1,C=!1,ie=0;if(Oe(i,o,O,B,E),i.noise_shaping==0)return 100;oe.calc_noise(o,w,u,d,l),d.bits=o.part2_3_length,b.assign(o);var F=0;for(tn.arraycopy(E,0,h,0,576);!c;){do{var U=new Or,s,_=255;if(i.substep_shaping&2?s=20:s=3,i.sfb21_extra&&(u[b.sfbmax]>1||b.block_type==g.SHORT_TYPE&&(u[b.sfbmax+1]>1||u[b.sfbmax+2]>1))||!q(V,b,u,E,C))break;b.scalefac_scale!=0&&(_=254);var ue=O-b.part2_length;if(ue<=0)break;for(;(b.part2_3_length=Se.count_bits(i,E,b,l))>ue&&b.global_gain<=_;)b.global_gain++;if(b.global_gain>_)break;if(d.over_count==0){for(;(b.part2_3_length=Se.count_bits(i,E,b,l))>f&&b.global_gain<=_;)b.global_gain++;if(b.global_gain>_)break}if(oe.calc_noise(b,w,u,U,l),U.bits=b.part2_3_length,o.block_type!=g.SHORT_TYPE?p=V.quant_comp:p=V.quant_comp_short,p=T(p,d,U,b,u)?1:0,p!=0)f=o.part2_3_length,d=U,o.assign(b),F=0,tn.arraycopy(E,0,h,0,576);else if(i.full_outer_loop==0&&(++F>s&&d.over_count==0||i.noise_shaping_amp==3&&C&&F>30||i.noise_shaping_amp==3&&C&&b.global_gain-ie>15))break}while(b.global_gain+b.scalefac_scale<255);i.noise_shaping_amp==3?C?c=!0:(b.assign(o),tn.arraycopy(h,0,E,0,576),F=0,ie=b.global_gain,C=!0):c=!0}return D0(o.global_gain+o.scalefac_scale<=255),V.VBR==Ma.vbr_rh||V.VBR==Ma.vbr_mtrh?tn.arraycopy(h,0,E,0,576):i.substep_shaping&1&&trancate_smallspectrums(i,o,w,E),d.over_count},this.iteration_finish_one=function(V,o,w){var E=V.l3_side,B=E.tt[o][w];Se.best_scalefac_store(V,o,w,E),V.use_best_huffman==1&&Se.best_huffman_divide(V,B),J.ResvAdjust(V,B)},this.VBR_encode_granule=function(V,o,w,E,B,O,i){var b=V.internal_flags,h=new F1,u=Wn(576),d=i,p=i+1,l=(i+O)/2,f,c,C=0,ie=b.sfb21_extra;D0(d<=LameInternalFlags.MAX_BITS_PER_CHANNEL),kn.fill(h.l3_enc,0);do l>d-42?b.sfb21_extra=!1:b.sfb21_extra=ie,c=outer_loop(V,o,w,E,B,l),c<=0?(C=1,p=o.part2_3_length,h.assign(o),tn.arraycopy(E,0,u,0,576),i=p-32,f=i-O,l=(i+O)/2):(O=l+32,f=i-O,l=(i+O)/2,C!=0&&(C=2,o.assign(h),tn.arraycopy(u,0,E,0,576)));while(f>12);b.sfb21_extra=ie,C==2&&tn.arraycopy(h.l3_enc,0,o.l3_enc,0,576),D0(o.part2_3_length<=d)},this.get_framebits=function(V,o){var w=V.internal_flags;w.bitrate_index=w.VBR_min_bitrate;var E=I.getframebits(V);w.bitrate_index=1,E=I.getframebits(V);for(var B=1;B<=w.VBR_max_bitrate;B++){w.bitrate_index=B;var O=new MeanBits(E);o[B]=J.ResvFrameBegin(V,O),E=O.bits}},this.VBR_old_prepare=function(V,o,w,E,B,O,i,b,h){var u=V.internal_flags,d,p=0,l=1,f=0;u.bitrate_index=u.VBR_max_bitrate;var c=J.ResvFrameBegin(V,new MeanBits(0))/u.mode_gr;get_framebits(V,O);for(var C=0;C<u.mode_gr;C++){var ie=oe.on_pe(V,o,b[C],c,C,0);u.mode_ext==g.MPG_MD_MS_LR&&(ms_convert(u.l3_side,C),oe.reduce_side(b[C],w[C],c,ie));for(var F=0;F<u.channels_out;++F){var U=u.l3_side.tt[C][F];U.block_type!=g.SHORT_TYPE?(p=1.28/(1+Math.exp(3.5-o[C][F]/300))-.05,d=u.PSY.mask_adjust-p):(p=2.56/(1+Math.exp(3.5-o[C][F]/300))-.14,d=u.PSY.mask_adjust_short-p),u.masking_lower=Math.pow(10,d*.1),init_outer_loop(u,U),h[C][F]=oe.calc_xmin(V,E[C][F],U,B[C][F]),h[C][F]!=0&&(l=0),i[C][F]=126,f+=b[C][F]}}for(var C=0;C<u.mode_gr;C++)for(var F=0;F<u.channels_out;F++)f>O[u.VBR_max_bitrate]&&(b[C][F]*=O[u.VBR_max_bitrate],b[C][F]/=f),i[C][F]>b[C][F]&&(i[C][F]=b[C][F]);return l},this.bitpressure_strategy=function(V,o,w,E){for(var B=0;B<V.mode_gr;B++)for(var O=0;O<V.channels_out;O++){for(var i=V.l3_side.tt[B][O],b=o[B][O],h=0,u=0;u<i.psy_lmax;u++)b[h++]*=1+.029*u*u/g.SBMAX_l/g.SBMAX_l;if(i.block_type==g.SHORT_TYPE)for(var u=i.sfb_smin;u<g.SBMAX_s;u++)b[h++]*=1+.029*u*u/g.SBMAX_s/g.SBMAX_s,b[h++]*=1+.029*u*u/g.SBMAX_s/g.SBMAX_s,b[h++]*=1+.029*u*u/g.SBMAX_s/g.SBMAX_s;E[B][O]=0|Math.max(w[B][O],.9*E[B][O])}},this.VBR_new_prepare=function(V,o,w,E,B,O){var i=V.internal_flags,b=1,h=0,u=0,d;if(V.free_format){i.bitrate_index=0;var p=new MeanBits(h);d=J.ResvFrameBegin(V,p),h=p.bits,B[0]=d}else{i.bitrate_index=i.VBR_max_bitrate;var p=new MeanBits(h);J.ResvFrameBegin(V,p),h=p.bits,get_framebits(V,B),d=B[i.VBR_max_bitrate]}for(var l=0;l<i.mode_gr;l++){oe.on_pe(V,o,O[l],h,l,0),i.mode_ext==g.MPG_MD_MS_LR&&ms_convert(i.l3_side,l);for(var f=0;f<i.channels_out;++f){var c=i.l3_side.tt[l][f];i.masking_lower=Math.pow(10,i.PSY.mask_adjust*.1),init_outer_loop(i,c),oe.calc_xmin(V,w[l][f],c,E[l][f])!=0&&(b=0),u+=O[l][f]}}for(var l=0;l<i.mode_gr;l++)for(var f=0;f<i.channels_out;f++)u>d&&(O[l][f]*=d,O[l][f]/=u);return b},this.calc_target_bits=function(V,o,w,E,B,O){var i=V.internal_flags,b=i.l3_side,h,u,d,p,l=0;i.bitrate_index=i.VBR_max_bitrate;var f=new MeanBits(l);for(O[0]=J.ResvFrameBegin(V,f),l=f.bits,i.bitrate_index=1,l=I.getframebits(V)-i.sideinfo_len*8,B[0]=l/(i.mode_gr*i.channels_out),l=V.VBR_mean_bitrate_kbps*V.framesize*1e3,i.substep_shaping&1&&(l*=1.09),l/=V.out_samplerate,l-=i.sideinfo_len*8,l/=i.mode_gr*i.channels_out,h=.93+.07*(11-V.compression_ratio)/(11-5.5),h<.9&&(h=.9),h>1&&(h=1),u=0;u<i.mode_gr;u++){var c=0;for(d=0;d<i.channels_out;d++){if(E[u][d]=int(h*l),o[u][d]>700){var C=int((o[u][d]-700)/1.4),ie=b.tt[u][d];E[u][d]=int(h*l),ie.block_type==g.SHORT_TYPE&&C<l/2&&(C=l/2),C>l*3/2?C=l*3/2:C<0&&(C=0),E[u][d]+=C}E[u][d]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(E[u][d]=LameInternalFlags.MAX_BITS_PER_CHANNEL),c+=E[u][d]}if(c>LameInternalFlags.MAX_BITS_PER_GRANULE)for(d=0;d<i.channels_out;++d)E[u][d]*=LameInternalFlags.MAX_BITS_PER_GRANULE,E[u][d]/=c}if(i.mode_ext==g.MPG_MD_MS_LR)for(u=0;u<i.mode_gr;u++)oe.reduce_side(E[u],w[u],l*i.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(p=0,u=0;u<i.mode_gr;u++)for(d=0;d<i.channels_out;d++)E[u][d]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(E[u][d]=LameInternalFlags.MAX_BITS_PER_CHANNEL),p+=E[u][d];if(p>O[0])for(u=0;u<i.mode_gr;u++)for(d=0;d<i.channels_out;d++)E[u][d]*=O[0],E[u][d]/=p}}var Ai=Q0,Ra=le.assert;function Mi(){var I;this.setModules=function(J){I=J},this.ResvFrameBegin=function(J,oe){var j=J.internal_flags,Se,ne=j.l3_side,_e=I.getframebits(J);oe.bits=(_e-j.sideinfo_len*8)/j.mode_gr;var Ce=8*256*j.mode_gr-8;J.brate>320?Se=8*int(J.brate*1e3/(J.out_samplerate/1152)/8+.5):(Se=8*1440,J.strict_ISO&&(Se=8*int(32e4/(J.out_samplerate/1152)/8+.5))),j.ResvMax=Se-_e,j.ResvMax>Ce&&(j.ResvMax=Ce),(j.ResvMax<0||J.disable_reservoir)&&(j.ResvMax=0);var Oe=oe.bits*j.mode_gr+Math.min(j.ResvSize,j.ResvMax);return Oe>Se&&(Oe=Se),Ra(j.ResvMax%8==0),Ra(j.ResvMax>=0),ne.resvDrain_pre=0,j.pinfo!=null&&(j.pinfo.mean_bits=oe.bits/2,j.pinfo.resvsize=j.ResvSize),Oe},this.ResvMaxBits=function(J,oe,j,Se){var ne=J.internal_flags,_e,Ce=ne.ResvSize,Oe=ne.ResvMax;Se!=0&&(Ce+=oe),ne.substep_shaping&1&&(Oe*=.9),j.bits=oe,Ce*10>Oe*9?(_e=Ce-Oe*9/10,j.bits+=_e,ne.substep_shaping|=128):(_e=0,ne.substep_shaping&=127,!J.disable_reservoir&&!(ne.substep_shaping&1)&&(j.bits-=.1*oe));var P=Ce<ne.ResvMax*6/10?Ce:ne.ResvMax*6/10;return P-=_e,P<0&&(P=0),P},this.ResvAdjust=function(J,oe){J.ResvSize-=oe.part2_3_length+oe.part2_length},this.ResvFrameEnd=function(J,oe){var j,Se=J.l3_side;J.ResvSize+=oe*J.mode_gr;var ne=0;Se.resvDrain_post=0,Se.resvDrain_pre=0,(j=J.ResvSize%8)!=0&&(ne+=j),j=J.ResvSize-ne-J.ResvMax,j>0&&(ne+=j);{var _e=Math.min(Se.main_data_begin*8,ne)/8;Se.resvDrain_pre+=8*_e,ne-=8*_e,J.ResvSize-=8*_e,Se.main_data_begin-=_e}Se.resvDrain_post+=ne,J.ResvSize-=ne}}var Ri=Mi;function Ei(){var I="http://www.mp3dev.org/",J=3,oe=98,j=4,Se=0,ne=93;this.getLameVersion=function(){return J+"."+oe+"."+j},this.getLameShortVersion=function(){return J+"."+oe+"."+j},this.getLameVeryShortVersion=function(){return"LAME"+J+"."+oe+"r"},this.getPsyVersion=function(){return Se+"."+ne},this.getLameUrl=function(){return I},this.getLameOsBitness=function(){return"32bits"}}var Ti=Ei,Ea=le.System,Vr=le.VbrMode,wt=le.ShortBlock,$r=le.Arrays,C1=le.new_byte,Ta=le.assert;vn.NUMTOCENTRIES=100,vn.MAXFRAMESIZE=2880;function vn(){var I,J,oe;this.setModules=function(l,f,c){I=l,J=f,oe=c};var j=1,Se=2,ne=4,_e=8,Ce=vn.NUMTOCENTRIES,Oe=vn.MAXFRAMESIZE,P=Ce+4+4+4+4+4,we=P+9+1+1+8+1+1+3+1+1+2+4+2+2,R=128,T=64,N=32,r=null,G="Xing",q="Info",V=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function o(l,f){if(l.nVbrNumFrames++,l.sum+=f,l.seen++,!(l.seen<l.want)&&(l.pos<l.size&&(l.bag[l.pos]=l.sum,l.pos++,l.seen=0),l.pos==l.size)){for(var c=1;c<l.size;c+=2)l.bag[c/2]=l.bag[c];l.want*=2,l.pos/=2}}function w(l,f){if(!(l.pos<=0))for(var c=1;c<Ce;++c){var C=c/Ce,ie,F,U=0|Math.floor(C*l.pos);U>l.pos-1&&(U=l.pos-1),ie=l.bag[U],F=l.sum;var s=0|256*ie/F;s>255&&(s=255),f[c]=255&s}}this.addVbrFrame=function(l){var f=l.internal_flags,c=Tables.bitrate_table[l.version][f.bitrate_index];Ta(f.VBR_seek_table.bag!=null),o(f.VBR_seek_table,c)};function E(l,f){var c=l[f+0]&255;return c<<=8,c|=l[f+1]&255,c<<=8,c|=l[f+2]&255,c<<=8,c|=l[f+3]&255,c}function B(l,f,c){l[f+0]=255&(c>>24&255),l[f+1]=255&(c>>16&255),l[f+2]=255&(c>>8&255),l[f+3]=255&(c&255)}function O(l,f,c){l[f+0]=255&(c>>8&255),l[f+1]=255&(c&255)}function i(l,f){return new String(l,f,G.length(),r).equals(G)||new String(l,f,q.length(),r).equals(q)}function b(l,f,c){return 255&(l<<f|c&~(-1<<f))}function h(l,f){var c=l.internal_flags;f[0]=b(f[0],8,255),f[1]=b(f[1],3,7),f[1]=b(f[1],1,l.out_samplerate<16e3?0:1),f[1]=b(f[1],1,l.version),f[1]=b(f[1],2,4-3),f[1]=b(f[1],1,l.error_protection?0:1),f[2]=b(f[2],4,c.bitrate_index),f[2]=b(f[2],2,c.samplerate_index),f[2]=b(f[2],1,0),f[2]=b(f[2],1,l.extension),f[3]=b(f[3],2,l.mode.ordinal()),f[3]=b(f[3],2,c.mode_ext),f[3]=b(f[3],1,l.copyright),f[3]=b(f[3],1,l.original),f[3]=b(f[3],2,l.emphasis),f[0]=255;var C=255&(f[1]&241),ie;l.version==1?ie=R:l.out_samplerate<16e3?ie=N:ie=T,l.VBR==Vr.vbr_off&&(ie=l.brate);var F;l.free_format?F=0:F=255&16*I.BitrateIndex(ie,l.version,l.out_samplerate),l.version==1?(f[1]=255&(C|10),C=255&(f[2]&13),f[2]=255&(F|C)):(f[1]=255&(C|2),C=255&(f[2]&13),f[2]=255&(F|C))}this.getVbrTag=function(l){var f=new VBRTagData,c=0;f.flags=0;var C=l[c+1]>>3&1,ie=l[c+2]>>2&3,F=l[c+3]>>6&3,U=l[c+2]>>4&15;if(U=Tables.bitrate_table[C][U],l[c+1]>>4==14?f.samprate=Tables.samplerate_table[2][ie]:f.samprate=Tables.samplerate_table[C][ie],C!=0?F!=3?c+=32+4:c+=17+4:F!=3?c+=17+4:c+=9+4,!i(l,c))return null;c+=4,f.hId=C;var s=f.flags=E(l,c);if(c+=4,s&j&&(f.frames=E(l,c),c+=4),s&Se&&(f.bytes=E(l,c),c+=4),s&ne){if(f.toc!=null)for(var _=0;_<Ce;_++)f.toc[_]=l[c+_];c+=Ce}f.vbrScale=-1,s&_e&&(f.vbrScale=E(l,c),c+=4),f.headersize=(C+1)*72e3*U/f.samprate,c+=21;var ue=l[c+0]<<4;ue+=l[c+1]>>4;var he=(l[c+1]&15)<<8;return he+=l[c+2]&255,(ue<0||ue>3e3)&&(ue=-1),(he<0||he>3e3)&&(he=-1),f.encDelay=ue,f.encPadding=he,f},this.InitVbrTag=function(l){var f=l.internal_flags,c;l.version==1?c=R:l.out_samplerate<16e3?c=N:c=T,l.VBR==Vr.vbr_off&&(c=l.brate);var C=(l.version+1)*72e3*c/l.out_samplerate,ie=f.sideinfo_len+we;if(f.VBR_seek_table.TotalFrameSize=C,C<ie||C>Oe){l.bWriteVbrTag=!1;return}f.VBR_seek_table.nVbrNumFrames=0,f.VBR_seek_table.nBytesWritten=0,f.VBR_seek_table.sum=0,f.VBR_seek_table.seen=0,f.VBR_seek_table.want=1,f.VBR_seek_table.pos=0,f.VBR_seek_table.bag==null&&(f.VBR_seek_table.bag=new int[400],f.VBR_seek_table.size=400);var F=C1(Oe);h(l,F);for(var U=f.VBR_seek_table.TotalFrameSize,s=0;s<U;++s)J.add_dummy_byte(l,F[s]&255,1)};function u(l,f){var c=f^l;return f=f>>8^V[c&255],f}this.updateMusicCRC=function(l,f,c,C){for(var ie=0;ie<C;++ie)l[0]=u(f[c+ie],l[0])};function d(l,f,c,C,ie){var F=l.internal_flags,U=0,s=l.encoder_delay,_=l.encoder_padding,ue=100-10*l.VBR_q-l.quality,he=oe.getLameVeryShortVersion(),Le,$e=0,ke,L=[1,5,3,2,4,0,3],ee=0|(l.lowpassfreq/100+.5>255?255:l.lowpassfreq/100+.5),Z=0,se=0,Xe=0,c0=l.internal_flags.noise_shaping,l0=0,_0=0,J0=0,it=0,q0=0,Gt=(l.exp_nspsytune&1)!=0,u1=(l.exp_nspsytune&2)!=0,vt=!1,qt=!1,I1=l.internal_flags.nogap_total,I0=l.internal_flags.nogap_current,Wt=l.ATHtype,an=0,f1;switch(l.VBR){case vbr_abr:f1=l.VBR_mean_bitrate_kbps;break;case vbr_off:f1=l.brate;break;default:f1=l.VBR_min_bitrate_kbps}switch(l.VBR.ordinal()<L.length?Le=L[l.VBR.ordinal()]:Le=0,ke=16*$e+Le,F.findReplayGain&&(F.RadioGain>510&&(F.RadioGain=510),F.RadioGain<-510&&(F.RadioGain=-510),se=8192,se|=3072,F.RadioGain>=0?se|=F.RadioGain:(se|=512,se|=-F.RadioGain)),F.findPeakSample&&(Z=Math.abs(0|F.PeakSample/32767*Math.pow(2,23)+.5)),I1!=-1&&(I0>0&&(qt=!0),I0<I1-1&&(vt=!0)),an=Wt+((Gt?1:0)<<4)+((u1?1:0)<<5)+((vt?1:0)<<6)+((qt?1:0)<<7),ue<0&&(ue=0),l.mode){case MONO:l0=0;break;case STEREO:l0=1;break;case DUAL_CHANNEL:l0=2;break;case JOINT_STEREO:l.force_ms?l0=4:l0=3;break;case NOT_SET:default:l0=7;break}l.in_samplerate<=32e3?J0=0:l.in_samplerate==48e3?J0=2:l.in_samplerate>48e3?J0=3:J0=1,(l.short_blocks==wt.short_block_forced||l.short_blocks==wt.short_block_dispensed||l.lowpassfreq==-1&&l.highpassfreq==-1||l.scale_left<l.scale_right||l.scale_left>l.scale_right||l.disable_reservoir&&l.brate<320||l.noATH||l.ATHonly||Wt==0||l.in_samplerate<=32e3)&&(_0=1),it=c0+(l0<<2)+(_0<<5)+(J0<<6),q0=F.nMusicCRC,B(c,C+U,ue),U+=4;for(var zt=0;zt<9;zt++)c[C+U+zt]=255&he.charAt(zt);U+=9,c[C+U]=255&ke,U++,c[C+U]=255&ee,U++,B(c,C+U,Z),U+=4,O(c,C+U,se),U+=2,O(c,C+U,Xe),U+=2,c[C+U]=255&an,U++,f1>=255?c[C+U]=255:c[C+U]=255&f1,U++,c[C+U]=255&s>>4,c[C+U+1]=255&(s<<4)+(_>>8),c[C+U+2]=255&_,U+=3,c[C+U]=255&it,U++,c[C+U++]=0,O(c,C+U,l.preset),U+=2,B(c,C+U,f),U+=4,O(c,C+U,q0),U+=2;for(var On=0;On<U;On++)ie=u(c[C+On],ie);return O(c,C+U,ie),U+=2,U}function p(l){l.seek(0);var f=C1(10);l.readFully(f);var c;return new String(f,"ISO-8859-1").startsWith("ID3")?c=0:c=((f[6]&127)<<21|(f[7]&127)<<14|(f[8]&127)<<7|f[9]&127)+f.length,c}this.getLameTagFrame=function(l,f){var c=l.internal_flags;if(!l.bWriteVbrTag||c.Class_ID!=P0.LAME_ID||c.VBR_seek_table.pos<=0)return 0;if(f.length<c.VBR_seek_table.TotalFrameSize)return c.VBR_seek_table.TotalFrameSize;$r.fill(f,0,c.VBR_seek_table.TotalFrameSize,0),h(l,f);var C=C1(Ce);if(l.free_format)for(var ie=1;ie<Ce;++ie)C[ie]=255&255*ie/100;else w(c.VBR_seek_table,C);var F=c.sideinfo_len;l.error_protection&&(F-=2),l.VBR==Vr.vbr_off?(f[F++]=255&q.charAt(0),f[F++]=255&q.charAt(1),f[F++]=255&q.charAt(2),f[F++]=255&q.charAt(3)):(f[F++]=255&G.charAt(0),f[F++]=255&G.charAt(1),f[F++]=255&G.charAt(2),f[F++]=255&G.charAt(3)),B(f,F,j+Se+ne+_e),F+=4,B(f,F,c.VBR_seek_table.nVbrNumFrames),F+=4;var U=c.VBR_seek_table.nBytesWritten+c.VBR_seek_table.TotalFrameSize;B(f,F,0|U),F+=4,Ea.arraycopy(C,0,f,F,C.length),F+=C.length,l.error_protection&&J.CRC_writeheader(c,f);for(var s=0,ie=0;ie<F;ie++)s=u(f[ie],s);return F+=d(l,U,f,F,s),c.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(l,f){var c=l.internal_flags;if(c.VBR_seek_table.pos<=0||(f.seek(f.length()),f.length()==0))return-1;var C=p(f);f.seek(C);var ie=C1(Oe),F=getLameTagFrame(l,ie);return F>ie.length?-1:(F<1||f.write(ie,0,F),0)}}var l1=vn,Fr=le.new_byte,Ba=le.assert,P0=ya,Ca=xi,In=Ht,ka=J1,Yt=Ai,Bi=Ir,o1=Ri,ct=Ot,k1=j1;function nn(){this.setModules=function(I,J){}}function pr(){this.setModules=function(I,J,oe){}}function Dr(){}function tt(){this.setModules=function(I,J){}}function rn(I,J,oe){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),I=1,J=44100,oe=128);var j=new P0,Se=new nn,ne=new In,_e=new k1,Ce=new Ca,Oe=new ka,P=new Yt,we=new l1,R=new Ti,T=new tt,N=new o1,r=new Bi,G=new pr,q=new Dr;j.setModules(ne,_e,Ce,Oe,P,we,R,T,q),_e.setModules(ne,q,R,we),T.setModules(_e,R),Ce.setModules(j),P.setModules(_e,N,Oe,r),Oe.setModules(r,N,j.enc.psy),N.setModules(_e),r.setModules(Oe),we.setModules(j,_e,R),Se.setModules(G,q),G.setModules(R,T,Ce);var V=j.lame_init();V.num_channels=I,V.in_samplerate=J,V.brate=oe,V.mode=ct.STEREO,V.quality=3,V.bWriteVbrTag=!1,V.disable_reservoir=!0,V.write_id3tag_automatic=!1,j.lame_init_params(V);var o=1152,w=0|1.25*o+7200,E=Fr(w);this.encodeBuffer=function(B,O){I==1&&(O=B),Ba(B.length==O.length),B.length>o&&(o=B.length,w=0|1.25*o+7200,E=Fr(w));var i=j.lame_encode_buffer(V,B,O,B.length,E,0,w);return new Int8Array(E.subarray(0,i))},this.flush=function(){var B=j.lame_encode_flush(V,E,0,w);return new Int8Array(E.subarray(0,B))}}function Ln(I){return I.charCodeAt(0)<<24|I.charCodeAt(1)<<16|I.charCodeAt(2)<<8|I.charCodeAt(3)}Ln("RIFF"),Ln("WAVE"),Ln("fmt "),Ln("data");var Ci=rn,br=function(I,J){if(!(I instanceof J))throw new TypeError("Cannot call a class as a function")},Ia=function(){function I(J,oe){for(var j=0;j<oe.length;j++){var Se=oe[j];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(J,Se.key,Se)}}return function(J,oe,j){return oe&&I(J.prototype,oe),j&&I(J,j),J}}(),ki=function(){function I(J){br(this,I),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,J),this.mp3Encoder=new Ci(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return Ia(I,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(oe){this.dataBuffer.push(new Int8Array(oe))}},{key:"floatTo16BitPCM",value:function(oe,j){for(var Se=0;Se<oe.length;Se++){var ne=Math.max(-1,Math.min(1,oe[Se]));j[Se]=ne<0?ne*32768:ne*32767}}},{key:"convertBuffer",value:function(oe){var j=new Float32Array(oe),Se=new Int16Array(oe.length);return this.floatTo16BitPCM(j,Se),Se}},{key:"encode",value:function(oe){this.samplesMono=this.convertBuffer(oe);for(var j=this.samplesMono.length,Se=0;j>=0;Se+=this.maxSamples){var ne=this.samplesMono.subarray(Se,Se+this.maxSamples),_e=this.mp3Encoder.encodeBuffer(ne);this.appendToBuffer(_e),j-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),I}(),Ii=function(){function I(J){br(this,I),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,J)}return Ia(I,[{key:"addMicrophoneListener",value:function(oe){var j=this;this.activeStream=oe,this.timerToStart=setTimeout(function(){delete j.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(oe),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(Se){j.timerToStart||j.lameEncoder.encode(Se.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(oe){return oe.stop()})),this}},{key:"start",value:function(){var oe=this,j=window.AudioContext||window.webkitAudioContext;this.context=new j,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new ki(this.config);var Se=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(ne,_e){navigator.mediaDevices.getUserMedia({audio:Se}).then(function(Ce){oe.addMicrophoneListener(Ce),ne(Ce)}).catch(function(Ce){_e(Ce)})})}},{key:"getMp3",value:function(){var oe=this,j=this.lameEncoder.finish();return new Promise(function(Se,ne){j.length===0?ne(new Error("No buffer to send")):(Se([j,new Blob(j,{type:"audio/mp3"})]),oe.lameEncoder.clearBuffer())})}}]),I}();return Ii})})(A2);var pf=A2.exports;const bf=nf(pf),xf={key:0,class:"flex justify-center items-center w-full px-6 md:px-4"},wf={class:"flex items-start space-x-4 bg-orange-100 rounded-lg p-2 mb-2 px-4"},yf={class:"text-sm"},gf={class:"text-sm"},Sf={key:1,class:"flex justify-center items-center w-full px-6 md:px-4"},Af={class:"flex items-center justify-between space-x-4 bg-orange-100 rounded-lg p-2 mb-2 px-4"},Mf={class:"flex items-start justify-between space-x-4"},Rf={class:"text-sm"},Ef={class:"text-sm"},Tf={class:"absolute"},Bf=["onKeydown","placeholder","disabled"],Cf=["accept"],kf=["disabled"],If={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Lf={class:"bg-white rounded-md w-full p-4"},Of=["onKeydown","placeholder","disabled"],Nf=["accept"],Hf={key:0,class:"bg-slate-50 rounded-lg border px-2 mb-2"},Vf={class:"flex items-center justify-between"},$f={class:"flex items-center"},Ff={class:"text-red-500 mr-2"},Df={key:0,class:"animate-pulse"},Pf={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},qf={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Xf={key:0,class:"text-sm"},Zf={key:1,class:"text-sm"},Uf={class:"flex gap-2"},Yf=["src"],Gf={class:"flex gap-x-4 items-center text-gray-600"},Wf={class:"flex gap-x-4 text-sm items-center"},zf={class:"absolute"},Kf={class:"ms-[-5px]"},Qf={key:1,class:"text-[14px] flex items-center gap-2 bg-gray-100 p-1 px-2 rounded-md"},Jf={class:"ml-auto"},jf=["disabled"],ec={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},tc={__name:"ChatForm",props:["contact","chatLimitReached","simpleForm"],emits:["response","viewTemplate"],setup(W,{emit:be}){const m=e0(null),Ne=W,de=e0(null),He=e0(!1),Be=e0(null),We=e0(!1);e0(null);const i0=e0([]),u0=e0(0),s0=e0(null),Qe=e0(0),E0=e0(null),S0=e0(0),Ue=e0(null),qe=e0(!1),xe=e0(null),X=e0(!1),le=e0({uuid:Ne.contact.uuid,message:null,type:null,file:null}),f0=e0({uuid:Ne.contact.uuid,message:null,type:null,file:null}),r0=e0(!1),V0=e0(null);w2(()=>{le.value.uuid=Ne.contact.uuid});const rt=be,G0=()=>{rt("viewTemplate",!0)},M0=async()=>{if(le.value.message=Be.value,de.value=!0,le.value.message!=null||le.value.file!=null){const a0=new FormData;a0.append("message",le.value.message),a0.append("type",le.value.type),a0.append("uuid",le.value.uuid),le.value.file&&a0.append("file",le.value.file);try{const ye=await Cr.post("/chats",a0);X.value==!0&&await $0(),le.value.message=null,Be.value=null,le.value.file=null,de.value=!1}catch{}}else X.value==!0&&await $0(),de.value=!1},$0=async()=>{const a0=new FormData;a0.append("type",f0.value.type),a0.append("uuid",f0.value.uuid),f0.value.file&&a0.append("file",f0.value.file);try{const ye=await Cr.post("/chats",a0);X.value==!0&&Ut()}catch{}},z0=e0(null),mt=()=>{const a0=z0.value;a0.style.height="auto",a0.style.height=a0.scrollHeight+"px"},kt=a0=>{Be.value!=null&&Be.value.trim()!=""&&M0()},Et=si(()=>{if(Ne.contact.last_inbound_chat){const a0=new Date(Ne.contact.last_inbound_chat.created_at);return new Date-a0<24*60*60*1e3}return!1}),A0=a0=>{const ye=a0.target.files[0],Ke=new FileReader;Ke.onload=T1=>{le.value.file=ye,M0()},Ke.readAsDataURL(ye)},ze=()=>{switch(le.value.type){case"image":return".jpg, .png";case"document":return".txt, .pdf, .ppt, .doc, .xls, .docx, .pptx, .xlsx";case"audio":return".mp3, .ogg";case"video":return".mp4";default:return""}},K0=a0=>{a0.stopPropagation(),r0.value=!r0.value},w0=()=>{r0.value=!1},pt=a0=>{const ye=z0.value,Ke=Be.value||"",T1=ye.selectionStart||0,L0=ye.selectionEnd||0,lt=Ke.substring(0,T1)+a0.i+Ke.substring(L0);Be.value=lt,setTimeout(()=>{ye.focus(),ye.setSelectionRange(T1+a0.i.length,T1+a0.i.length)},0)},d1=a0=>{V0.value&&!V0.value.contains(a0.target)&&!z0.value.contains(a0.target)&&w0()},r1=async()=>{try{X.value=!0,await m.value.start(),We.value=!0,g()}catch(a0){console.error("Error accessing microphone:",a0)}},bt=async()=>{if(We.value)try{const[a0,ye]=await m.value.stop().getMp3(),Ke=new File(a0,"audio-message.mp3",{type:ye.type,lastModified:Date.now()});Ue.value=URL.createObjectURL(ye),f0.value.type="audio",f0.value.file=Ke,We.value=!1,m1()}catch(a0){console.error("Error stopping recording:",a0)}},Ut=()=>{Ue.value&&URL.revokeObjectURL(Ue.value),Ue.value=null,u0.value=0,Qe.value=0,S0.value=0,i0.value=[],f0.value.type=null,f0.value.file=null,W1()},v0=()=>{xe.value&&(qe.value?(xe.value.pause(),W1()):(xe.value.play(),It()),qe.value=!qe.value)},g=()=>{u0.value=0,s0.value=setInterval(()=>{u0.value++},1e3)},It=()=>{Qe.value=0,E0.value=setInterval(()=>{xe.value&&(Qe.value=Math.floor(xe.value.currentTime))},100)},m1=()=>{s0.value&&(clearInterval(s0.value),s0.value=null)},W1=()=>{E0.value&&(clearInterval(E0.value),E0.value=null)},a1=a0=>{const ye=Math.floor(a0/60),Ke=a0%60;return`${ye.toString().padStart(2,"0")}:${Ke.toString().padStart(2,"0")}`},Lt=async()=>{var a0,ye;He.value=!0;try{const Ke=await Cr.get("/automation/chat/suggestion",{params:{contact:Ne.contact.uuid}});Ke.data.success?(le.value.type="text",Be.value=Ke.data.data.text):console.error("Failed to get suggestion:",Ke.data.message)}catch(Ke){console.error("Error getting suggestion:",((ye=(a0=Ke.response)==null?void 0:a0.data)==null?void 0:ye.message)||Ke.message)}finally{He.value=!1}};return ia(()=>{document.addEventListener("click",d1),m.value=new bf({bitRate:128})}),Bs(()=>{document.removeEventListener("click",d1),m1(),W1(),Ue.value&&URL.revokeObjectURL(Ue.value)}),(a0,ye)=>(fe(),me(G1,null,[Ne.chatLimitReached?(fe(),me("div",xf,[M("div",wf,[ye[21]||(ye[21]=R1('<span class="text-red-700"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 36 36"><path fill="currentColor" d="M18 21.32a1.3 1.3 0 0 0 1.3-1.3V14a1.3 1.3 0 1 0-2.6 0v6a1.3 1.3 0 0 0 1.3 1.32Z" class="clr-i-outline clr-i-outline-path-1"></path><circle cx="17.95" cy="24.27" r="1.5" fill="currentColor" class="clr-i-outline clr-i-outline-path-2"></circle><path fill="currentColor" d="M30.33 25.54L20.59 7.6a3 3 0 0 0-5.27 0L5.57 25.54A3 3 0 0 0 8.21 30h19.48a3 3 0 0 0 2.64-4.43Zm-1.78 1.94a1 1 0 0 1-.86.49H8.21a1 1 0 0 1-.88-1.48l9.74-17.94a1 1 0 0 1 1.76 0l9.74 17.94a1 1 0 0 1-.02.99Z" class="clr-i-outline clr-i-outline-path-3"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></span>',1)),M("div",null,[M("div",yf,Fe(a0.$t("Maximum chat limit reached")),1),M("div",gf,Fe(a0.$t("You have reached the maximum chat limit for your subscription! Please upgrade to send/receive more messages")),1)])])])):Ge("",!0),!Et.value&&!Ne.chatLimitReached?(fe(),me("div",Sf,[M("div",Af,[M("div",Mf,[ye[22]||(ye[22]=R1('<span class="text-red-700"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 36 36"><path fill="currentColor" d="M18 21.32a1.3 1.3 0 0 0 1.3-1.3V14a1.3 1.3 0 1 0-2.6 0v6a1.3 1.3 0 0 0 1.3 1.32Z" class="clr-i-outline clr-i-outline-path-1"></path><circle cx="17.95" cy="24.27" r="1.5" fill="currentColor" class="clr-i-outline clr-i-outline-path-2"></circle><path fill="currentColor" d="M30.33 25.54L20.59 7.6a3 3 0 0 0-5.27 0L5.57 25.54A3 3 0 0 0 8.21 30h19.48a3 3 0 0 0 2.64-4.43Zm-1.78 1.94a1 1 0 0 1-.86.49H8.21a1 1 0 0 1-.88-1.48l9.74-17.94a1 1 0 0 1 1.76 0l9.74 17.94a1 1 0 0 1-.02.99Z" class="clr-i-outline clr-i-outline-path-3"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></span>',1)),M("div",null,[M("div",Rf,Fe(a0.$t("24 hour limit")),1),M("div",Ef,Fe(a0.$t("Whatsapp does not allow sending messages 24 hours after they last messaged you. However, you can send them a template message")),1)])]),M("button",{onClick:ye[0]||(ye[0]=Ke=>G0()),class:"rounded-md bg-primary px-3 py-1 text-sm text-white shadow-sm w-[25%]"}," Send Template ")])])):Ge("",!0),W.simpleForm&&Et.value&&!Ne.chatLimitReached&&!Ne.contact.is_blocked?(fe(),me("form",{key:2,onSubmit:ye[9]||(ye[9]=ur(Ke=>M0(),["prevent"])),class:"flex items-center px-2 md:px-10 space-x-2"},[M("div",{class:Mt(["flex items-center w-full rounded-lg py-4 md:py-2 pl-2 pr-2",de.value?"bg-gray-200":"bg-white"])},[M("div",Tf,[M("button",{type:"button",onClick:K0},"  "),r0.value?(fe(),me("div",{key:0,class:"absolute left-0 bottom-full",ref_key:"emojiPickerRef",ref:V0},[st(nt(h2),{native:!0,onSelect:pt})],512)):Ge("",!0)]),Rs(M("textarea",{ref_key:"textInputRef",ref:z0,onFocus:ye[1]||(ye[1]=Ke=>le.value.type="text"),onKeydown:v2(ur(kt,["exact","prevent"]),["enter"]),class:Mt(["w-full ml-3 outline-none resize-none text-sm md:text-base pl-6",de.value?"bg-gray-200":"bg-white"]),"onUpdate:modelValue":ye[2]||(ye[2]=Ke=>Be.value=Ke),onInput:mt,type:"text",rows:"1",placeholder:a0.$t("Type your message..."),disabled:de.value},"      ",42,Bf),[[Es,Be.value]]),M("input",{type:"file",class:"sr-only",accept:ze(),id:"file-upload",onChange:ye[3]||(ye[3]=Ke=>A0(Ke))},null,40,Cf),M("label",{onClick:ye[4]||(ye[4]=Ke=>le.value.type="image"),for:"file-upload",class:"text-slate-500 mr-2 cursor-pointer"},[...ye[23]||(ye[23]=[R1('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M6.5 8a2 2 0 1 0 4 0a2 2 0 0 0-4 0Zm14.427 1.99c-6.61-.908-12.31 4-11.927 10.51"></path><path d="M3 13.066c2.78-.385 5.275.958 6.624 3.1"></path><path d="M3 12c0-4.243 0-6.364 1.318-7.682C5.636 3 7.758 3 12 3c4.243 0 6.364 0 7.682 1.318C21 5.636 21 7.758 21 12c0 4.243 0 6.364-1.318 7.682C18.364 21 16.242 21 12 21c-4.243 0-6.364 0-7.682-1.318C3 18.364 3 16.242 3 12Z"></path></g></svg>',1)])]),M("label",{onClick:ye[5]||(ye[5]=Ke=>le.value.type="document"),for:"file-upload",class:"text-slate-500 mr-1 cursor-pointer"},[...ye[24]||(ye[24]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[M("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[M("path",{d:"M3 10c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172C21 4.343 21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828C18.657 22 16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172C3 19.657 3 17.771 3 14v-4Z"}),M("path",{"stroke-linecap":"round",d:"M8 10h8m-8 4h5"})])],-1)])]),M("label",{onClick:ye[6]||(ye[6]=Ke=>le.value.type="audio"),for:"file-upload",class:"text-slate-500 mr-1 cursor-pointer"},[...ye[25]||(ye[25]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 1024 1024"},[M("path",{fill:"currentColor",d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92z"})],-1)])]),M("label",{onClick:ye[7]||(ye[7]=Ke=>le.value.type="video"),for:"file-upload",class:"text-slate-500 mr-2 cursor-pointer"},[...ye[26]||(ye[26]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 32 32"},[M("path",{fill:"currentColor",d:"M6.5 5.5A4.5 4.5 0 0 0 2 10v12a4.5 4.5 0 0 0 4.5 4.5h12A4.5 4.5 0 0 0 23 22v-1.5l4.2 3.15c1.153.865 2.8.042 2.8-1.4V9.75c0-1.442-1.647-2.265-2.8-1.4L23 11.5V10a4.5 4.5 0 0 0-4.5-4.5zM23 14l5-3.75v11.5L23 18zm-2-4v12a2.5 2.5 0 0 1-2.5 2.5h-12A2.5 2.5 0 0 1 4 22V10a2.5 2.5 0 0 1 2.5-2.5h12A2.5 2.5 0 0 1 21 10"})],-1)])]),M("label",{onClick:ye[8]||(ye[8]=Ke=>G0()),class:"text-slate-500 mr-4 cursor-pointer"},[...ye[27]||(ye[27]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 256 256"},[M("path",{fill:"currentColor",d:"M216 80h-32V48a16 16 0 0 0-16-16H40a16 16 0 0 0-16 16v128a8 8 0 0 0 13 6.22L72 154v30a16 16 0 0 0 16 16h93.59L219 230.22a8 8 0 0 0 5 1.78a8 8 0 0 0 8-8V96a16 16 0 0 0-16-16M66.55 137.78L40 159.25V48h128v88H71.58a8 8 0 0 0-5.03 1.78M216 207.25l-26.55-21.47a8 8 0 0 0-5-1.78H88v-32h80a16 16 0 0 0 16-16V96h32Z"})],-1)])]),M("button",{class:"flex items-center",type:"submit",disabled:Be.value===null||Be.value.trim()===""||de.value},[de.value?(fe(),me("svg",If,[...ye[29]||(ye[29]=[R1('<circle cx="12" cy="2" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(45 12 12)"><animate attributeName="r" begin="0.125s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(90 12 12)"><animate attributeName="r" begin="0.25s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(135 12 12)"><animate attributeName="r" begin="0.375s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(180 12 12)"><animate attributeName="r" begin="0.5s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(225 12 12)"><animate attributeName="r" begin="0.625s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(270 12 12)"><animate attributeName="r" begin="0.75s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(315 12 12)"><animate attributeName="r" begin="0.875s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle>',8)])])):(fe(),me("svg",{key:0,class:Mt(Be.value===null||Be.value.trim()===""?"text-slate-300":"text-black"),xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 16 16"},[...ye[28]||(ye[28]=[M("path",{fill:"currentColor",d:"M1.724 1.053a.5.5 0 0 0-.714.545l1.403 4.85a.5.5 0 0 0 .397.354l5.69.953c.268.053.268.437 0 .49l-5.69.953a.5.5 0 0 0-.397.354l-1.403 4.85a.5.5 0 0 0 .714.545l13-6.5a.5.5 0 0 0 0-.894l-13-6.5Z"},null,-1)])],2))],8,kf)],2)],32)):Ge("",!0),!W.simpleForm&&Et.value&&!Ne.chatLimitReached&&!Ne.contact.is_blocked?(fe(),me("form",{key:3,onSubmit:ye[20]||(ye[20]=ur(Ke=>M0(),["prevent"])),class:"flex items-center px-2 md:px-10 space-x-2"},[M("div",Lf,[M("div",null,[Rs(M("textarea",{ref_key:"textInputRef",ref:z0,onFocus:ye[10]||(ye[10]=Ke=>le.value.type="text"),onKeydown:v2(ur(kt,["exact","prevent"]),["enter"]),class:Mt(["w-full outline-none resize-none text-sm rounded-md p-2",de.value?"bg-gray-100":"bg-white"]),"onUpdate:modelValue":ye[11]||(ye[11]=Ke=>Be.value=Ke),onInput:mt,type:"text",rows:"3",placeholder:a0.$t("Type your message..."),disabled:de.value},"        ",42,Of),[[Es,Be.value]]),M("input",{type:"file",class:"sr-only",accept:ze(),id:"file-upload",onChange:ye[12]||(ye[12]=Ke=>A0(Ke))},null,40,Nf)]),We.value||Ue.value?(fe(),me("div",Hf,[M("div",Vf,[M("div",$f,[M("span",Ff,[We.value?(fe(),me("span",Df,[...ye[30]||(ye[30]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("circle",{cx:"12",cy:"12",r:"7",fill:"red",opacity:"0.5"}),M("path",{fill:"#fee2e2","fill-rule":"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10m0-3a7 7 0 1 0 0-14a7 7 0 0 0 0 14","clip-rule":"evenodd"})],-1)])])):Ge("",!0),Ue.value?(fe(),me("span",{key:1,onClick:v0},[qe.value?(fe(),me("svg",qf,[...ye[32]||(ye[32]=[M("path",{fill:"none",stroke:"red","stroke-linecap":"round","stroke-width":"1.5",d:"M2 18c0 1.886 0 2.828.586 3.414S4.114 22 6 22s2.828 0 3.414-.586S10 19.886 10 18V6c0-1.886 0-2.828-.586-3.414S7.886 2 6 2s-2.828 0-3.414.586S2 4.114 2 6v8m20-8c0-1.886 0-2.828-.586-3.414S19.886 2 18 2s-2.828 0-3.414.586S14 4.114 14 6v12c0 1.886 0 2.828.586 3.414S16.114 22 18 22s2.828 0 3.414-.586S22 19.886 22 18v-8"},null,-1)])])):(fe(),me("svg",Pf,[...ye[31]||(ye[31]=[M("path",{fill:"#22c55e",stroke:"#22c55e","stroke-linecap":"round","stroke-width":"1.5",d:"M3 12v6.967c0 2.31 2.534 3.769 4.597 2.648l3.203-1.742M3 8V5.033c0-2.31 2.534-3.769 4.597-2.648l12.812 6.968a2.998 2.998 0 0 1 0 5.294l-6.406 3.484"},null,-1)])]))])):Ge("",!0)]),We.value?(fe(),me("span",Xf,Fe(a1(u0.value)),1)):(fe(),me("span",Zf,Fe(a1(Qe.value))+" / "+Fe(a1(u0.value)),1))]),M("div",Uf,[We.value?(fe(),me("button",{key:0,onClick:bt,class:"p-2 rounded-full hover:bg-red-100",title:"Stop Recording"},[...ye[33]||(ye[33]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("path",{fill:"red",stroke:"red","stroke-width":"1.5",d:"M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"})],-1)])])):Ge("",!0),Ue.value?(fe(),me("button",{key:1,onClick:Ut,class:"p-2 rounded-full hover:bg-red-100 text-red-500",title:"Delete Recording"},[...ye[34]||(ye[34]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("path",{fill:"none",stroke:"red","stroke-linecap":"round","stroke-width":"1.5",d:"M9.17 4a3.001 3.001 0 0 1 5.66 0m5.67 2h-17m14.874 9.4c-.177 2.654-.266 3.981-1.131 4.79s-2.195.81-4.856.81h-.774c-2.66 0-3.99 0-4.856-.81c-.865-.809-.953-2.136-1.13-4.79l-.46-6.9m13.666 0l-.2 3M9.5 11l.5 5m4.5-5l-.5 5"})],-1)])])):Ge("",!0)])]),M("audio",{ref_key:"audioPlayer",ref:xe,src:Ue.value,onEnded:ye[13]||(ye[13]=Ke=>qe.value=!1),class:"hidden"},null,40,Yf)])):Ge("",!0),M("div",Gf,[M("div",{onClick:ye[14]||(ye[14]=Ke=>G0()),class:"flex gap-x-1 text-sm items-center"},[ye[35]||(ye[35]=M("span",null,[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 256 256"},[M("path",{fill:"currentColor",d:"M216 80h-32V48a16 16 0 0 0-16-16H40a16 16 0 0 0-16 16v128a8 8 0 0 0 13 6.22L72 154v30a16 16 0 0 0 16 16h93.59L219 230.22a8 8 0 0 0 5 1.78a8 8 0 0 0 8-8V96a16 16 0 0 0-16-16M66.55 137.78L40 159.25V48h128v88H71.58a8 8 0 0 0-5.03 1.78M216 207.25l-26.55-21.47a8 8 0 0 0-5-1.78H88v-32h80a16 16 0 0 0 16-16V96h32Z"})])],-1)),M("button",null,Fe(a0.$t("Templates")),1)]),ye[46]||(ye[46]=M("div",null,"|",-1)),M("div",Wf,[M("div",null,[M("button",{type:"button",class:"py-1",onClick:K0},[...ye[36]||(ye[36]=[M("span",null,[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[M("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.111 2.18a7 7 0 1 1 7.778 11.64A7 7 0 0 1 4.11 2.18zm.556 10.809a6 6 0 1 0 6.666-9.978a6 6 0 0 0-6.666 9.978M6.5 7a1 1 0 1 1-2 0a1 1 0 0 1 2 0m5 0a1 1 0 1 1-2 0a1 1 0 0 1 2 0M8 11a3 3 0 0 1-2.65-1.58l-.87.48a4 4 0 0 0 7.12-.16l-.9-.43A3 3 0 0 1 8 11","clip-rule":"evenodd"})])],-1)])]),M("div",zf,[r0.value?(fe(),me("div",{key:0,class:"absolute left-0 bottom-full",ref_key:"emojiPickerRef",ref:V0},[st(nt(h2),{native:!0,onSelect:pt})],512)):Ge("",!0)])]),M("div",null,[M("label",{class:"py-1 cursor-pointer",onClick:ye[15]||(ye[15]=Ke=>le.value.type="document"),for:"file-upload"},[...ye[37]||(ye[37]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 56 56"},[M("path",{fill:"currentColor",d:"M44.09 28.867L26.863 46.094c-4.476 4.5-10.5 4.054-14.343.164c-3.867-3.844-4.313-9.82.187-14.32L36.191 8.453c2.696-2.695 6.657-3.07 9.235-.515c2.555 2.601 2.18 6.539-.492 9.234L21.988 40.14c-1.171 1.195-2.554.843-3.375.047c-.796-.82-1.125-2.18.047-3.376l16.031-16.007c.704-.727.75-1.758.07-2.438c-.679-.656-1.71-.61-2.413.094L16.246 34.563c-2.39 2.39-2.297 6.046-.187 8.156c2.297 2.297 5.789 2.25 8.18-.164l23.085-23.063c4.383-4.383 4.172-10.148.375-13.969c-3.75-3.726-9.586-4.007-13.992.375L10.082 29.547c-5.789 5.789-5.344 14.062-.117 19.289c5.227 5.203 13.5 5.648 19.289-.117l17.344-17.344c.703-.68.68-1.922-.024-2.555c-.68-.726-1.78-.633-2.484.047"})],-1)])])]),M("div",null,[M("label",{onClick:ye[16]||(ye[16]=Ke=>le.value.type="audio"),class:"py-1 cursor-pointer",for:"file-upload"},[...ye[38]||(ye[38]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[M("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[M("path",{d:"M9 19a3 3 0 1 1-6 0a3 3 0 0 1 6 0Zm12-2a3 3 0 1 1-6 0a3 3 0 0 1 6 0ZM9 19V8m12 9V6"}),M("path",{"stroke-linecap":"round",d:"m15.735 3.755l-4 1.333c-1.32.44-1.98.66-2.357 1.184S9 7.492 9 8.882V12l12-4v-.45c0-2.533 0-3.8-.83-4.398c-.831-.599-2.032-.198-4.435.603Z"})])],-1)])])]),M("div",null,[M("label",{onClick:ye[17]||(ye[17]=Ke=>le.value.type="video"),class:"py-1 cursor-pointer",for:"file-upload"},[...ye[39]||(ye[39]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 32 32"},[M("path",{fill:"currentColor",d:"M6.5 5.5A4.5 4.5 0 0 0 2 10v12a4.5 4.5 0 0 0 4.5 4.5h12A4.5 4.5 0 0 0 23 22v-1.5l4.2 3.15c1.153.865 2.8.042 2.8-1.4V9.75c0-1.442-1.647-2.265-2.8-1.4L23 11.5V10a4.5 4.5 0 0 0-4.5-4.5zM23 14l5-3.75v11.5L23 18zm-2-4v12a2.5 2.5 0 0 1-2.5 2.5h-12A2.5 2.5 0 0 1 4 22V10a2.5 2.5 0 0 1 2.5-2.5h12A2.5 2.5 0 0 1 21 10"})],-1)])])]),M("div",null,[M("label",{class:"py-1 cursor-pointer",onClick:ye[18]||(ye[18]=Ke=>le.value.type="image"),for:"file-upload"},[...ye[40]||(ye[40]=[R1('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M6.5 8a2 2 0 1 0 4 0a2 2 0 0 0-4 0Zm14.427 1.99c-6.61-.908-12.31 4-11.927 10.51"></path><path d="M3 13.066c2.78-.385 5.275.958 6.624 3.1"></path><path d="M3 12c0-4.243 0-6.364 1.318-7.682C5.636 3 7.758 3 12 3c4.243 0 6.364 0 7.682 1.318C21 5.636 21 7.758 21 12c0 4.243 0 6.364-1.318 7.682C18.364 21 16.242 21 12 21c-4.243 0-6.364 0-7.682-1.318C3 18.364 3 16.242 3 12Z"></path></g></svg>',1)])])])]),ye[47]||(ye[47]=M("div",null,"|",-1)),!We.value&&!Ue.value?(fe(),me("button",{key:0,type:"button",class:"py-1 cursor-pointer relative",onClick:r1},[...ye[41]||(ye[41]=[M("span",{class:"relative"},[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 1024 1024"},[M("path",{fill:"currentColor",d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92z"})])],-1)])])):Ge("",!0),M("div",Kf,[He.value?(fe(),me("div",Qf,[M("span",null,Fe(a0.$t("Searching for suggestions")),1),ye[43]||(ye[43]=R1('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="18" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin=".67" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin=".33" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="6" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle></svg>',1))])):(fe(),me("button",{key:0,class:"text-[14px] flex items-center gap-2 hover:bg-gray-100 p-1 rounded-md",type:"button",onClick:ye[19]||(ye[19]=Ke=>Lt())},[ye[42]||(ye[42]=R1('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" color="#000"><path d="m7 8l2.942 1.74c1.715 1.014 2.4 1.014 4.116 0L17 8"></path><path d="M21.984 12.976c.021-.986.021-1.966 0-2.952c-.065-3.065-.098-4.598-1.229-5.733c-1.131-1.136-2.705-1.175-5.854-1.254a115 115 0 0 0-5.802 0c-3.149.079-4.723.118-5.854 1.254c-1.131 1.135-1.164 2.668-1.23 5.733a69 69 0 0 0 0 2.952c.066 3.065.099 4.598 1.23 5.733c1.131 1.136 2.705 1.175 5.854 1.254c1.305.033 2.601.044 3.901.033"></path><path d="m18.5 14l.258.697c.338.914.507 1.371.84 1.704c.334.334.791.503 1.705.841L22 17.5l-.697.258c-.914.338-1.371.507-1.704.84c-.334.334-.503.791-.841 1.705L18.5 21l-.258-.697c-.338-.914-.507-1.371-.84-1.704c-.334-.334-.791-.503-1.705-.841L15 17.5l.697-.258c.914-.338 1.371-.507 1.704-.84c.334-.334.503-.791.841-1.705z"></path></g></svg>',1)),M("span",null,Fe(a0.$t("AI Assist")),1)]))]),M("div",Jf,[M("button",{class:"flex items-center gap-x-2 p-1 px-2 rounded-md border border-gray-400 text-sm",disabled:(Be.value===null||Be.value.trim()==="")&&!f0.value.file},[M("span",{class:Mt((Be.value===null||Be.value.trim()==="")&&!f0.value.file?"text-slate-300":"text-black")},"Send",2),M("div",null,[de.value?(fe(),me("svg",ec,[...ye[45]||(ye[45]=[R1('<circle cx="12" cy="2" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(45 12 12)"><animate attributeName="r" begin="0.125s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(90 12 12)"><animate attributeName="r" begin="0.25s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(135 12 12)"><animate attributeName="r" begin="0.375s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(180 12 12)"><animate attributeName="r" begin="0.5s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(225 12 12)"><animate attributeName="r" begin="0.625s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(270 12 12)"><animate attributeName="r" begin="0.75s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(315 12 12)"><animate attributeName="r" begin="0.875s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle>',8)])])):(fe(),me("svg",{key:0,class:Mt((Be.value===null||Be.value.trim()==="")&&!f0.value.file?"text-slate-300":"text-black"),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[...ye[44]||(ye[44]=[M("path",{fill:"currentColor",d:"M1.724 1.053a.5.5 0 0 0-.714.545l1.403 4.85a.5.5 0 0 0 .397.354l5.69.953c.268.053.268.437 0 .49l-5.69.953a.5.5 0 0 0-.397.354l-1.403 4.85a.5.5 0 0 0 .714.545l13-6.5a.5.5 0 0 0 0-.894l-13-6.5Z"},null,-1)])],2))])],8,jf)])])])],32)):Ge("",!0)],64))}},nc={class:"h-20 bg-white border-b border-1 flex items-center justify-between px-4 md:px-4"},rc={class:"flex items-center gap-x-4 cursor-pointer w-3/4"},ac=["src"],ic={key:1,class:"rounded-full w-10 h-10 flex items-center justify-center bg-slate-100"},sc={class:"flex items-center w-full gap-x-8"},lc={class:"w-full flex items-center text-xs"},oc={class:"flex items-center space-x-4"},uc={key:0,class:"flex justify-between items-center bg-white border-b border-1 py-2 px-4 md:px-4"},fc={class:"flex items-center gap-x-2"},cc={class:"text-[13px]"},_c={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},vc={class:"mt-4 flex"},hc=["disabled"],dc={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},mc={key:1},pc={__name:"ChatHeader",props:["contact","displayContactInfo","ticketingIsEnabled","ticket","addon"],emits:["toggleView","deleteThread","closeThread"],setup(W,{emit:be}){var G0,M0,$0,z0,mt,kt,Et;const m=e0(!1),Ne=e0(!1),de=W,He=A0=>{sr.visit("/chat/"+de.contact.id+"/block",{method:"post",onSuccess:ze=>{var K0;console.log(ze.props.flash),((K0=ze.props.flash.status)==null?void 0:K0.type)=="error"?ri(Tr().props.flash.status.message,{autoClose:3e3}):ri(Tr().props.flash.status.message,{autoClose:3e3})},onError:ze=>{}})},Be=A0=>{sr.visit("/chat/"+de.contact.id+"/unblock",{method:"post",onSuccess:ze=>{var K0;((K0=ze.props.flash.status)==null?void 0:K0.type)=="error"?ri(Tr().props.flash.status.message,{autoClose:3e3}):ri(Tr().props.flash.status.message,{autoClose:3e3})},onError:ze=>{}})},We=si(()=>Tr().props.auth.user),i0=e0(!1),u0=e0(de.displayContactInfo),s0=e0(null),Qe=e0(!1),E0=e0({label:(G0=de.ticket)!=null&&G0.user?($0=(M0=de.ticket)==null?void 0:M0.user)==null?void 0:$0.full_name:cf("Unassigned"),value:(z0=de.ticket)!=null&&z0.user?(kt=(mt=de.ticket)==null?void 0:mt.user)==null?void 0:kt.id:0});w2(()=>{var A0;u0.value=de.displayContactInfo,s0.value=(A0=de.ticket)==null?void 0:A0.status});const S0=be,Ue=()=>{u0.value=!u0.value,S0("toggleView",u0.value)},qe=()=>{sr.visit("/chats/"+de.contact.uuid,{method:"delete",onFinish:()=>{i0.value=!1}})};Ss({status:s0});const xe=Ss({notes:null,contact:null}),X=Ss({ai_assistant:(Et=de.contact)==null?void 0:Et.ai_assistance_enabled}),le=A0=>{sr.put("/tickets/"+de.contact.uuid+"/update",{status:A0},{})},f0=()=>{sr.put("/tickets/"+de.contact.uuid+"/assign",{id:E0.value.value},{})};function r0(A0,ze){fetch("/team?search="+A0,{headers:{Accept:"application/json"}}).then(K0=>K0.json()).then(K0=>{ze(K0.rows)}).catch(K0=>{console.error("Error fetching agents:",K0)})}const V0=()=>{xe.contact=de.contact.uuid,xe.post("/notes",{preserveState:!1,onSuccess:()=>{xe.reset(),Qe.value=!1}})},rt=()=>{X.ai_assistant=!X.ai_assistant,X.post("/automation/contact/"+de.contact.uuid,{preserveState:!0})};return(A0,ze)=>{var K0;return fe(),me(G1,null,[M("div",nc,[M("div",rc,[st(nt(ir),{href:"/chats",class:"sm:block md:hidden"},{default:At(()=>[...ze[19]||(ze[19]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[M("path",{fill:"currentColor",d:"M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23a1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2"})],-1)])]),_:1}),M("div",{onClick:Ue},[W.contact.avatar?(fe(),me("img",{key:0,class:"rounded-full w-14 h-14",src:W.contact.avatar},null,8,ac)):(fe(),me("div",ic,Fe(W.contact.full_name.substring(0,1)),1))]),M("div",sc,[M("div",null,[M("div",{class:"flex items-center",onClick:Ue},[M("span",null,Fe(W.contact.full_name),1)]),M("div",lc,[M("span",{onClick:Ue},Fe(W.contact.formatted_phone_number),1)])]),W.ticketingIsEnabled&&We.value.teams[0].role!="agent"?(fe(),E1(uf,{key:0,modelValue:E0.value,"onUpdate:modelValue":[ze[0]||(ze[0]=w0=>E0.value=w0),ze[1]||(ze[1]=w0=>f0())],name:"",loadOptions:r0,class:Mt("col-span-1 md:block hidden"),placeholder:"Select Agent"},null,8,["modelValue"])):Ge("",!0)])]),M("div",null,[M("div",oc,[s0.value==="open"&&W.ticketingIsEnabled?(fe(),me("button",{key:0,onClick:ze[2]||(ze[2]=w0=>le("closed")),class:"text-sm md:inline-flex hidden justify-center rounded-md border border-transparent bg-red-800 px-4 py-1 text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},Fe(A0.$t("Mark as closed")),1)):Ge("",!0),s0.value==="closed"&&W.ticketingIsEnabled?(fe(),me("button",{key:1,onClick:ze[3]||(ze[3]=w0=>le("open")),class:"text-sm md:inline-flex hidden justify-center rounded-md border border-transparent bg-primary px-4 py-1 text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},Fe(A0.$t("Mark as open")),1)):Ge("",!0),u0.value?(fe(),me("div",{key:3,onClick:Ue,class:"bg-slate-200 p-2 rounded-lg text-sm cursor-pointer"},[M("span",null,Fe(A0.$t("Back")),1)])):(fe(),E1(lf,{key:2},{items:At(()=>[st(of,null,{default:At(()=>[st(Rr,{onClick:ze[4]||(ze[4]=w0=>Qe.value=!0),as:"button"},{default:At(()=>[Rt(Fe(A0.$t("Add notes")),1)]),_:1}),s0.value==="open"&&W.ticketingIsEnabled?(fe(),E1(Rr,{key:0,onClick:ze[5]||(ze[5]=w0=>le("closed")),as:"button"},{default:At(()=>[Rt(Fe(A0.$t("Mark as closed")),1)]),_:1})):Ge("",!0),s0.value==="closed"&&W.ticketingIsEnabled?(fe(),E1(Rr,{key:1,onClick:ze[6]||(ze[6]=w0=>le("open")),as:"button"},{default:At(()=>[Rt(Fe(A0.$t("Mark as open")),1)]),_:1})):Ge("",!0),de.contact.is_blocked?Ge("",!0):(fe(),E1(Rr,{key:2,onClick:ze[7]||(ze[7]=w0=>m.value=!0),as:"button"},{default:At(()=>[Rt(Fe(A0.$t("Block")),1)]),_:1})),de.contact.is_blocked?(fe(),E1(Rr,{key:3,onClick:ze[8]||(ze[8]=w0=>Ne.value=!0),as:"button"},{default:At(()=>[Rt(Fe(A0.$t("Unblock")),1)]),_:1})):Ge("",!0),st(Rr,{onClick:ze[9]||(ze[9]=w0=>i0.value=!0),as:"button"},{default:At(()=>[Rt(Fe(A0.$t("Clear chat")),1)]),_:1})]),_:1})]),default:At(()=>[ze[20]||(ze[20]=M("button",{type:"button",class:"inline-flex w-full justify-center items-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[M("span",{class:"bg-slate-200 p-1 rounded-full cursor-pointer flex items-center justify-center"},[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.75a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Zm0 6a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Zm0 6a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Z"})])])],-1))]),_:1}))])])]),W.addon==1&&!((K0=de.contact)!=null&&K0.is_blocked)?(fe(),me("div",uc,[M("div",{class:Mt(["text-sm py-1 px-3 rounded-md flex items-center gap-x-2 w-[fit-content]",nt(X).ai_assistant?"bg-green-50":"bg-red-50"])},[M("span",{class:Mt(nt(X).ai_assistant?"text-green-500":"text-red-500")},[...ze[21]||(ze[21]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24"},[M("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"})],-1)])],2),M("span",null,Fe(A0.$t("AI Assistant")),1)],2),M("div",fc,[M("span",cc,Fe(A0.$t("Enable/disable AI assistant")),1),M("div",{class:Mt(["w-12 h-6 flex items-center bg-gray-300 rounded-full p-1 cursor-pointer",{"bg-primary":nt(X).ai_assistant}]),onClick:ze[10]||(ze[10]=w0=>rt())},[M("div",{class:Mt(["bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ease-in-out",{"translate-x-6":nt(X).ai_assistant}])},null,2)],2)])])):Ge("",!0),st(S2,{label:"Add Note",isOpen:Qe.value},{default:At(()=>[M("div",_c,[M("form",{onSubmit:ze[13]||(ze[13]=ur(w0=>V0(),["prevent"])),class:""},[st(ff,{modelValue:nt(xe).notes,"onUpdate:modelValue":ze[11]||(ze[11]=w0=>nt(xe).notes=w0),error:nt(xe).errors.note,name:"",class:Mt("col-span-2")},null,8,["modelValue","error"]),M("div",vc,[M("button",{type:"button",onClick:ze[12]||(ze[12]=ur(w0=>Qe.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},Fe(A0.$t("Cancel")),1),M("button",{class:Mt(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":nt(xe).processing}]),disabled:nt(xe).processing},[nt(xe).processing?(fe(),me("svg",dc,[...ze[22]||(ze[22]=[M("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),M("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[M("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(fe(),me("span",mc,Fe(A0.$t("Save")),1))],10,hc)])],32)])]),_:1},8,["isOpen"]),st(Ms,{modelValue:i0.value,"onUpdate:modelValue":ze[14]||(ze[14]=w0=>i0.value=w0),label:A0.$t("Clear chat"),description:A0.$t("Are you sure you want to delete this thread? You can't undo this action"),onConfirm:qe},null,8,["modelValue","label","description"]),st(Ms,{modelValue:m.value,"onUpdate:modelValue":ze[15]||(ze[15]=w0=>m.value=w0),label:A0.$t("Block Contact"),onConfirm:ze[16]||(ze[16]=w0=>He(de.contact.id)),description:A0.$t("Are You sure you want to block this contact")+" [  "+de.contact.first_name+" "+de.contact.last_name+" ]"},null,8,["modelValue","label","description"]),st(Ms,{modelValue:Ne.value,"onUpdate:modelValue":ze[17]||(ze[17]=w0=>Ne.value=w0),label:A0.$t("Unblock Contact"),onConfirm:ze[18]||(ze[18]=w0=>Be(de.contact.id)),description:A0.$t("Are You sure you want to unblock this contact")+" [  "+de.contact.first_name+" "+de.contact.last_name+" ]"},null,8,["modelValue","label","description"])],64)}}},bc={class:"text-sm"},xc={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},wc={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},yc={key:0,class:"absolute bg-white z-10 px-1 py-2 mt-2 shadow w-[7em] rounded-md text-black"},gc={__name:"SortDirectionToggle",props:{direction:String,url:String},setup(W){const be=W,m=e0(!1),Ne=()=>{m.value=!m.value},de=Be=>{m.value&&!Be.target.closest(".sort-dd")&&(m.value=!1)};ia(()=>{document.body.addEventListener("click",de)}),Cs(()=>{document.body.removeEventListener("click",de)});const He=Be=>{sr.post(be.url,{sort:Be},{preserveState:!1})};return(Be,We)=>(fe(),me("div",bc,[M("span",{onClick:We[0]||(We[0]=i0=>Ne()),class:"cursor-pointer hover:bg-slate-50 p-1 rounded-full sort-dd block"},[W.direction=="desc"?(fe(),me("svg",xc,[...We[3]||(We[3]=[M("path",{fill:"currentColor",d:"M3.5 13.5a.5.5 0 0 1-1 0V4.707L1.354 5.854a.5.5 0 1 1-.708-.708l2-1.999l.007-.007a.5.5 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 4.707zm4-9.5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5"},null,-1)])])):(fe(),me("svg",wc,[...We[4]||(We[4]=[M("path",{fill:"currentColor",d:"M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999l.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"},null,-1)])]))]),m.value?(fe(),me("div",yc,[M("div",null,[M("div",{onClick:We[1]||(We[1]=i0=>He("desc")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"}," Newest "),M("div",{onClick:We[2]||(We[2]=i0=>He("asc")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"}," Oldest ")])])):Ge("",!0)]))}},Sc={class:"relative text-sm"},Ac={class:"cursor-pointer flex items-center space-x-1 bg-slate-50 w-[fit-content] h-[fit-content] rounded-md p-1 px-2 text-sm"},Mc={class:"capitalize"},Rc={class:"text-slate-500"},Ec={key:0,class:"absolute bg-white z-10 px-1 py-2 mt-2 shadow w-full rounded-md text-black"},Tc={__name:"TicketStatusToggle",props:{languages:Object,currentLanguage:String,status:String,rowCount:Number},setup(W){const be=W,m=e0(!1),Ne=()=>{m.value=!m.value},de=new URLSearchParams(window.location.search);let He=null;de.has("is_read")&&(He=de.get("is_read"));const Be=i0=>{m.value&&!i0.target.closest(".status-dd")&&(m.value=!1)},We=i0=>i0?i0.charAt(0).toUpperCase()+i0.slice(1):"";return ia(()=>{document.body.addEventListener("click",Be)}),Cs(()=>{document.body.removeEventListener("click",Be)}),(i0,u0)=>(fe(),me("div",Sc,[M("div",{onClick:u0[0]||(u0[0]=s0=>Ne()),class:"status-dd"},[M("div",Ac,[M("span",Mc,Fe(nt(He)?i0.$t("Unread"):i0.$t(We(be.status))),1),M("span",Rc,Fe(be.rowCount),1),u0[1]||(u0[1]=M("span",null,[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16.53 8.97a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06L12 12.44l3.47-3.47a.75.75 0 0 1 1.06 0","clip-rule":"evenodd"})])],-1))])]),m.value?(fe(),me("div",Ec,[M("div",null,[st(nt(ir),{href:"/chats?status=unassigned",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:At(()=>[Rt(Fe(i0.$t("Unassigned")),1)]),_:1}),st(nt(ir),{href:"/chats?status=open",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:At(()=>[Rt(Fe(i0.$t("Open")),1)]),_:1}),st(nt(ir),{href:"/chats?status=closed",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:At(()=>[Rt(Fe(i0.$t("Closed")),1)]),_:1}),st(nt(ir),{href:"/chats?is_read=0",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:At(()=>[Rt(Fe(i0.$t("Unread")),1)]),_:1}),st(nt(ir),{href:"/chats?status=all",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:At(()=>[Rt(Fe(i0.$t("All")),1)]),_:1})])])):Ge("",!0)]))}},Bc={class:"px-4 py-4 border-b"},Cc={class:"flex items-center justify-between space-x-1 text-xl"},kc={class:"flex space-x-1"},Ic={class:"text-slate-500"},Lc={class:"bg-slate-50 rounded-md mt-3 flex items-center py-[2px]"},Oc=["placeholder"],Nc={key:1,class:"pr-2"},Hc={key:0,class:"grid grid-cols-2 mt-4 items-center w-full"},Vc={class:"flex ml-auto gap-x-1"},$c={class:"flex-grow overflow-y-auto h-[65vh]",ref:"scrollContainer"},Fc={class:"flex space-x-2 hover:bg-gray-50 cursor-pointer py-3 px-4"},Dc={class:"w-[15%] flex items-center gap-1"},Pc=["src"],qc={key:1,class:"rounded-full w-10 h-10 flex items-center justify-center bg-slate-200 capitalize"},Xc={key:2,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zc={class:"w-[85%]"},Uc={class:"flex justify-between"},Yc={class:"truncate"},Gc={class:"self-center text-slate-500 text-xs"},Wc={key:0,class:"flex justify-between"},zc={key:0,class:"text-slate-500 text-xs truncate self-end"},Kc={key:1,class:"text-slate-500 text-xs truncate self-end"},Qc={key:2,class:"text-slate-500 text-xs truncate self-end"},Jc={key:3,class:"text-slate-500 text-xs truncate self-end"},jc={class:"flex items-center"},e_={class:"ml-2"},t_={key:4,class:"text-slate-500 text-xs truncate self-end"},n_={class:"flex items-center"},r_={class:"ml-2"},a_={key:5,class:"text-slate-500 text-xs truncate self-end"},i_={class:"flex items-center"},s_={class:"ml-2"},l_={key:6,class:"text-slate-500 text-xs truncate self-end"},o_={class:"flex items-center"},u_={class:"ml-2"},f_={key:7,class:"text-slate-500 text-xs truncate self-end"},c_={class:"flex items-center"},__={class:"ml-2"},v_={key:8,class:"text-slate-500 text-xs truncate self-end"},h_={class:"flex items-center"},d_={class:"ml-2"},m_={key:9,class:"text-slate-500 text-xs truncate self-end"},p_={class:"flex items-center"},b_={class:"ml-2"},x_={key:10,class:"bg-green-600 text-white rounded-md py-[1px] px-[8px] min-w-10 text-[10px] flex items-center justify-center"},w_={class:"px-4 pb-4"},y_={__name:"ChatTable",props:{rows:{type:Object,required:!0},filters:{type:Object},rowCount:{type:Number,required:!0},ticketingIsEnabled:{type:Boolean},status:{type:String},chatSortDirection:{type:String}},emits:["view"],setup(W,{emit:be}){const m=W,Ne=e0(!1);e0(null);const de=qe=>JSON.parse(qe).type,He=qe=>JSON.parse(qe),Be=qe=>({"text/plain":"TXT","application/pdf":"PDF","application/vnd.ms-powerpoint":"PPT","application/msword":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX"})[qe]||"Unknown",We=qe=>{const xe=JSON.parse(qe).contacts;if(xe.length===1){const X=xe[0];return X.name.formatted_name||`${X.name.first_name} ${X.name.last_name}`}else if(xe.length>1){const X=xe[0].name.first_name,le=xe.length-1;return`${X} and ${le} other contacts`}else return"No contacts available"},i0=qe=>{if(qe){const xe=new Date,X=new Date(qe);if(X.getDate()===xe.getDate()&&X.getMonth()===xe.getMonth()&&X.getFullYear()===xe.getFullYear())return u0(X,"h:mm a");const le=new Date;return le.setDate(xe.getDate()-1),X.getDate()===le.getDate()&&X.getMonth()===le.getMonth()&&X.getFullYear()===le.getFullYear()?"Yesterday":u0(X,"d/m/y")}else return"Invalid time"},u0=(qe,xe)=>{let X=null;return xe==="h:mm a"?X={hour12:!0,hour:"numeric",minute:"numeric"}:X={day:"numeric",month:"numeric",year:"numeric"},new Intl.DateTimeFormat("en-US",X).format(qe)},s0=window.location.search;aa(()=>s0,(qe,xe)=>{console.log("Query parameters changed:",qe)});const Qe=e0({search:m.filters.search}),E0=vf(()=>{Ne.value=!0,S0()},1e3),S0=()=>{const qe=window.location.pathname;sr.visit(qe,{method:"get",data:Qe.value})},Ue=()=>{Qe.value.search=null,S0()};return(qe,xe)=>(fe(),me(G1,null,[M("div",Bc,[M("div",Cc,[M("div",kc,[M("h2",null,Fe(qe.$t("Chats")),1),M("span",Ic,Fe(W.rowCount),1)])]),M("div",Lc,[xe[4]||(xe[4]=M("div",{class:"pl-3 py-2"},[M("svg",{class:"text-slate-600",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[M("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10a7 7 0 1 0 14 0a7 7 0 1 0-14 0m18 11l-6-6"})])],-1)),Rs(M("input",{onInput:xe[0]||(xe[0]=(...X)=>nt(E0)&&nt(E0)(...X)),"onUpdate:modelValue":xe[1]||(xe[1]=X=>Qe.value.search=X),class:"w-full bg-slate-50 outline-none rounded-xl py-2 pl-2 mr-2 text-sm",type:"text",placeholder:qe.$t("Search name or number...")},null,40,Oc),[[Es,Qe.value.search]]),Ne.value===!1&&Qe.value.search?(fe(),me("button",{key:0,onClick:Ue,type:"button",class:"pr-2"},[...xe[2]||(xe[2]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1)])])):Ge("",!0),Ne.value?(fe(),me("span",Nc,[...xe[3]||(xe[3]=[R1('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1)])])):Ge("",!0)]),W.ticketingIsEnabled?(fe(),me("div",Hc,[st(Tc,{status:W.status,rowCount:W.rowCount},null,8,["status","rowCount"]),M("div",Vc,[st(gc,{direction:m.chatSortDirection,url:"/chats/update-sort-direction"},null,8,["direction"])])])):Ge("",!0)]),M("div",$c,[(fe(!0),me(G1,null,lr(W.rows.data,(X,le)=>(fe(),E1(nt(ir),{href:"/chats/"+X.uuid+"?page="+m.rows.meta.current_page,class:Mt(["block border-b group-hover:pr-0",X.unread_messages>0?"bg-green-50":""]),key:le},{default:At(()=>{var f0,r0,V0,rt,G0,M0,$0,z0,mt,kt,Et,A0,ze,K0,w0,pt,d1,r1,bt,Ut,v0,g,It;return[M("div",Fc,[M("div",Dc,[X.avatar?(fe(),me("img",{key:0,class:"rounded-full w-10 h-10",src:X.avatar},null,8,Pc)):(fe(),me("div",qc,Fe(X.full_name.substring(0,1)),1)),X.is_blocked?(fe(),me("svg",Xc,[...xe[5]||(xe[5]=[M("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#DC2626","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),M("path",{d:"M4.92993 4.92999L19.07 19.07",stroke:"#DC2626","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):Ge("",!0)]),M("div",Zc,[M("div",Uc,[M("h3",Yc,Fe(X.full_name),1),M("span",Gc,Fe(i0((f0=X==null?void 0:X.last_chat)==null?void 0:f0.created_at)),1)]),((r0=X==null?void 0:X.last_chat)==null?void 0:r0.deleted_at)===null?(fe(),me("div",Wc,[de((V0=X==null?void 0:X.last_chat)==null?void 0:V0.metadata)==="text"?(fe(),me("div",zc,Fe(He((rt=X==null?void 0:X.last_chat)==null?void 0:rt.metadata).text.body),1)):Ge("",!0),de((G0=X==null?void 0:X.last_chat)==null?void 0:G0.metadata)==="button"?(fe(),me("div",Kc,Fe(He((M0=X==null?void 0:X.last_chat)==null?void 0:M0.metadata).button.text),1)):Ge("",!0),de(($0=X==null?void 0:X.last_chat)==null?void 0:$0.metadata)==="interactive"?(fe(),me("div",Qc,Fe(((kt=(mt=He((z0=X==null?void 0:X.last_chat)==null?void 0:z0.metadata).interactive)==null?void 0:mt.button_reply)==null?void 0:kt.title)||((ze=(A0=He((Et=X==null?void 0:X.last_chat)==null?void 0:Et.metadata).interactive)==null?void 0:A0.list_reply)==null?void 0:ze.title)),1)):Ge("",!0),de((K0=X==null?void 0:X.last_chat)==null?void 0:K0.metadata)==="image"?(fe(),me("div",Jc,[M("div",jc,[xe[6]||(xe[6]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[M("path",{fill:"currentColor",d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.9 13.98l2.1 2.53l3.1-3.99c.2-.26.6-.26.8.01l3.51 4.68a.5.5 0 0 1-.4.8H6.02c-.42 0-.65-.48-.39-.81L8.12 14c.19-.26.57-.27.78-.02z"})],-1)),M("span",e_,Fe(qe.$t("Photo")),1)])])):Ge("",!0),de((w0=X==null?void 0:X.last_chat)==null?void 0:w0.metadata)==="document"?(fe(),me("div",t_,[M("div",n_,[xe[7]||(xe[7]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[M("path",{fill:"currentColor","fill-rule":"evenodd",d:"M14.25 2.5a.25.25 0 0 0-.25-.25H7A2.75 2.75 0 0 0 4.25 5v14A2.75 2.75 0 0 0 7 21.75h10A2.75 2.75 0 0 0 19.75 19V9.147a.25.25 0 0 0-.25-.25H15a.75.75 0 0 1-.75-.75V2.5Zm.75 9.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6Zm0 4a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6Z","clip-rule":"evenodd"}),M("path",{fill:"currentColor",d:"M15.75 2.824c0-.184.193-.301.336-.186c.121.098.23.212.323.342l3.013 4.197c.068.096-.006.22-.124.22H16a.25.25 0 0 1-.25-.25V2.824Z"})],-1)),M("span",r_,Fe(Be((d1=(pt=X==null?void 0:X.last_chat)==null?void 0:pt.media)==null?void 0:d1.type))+" "+Fe(qe.$t("File")),1)])])):Ge("",!0),de((r1=X==null?void 0:X.last_chat)==null?void 0:r1.metadata)==="video"?(fe(),me("div",a_,[M("div",i_,[xe[8]||(xe[8]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[M("path",{fill:"currentColor",d:"M3.5 2.5A2.5 2.5 0 0 0 1 5v6a2.5 2.5 0 0 0 2.5 2.5h5A2.5 2.5 0 0 0 11 11V5a2.5 2.5 0 0 0-2.5-2.5h-5Zm10.684 1.61L12 5.893v4.215l2.184 1.78a.5.5 0 0 0 .816-.389v-7a.5.5 0 0 0-.816-.387Z"})],-1)),M("span",s_,Fe(qe.$t("Video")),1)])])):Ge("",!0),de((bt=X==null?void 0:X.last_chat)==null?void 0:bt.metadata)==="audio"?(fe(),me("div",l_,[M("div",o_,[xe[9]||(xe[9]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 512 512"},[M("path",{fill:"currentColor",d:"M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6c26.5 0 48 21.5 48 48v128c0 26.5-21.5 48-48 48c-44.2 0-80-35.8-80-80V288C0 146.6 114.6 32 256 32s256 114.6 256 256v112c0 44.2-35.8 80-80 80c-26.5 0-48-21.5-48-48V304c0-26.5 21.5-48 48-48c10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z"})],-1)),M("span",u_,Fe(qe.$t("Audio")),1)])])):Ge("",!0),de((Ut=X==null?void 0:X.last_chat)==null?void 0:Ut.metadata)==="sticker"?(fe(),me("div",f_,[M("div",c_,[xe[10]||(xe[10]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[M("path",{fill:"currentColor",d:"M168 32H88a56.06 56.06 0 0 0-56 56v80a56.06 56.06 0 0 0 56 56h48a8.07 8.07 0 0 0 2.53-.41c26.23-8.75 76.31-58.83 85.06-85.06A8.07 8.07 0 0 0 224 136V88a56.06 56.06 0 0 0-56-56Zm-32 175.42V176a40 40 0 0 1 40-40h31.42c-9.26 21.55-49.87 62.16-71.42 71.42Z"})],-1)),M("span",__,Fe(qe.$t("Sticker")),1)])])):Ge("",!0),de((v0=X==null?void 0:X.last_chat)==null?void 0:v0.metadata)==="contacts"?(fe(),me("div",v_,[M("div",h_,[xe[11]||(xe[11]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[M("path",{fill:"currentColor",d:"M3 14s-1 0-1-1s1-4 6-4s6 3 6 4s-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"})],-1)),M("span",d_,Fe(We((g=X==null?void 0:X.last_chat)==null?void 0:g.metadata)),1)])])):Ge("",!0),de((It=X==null?void 0:X.last_chat)==null?void 0:It.metadata)==="location"?(fe(),me("div",m_,[M("div",p_,[xe[12]||(xe[12]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[M("path",{fill:"currentColor",d:"M9.156 14.544C10.899 13.01 14 9.876 14 7A6 6 0 0 0 2 7c0 2.876 3.1 6.01 4.844 7.544a1.736 1.736 0 0 0 2.312 0ZM6 7a2 2 0 1 1 4 0a2 2 0 0 1-4 0Z"})],-1)),M("span",b_,Fe(qe.$t("Location")),1)])])):Ge("",!0),X.unread_messages>0?(fe(),me("span",x_,Fe(X.unread_messages),1)):Ge("",!0)])):Ge("",!0)])])]}),_:2},1032,["href","class"]))),128))],512),M("div",w_,[st(_f,{class:"mt-3",pagination:W.rows.meta},null,8,["pagination"])])],64))}};(function(){try{if(typeof document<"u"){var W=document.createElement("style");W.appendChild(document.createTextNode(".mapdiv[data-v-174b771e]{width:100%;height:100%}.info-window-wrapper[data-v-90174664]{display:none}.mapdiv .info-window-wrapper[data-v-90174664]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(W)}}catch(be){console.error("vite-plugin-css-injected-by-js",be)}})();var g_=Object.defineProperty,S_=(W,be,m)=>be in W?g_(W,be,{enumerable:!0,configurable:!0,writable:!0,value:m}):W[be]=m,d2=(W,be,m)=>(S_(W,typeof be!="symbol"?be+"":be,m),m);const M2=Symbol("map"),R2=Symbol("api"),A_=Symbol("marker"),M_=Symbol("markerCluster"),ks=Symbol("CustomMarker"),R_=Symbol("mapTilesLoaded"),E2=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function E_(W,be,m,Ne){function de(He){return He instanceof m?He:new m(function(Be){Be(He)})}return new(m||(m=Promise))(function(He,Be){function We(s0){try{u0(Ne.next(s0))}catch(Qe){Be(Qe)}}function i0(s0){try{u0(Ne.throw(s0))}catch(Qe){Be(Qe)}}function u0(s0){s0.done?He(s0.value):de(s0.value).then(We,i0)}u0((Ne=Ne.apply(W,be||[])).next())})}var T_=function W(be,m){if(be===m)return!0;if(be&&m&&typeof be=="object"&&typeof m=="object"){if(be.constructor!==m.constructor)return!1;var Ne,de,He;if(Array.isArray(be)){if(Ne=be.length,Ne!=m.length)return!1;for(de=Ne;de--!==0;)if(!W(be[de],m[de]))return!1;return!0}if(be.constructor===RegExp)return be.source===m.source&&be.flags===m.flags;if(be.valueOf!==Object.prototype.valueOf)return be.valueOf()===m.valueOf();if(be.toString!==Object.prototype.toString)return be.toString()===m.toString();if(He=Object.keys(be),Ne=He.length,Ne!==Object.keys(m).length)return!1;for(de=Ne;de--!==0;)if(!Object.prototype.hasOwnProperty.call(m,He[de]))return!1;for(de=Ne;de--!==0;){var Be=He[de];if(!W(be[Be],m[Be]))return!1}return!0}return be!==be&&m!==m};const m2="__googleMapsScriptId";var Br;(function(W){W[W.INITIALIZED=0]="INITIALIZED",W[W.LOADING=1]="LOADING",W[W.SUCCESS=2]="SUCCESS",W[W.FAILURE=3]="FAILURE"})(Br||(Br={}));class or{constructor({apiKey:be,authReferrerPolicy:m,channel:Ne,client:de,id:He=m2,language:Be,libraries:We=[],mapIds:i0,nonce:u0,region:s0,retries:Qe=3,url:E0="https://maps.googleapis.com/maps/api/js",version:S0}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=be,this.authReferrerPolicy=m,this.channel=Ne,this.client=de,this.id=He||m2,this.language=Be,this.libraries=We,this.mapIds=i0,this.nonce=u0,this.region=s0,this.retries=Qe,this.url=E0,this.version=S0,or.instance){if(!T_(this.options,or.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(or.instance.options)}`);return or.instance}or.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Br.FAILURE:this.done?Br.SUCCESS:this.loading?Br.LOADING:Br.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let be=this.url;return be+="?callback=__googleMapsCallback",this.apiKey&&(be+=`&key=${this.apiKey}`),this.channel&&(be+=`&channel=${this.channel}`),this.client&&(be+=`&client=${this.client}`),this.libraries.length>0&&(be+=`&libraries=${this.libraries.join(",")}`),this.language&&(be+=`&language=${this.language}`),this.region&&(be+=`&region=${this.region}`),this.version&&(be+=`&v=${this.version}`),this.mapIds&&(be+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(be+=`&auth_referrer_policy=${this.authReferrerPolicy}`),be}deleteScript(){const be=document.getElementById(this.id);be&&be.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((be,m)=>{this.loadCallback(Ne=>{Ne?m(Ne.error):be(window.google)})})}importLibrary(be){return this.execute(),google.maps.importLibrary(be)}loadCallback(be){this.callbacks.push(be),this.execute()}setScript(){var be,m;if(document.getElementById(this.id)){this.callback();return}const Ne={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(Ne).forEach(He=>!Ne[He]&&delete Ne[He]),!((m=(be=window==null?void 0:window.google)===null||be===void 0?void 0:be.maps)===null||m===void 0)&&m.importLibrary||(He=>{let Be,We,i0,u0="The Google Maps JavaScript API",s0="google",Qe="importLibrary",E0="__ib__",S0=document,Ue=window;Ue=Ue[s0]||(Ue[s0]={});const qe=Ue.maps||(Ue.maps={}),xe=new Set,X=new URLSearchParams,le=()=>Be||(Be=new Promise((f0,r0)=>E_(this,void 0,void 0,function*(){var V0;yield We=S0.createElement("script"),We.id=this.id,X.set("libraries",[...xe]+"");for(i0 in He)X.set(i0.replace(/[A-Z]/g,rt=>"_"+rt[0].toLowerCase()),He[i0]);X.set("callback",s0+".maps."+E0),We.src=this.url+"?"+X,qe[E0]=f0,We.onerror=()=>Be=r0(Error(u0+" could not load.")),We.nonce=this.nonce||((V0=S0.querySelector("script[nonce]"))===null||V0===void 0?void 0:V0.nonce)||"",S0.head.append(We)})));qe[Qe]?console.warn(u0+" only loads once. Ignoring:",He):qe[Qe]=(f0,...r0)=>xe.add(f0)&&le().then(()=>qe[Qe](f0,...r0))})(Ne);const de=this.libraries.map(He=>this.importLibrary(He));de.length||de.push(this.importLibrary("core")),Promise.all(de).then(()=>this.callback(),He=>{const Be=new ErrorEvent("error",{error:He});this.loadErrorCallback(Be)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(be){if(this.errors.push(be),this.errors.length<=this.retries){const m=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${m} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},m)}else this.onerrorEvent=be,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(be=>{be(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function B_(W){return class extends W.OverlayView{constructor(be){super(),d2(this,"element"),d2(this,"opts");const{element:m,...Ne}=be;this.element=m,this.opts=Ne,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof W.LatLng?this.opts.position:new W.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const be=this.element;return be.style.display!=="none"&&be.style.visibility!=="hidden"&&(be.style.opacity===""||Number(be.style.opacity)>.01)}onAdd(){if(!this.element)return;const be=this.getPanes();be&&be.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const be=this.getProjection(),m=be==null?void 0:be.fromLatLngToDivPixel(this.getPosition());if(m){this.element.style.position="absolute";const Ne=this.element.offsetHeight,de=this.element.offsetWidth;let He,Be;switch(this.opts.anchorPoint){case"TOP_CENTER":He=m.x-de/2,Be=m.y;break;case"BOTTOM_CENTER":He=m.x-de/2,Be=m.y-Ne;break;case"LEFT_CENTER":He=m.x,Be=m.y-Ne/2;break;case"RIGHT_CENTER":He=m.x-de,Be=m.y-Ne/2;break;case"TOP_LEFT":He=m.x,Be=m.y;break;case"TOP_RIGHT":He=m.x-de,Be=m.y;break;case"BOTTOM_LEFT":He=m.x,Be=m.y-Ne;break;case"BOTTOM_RIGHT":He=m.x-de,Be=m.y-Ne;break;default:He=m.x-de/2,Be=m.y-Ne/2}this.element.style.left=He+"px",this.element.style.top=Be+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(be){const{element:m,...Ne}=be;this.element=m,this.opts=Ne,this.draw()}}}let p2;const b2=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],C_=y2({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:b2,setup(W,{emit:be}){const m=e0(),Ne=e0(!1),de=e0(),He=e0(),Be=e0(!1);ai(M2,de),ai(R2,He),ai(R_,Be);const We=()=>{const Qe={...W};Object.keys(Qe).forEach(Ue=>{Qe[Ue]===void 0&&delete Qe[Ue]});const E0=Ue=>{var qe;return Ue?{position:(qe=He.value)==null?void 0:qe.ControlPosition[Ue]}:{}},S0={scaleControlOptions:W.scaleControlStyle?{style:W.scaleControlStyle}:{},panControlOptions:E0(W.panControlPosition),zoomControlOptions:E0(W.zoomControlPosition),rotateControlOptions:E0(W.rotateControlPosition),streetViewControlOptions:E0(W.streetViewControlPosition),fullscreenControlOptions:E0(W.fullscreenControlPosition),disableDefaultUI:W.disableDefaultUi};return{...Qe,...S0}},i0=aa([He,de],([Qe,E0])=>{const S0=Qe,Ue=E0;S0&&Ue&&(S0.event.addListenerOnce(Ue,"tilesloaded",()=>{Be.value=!0}),setTimeout(i0,0))},{immediate:!0}),u0=()=>{try{const{apiKey:Qe,region:E0,version:S0,language:Ue,libraries:qe}=W;p2=new or({apiKey:Qe,region:E0,version:S0,language:Ue,libraries:qe})}catch(Qe){console.error(Qe)}},s0=Qe=>{He.value=ra(Qe.maps),de.value=ra(new Qe.maps.Map(m.value,We()));const E0=B_(He.value);He.value[ks]=E0,b2.forEach(Ue=>{var qe;(qe=de.value)==null||qe.addListener(Ue,xe=>be(Ue,xe))}),Ne.value=!0;const S0=Object.keys(W).filter(Ue=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom"].includes(Ue)).map(Ue=>g2(W,Ue));aa([()=>W.center,()=>W.zoom,...S0],([Ue,qe],[xe,X])=>{var le,f0,r0;const{center:V0,zoom:rt,...G0}=We();(le=de.value)==null||le.setOptions(G0),qe!==void 0&&qe!==X&&((f0=de.value)==null||f0.setZoom(qe));const M0=!xe||Ue.lng!==xe.lng||Ue.lat!==xe.lat;Ue&&M0&&((r0=de.value)==null||r0.panTo(Ue))})};return ia(()=>{W.apiPromise&&W.apiPromise instanceof Promise?W.apiPromise.then(s0):(u0(),p2.load().then(s0))}),Bs(()=>{var Qe;Be.value=!1,de.value&&((Qe=He.value)==null||Qe.event.clearInstanceListeners(de.value))}),{mapRef:m,ready:Ne,map:de,api:He,mapTilesLoaded:Be}}}),k_=(W,be)=>{const m=W.__vccOpts||W;for(const[Ne,de]of be)m[Ne]=de;return m},I_={ref:"mapRef",class:"mapdiv"};function L_(W,be,m,Ne,de,He){return fe(),me("div",null,[M("div",I_,null,512),rf(W.$slots,"default",af(sf({ready:W.ready,map:W.map,api:W.api,mapTilesLoaded:W.mapTilesLoaded})),void 0,!0)])}const O_=k_(C_,[["render",L_],["__scopeId","data-v-174b771e"]]);function N_(W){return W&&W.__esModule&&Object.prototype.hasOwnProperty.call(W,"default")?W.default:W}var H_=function W(be,m){if(be===m)return!0;if(be&&m&&typeof be=="object"&&typeof m=="object"){if(be.constructor!==m.constructor)return!1;var Ne,de,He;if(Array.isArray(be)){if(Ne=be.length,Ne!=m.length)return!1;for(de=Ne;de--!==0;)if(!W(be[de],m[de]))return!1;return!0}if(be.constructor===RegExp)return be.source===m.source&&be.flags===m.flags;if(be.valueOf!==Object.prototype.valueOf)return be.valueOf()===m.valueOf();if(be.toString!==Object.prototype.toString)return be.toString()===m.toString();if(He=Object.keys(be),Ne=He.length,Ne!==Object.keys(m).length)return!1;for(de=Ne;de--!==0;)if(!Object.prototype.hasOwnProperty.call(m,He[de]))return!1;for(de=Ne;de--!==0;){var Be=He[de];if(!W(be[Be],m[Be]))return!1}return!0}return be!==be&&m!==m};const V_=N_(H_),$_=W=>W==="Marker",F_=W=>W===ks,D_=(W,be,m,Ne)=>{const de=e0(),He=As(M2,e0()),Be=As(R2,e0()),We=As(M_,e0()),i0=si(()=>!!(We.value&&Be.value&&(de.value instanceof Be.value.Marker||de.value instanceof Be.value[ks])));return aa([He,m],(u0,[s0,Qe])=>{var E0,S0,Ue;const qe=!V_(m.value,Qe)||He.value!==s0;!He.value||!Be.value||!qe||(de.value?(de.value.setOptions(m.value),i0.value&&((E0=We.value)==null||E0.removeMarker(de.value),(S0=We.value)==null||S0.addMarker(de.value))):($_(W)?de.value=ra(new Be.value[W](m.value)):F_(W)?de.value=ra(new Be.value[W](m.value)):de.value=ra(new Be.value[W]({...m.value,map:He.value})),i0.value?(Ue=We.value)==null||Ue.addMarker(de.value):de.value.setMap(He.value),be.forEach(xe=>{var X;(X=de.value)==null||X.addListener(xe,le=>Ne(xe,le))})))},{immediate:!0}),Bs(()=>{var u0,s0;de.value&&((u0=Be.value)==null||u0.event.clearInstanceListeners(de.value),i0.value?(s0=We.value)==null||s0.removeMarker(de.value):de.value.setMap(null))}),de},x2=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],P_=y2({name:"Marker",props:{options:{type:Object,required:!0}},emits:x2,setup(W,{emit:be,expose:m,slots:Ne}){const de=g2(W,"options"),He=D_("Marker",x2,de,be);return ai(A_,He),m({marker:He}),()=>{var Be;return(Be=Ne.default)==null?void 0:Be.call(Ne)}}});E2.concat(["bounds_changed"]);E2.concat(["center_changed","radius_changed"]);var Ts;(function(W){W.CLUSTERING_BEGIN="clusteringbegin",W.CLUSTERING_END="clusteringend",W.CLUSTER_CLICK="click"})(Ts||(Ts={}));Object.values(Ts);const q_={key:0,style:{"overflow-wrap":"break-word"},class:"max-w-[320px]"},X_={key:0},Z_={class:"text-sm font-medium text-gray-900"},U_={class:"normal-case whitespace-pre-wrap"},Y_={key:1,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},G_={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},W_={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},z_={key:2,src:"/images/icons/link.png",class:"h-4"},K_={key:3,src:"/images/icons/reply.png",class:"h-4"},Q_={key:1,style:{"overflow-wrap":"break-word"},class:"max-w-[320px]"},J_={class:"normal-case whitespace-pre-wrap"},j_={class:"normal-case whitespace-pre-wrap"},ev={key:2,style:{"overflow-wrap":"break-word"},class:"max-w-[320px]"},tv={class:"normal-case whitespace-pre-wrap"},nv={key:3,style:{"overflow-wrap":"break-word"},class:"max-w-[320px]"},rv={key:0},av={class:"normal-case whitespace-pre-wrap"},iv={key:1,class:"normal-case whitespace-pre-wrap"},sv={key:2,class:"normal-case whitespace-pre-wrap"},lv={key:4},ov=["src"],uv={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},fv={key:2,style:{"overflow-wrap":"break-word"},class:"max-w-[320px]"},cv={key:3,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},_v={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},vv={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},hv={key:2,src:"/images/icons/link.png",class:"h-4"},dv={key:3,src:"/images/icons/reply.png",class:"h-4"},mv={key:5},pv={class:"relative w-[300px]"},bv={class:"flex space-x-2 w-full h-1/3 bg-white opacity-90 pt-2"},xv={key:0,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 1024 1024"},wv={key:1,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},yv={key:2,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},gv={key:3,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},Sv={class:"overflow-ellipsis overflow-hidden line-clamp-2 w-[200px]"},Av={class:"flex items-center text-slate-500 text-[11px]"},Mv=["href","download"],Rv={key:0,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},Ev={key:1,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},Tv={key:0,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},Bv={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Cv={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},kv={key:2,src:"/images/icons/link.png",class:"h-4"},Iv={key:3,src:"/images/icons/reply.png",class:"h-4"},Lv={key:6},Ov={key:7},Nv=["src"],Hv={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Vv={key:8},$v={class:"flex space-x-3 w-[300px] items-center"},Fv={key:9},Dv={key:0,controls:""},Pv=["src"],qv={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Xv={key:10},Zv={key:0,controls:"",width:"300",class:"max-h-[350px]"},Uv=["src"],Yv={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Gv={key:2,style:{"overflow-wrap":"break-word"},class:"max-w-[320px]"},Wv={key:3,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},zv={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Kv={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Qv={key:2,src:"/images/icons/link.png",class:"h-4"},Jv={key:3,src:"/images/icons/reply.png",class:"h-4"},jv={key:11,class:"mt-2 mb--2"},eh={class:"text-gray-500 text-xs text-right leading-none"},th={class:"text-gray-500 text-xs text-right leading-none"},nh={class:"absolute capitalize hidden group-hover:block bg-white text-gray-600 text-xs rounded-sm py-1 px-2 bottom-full mb-1 whitespace-no-wrap"},rh={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},ah={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 16 16"},ih={key:12,class:"cursor-pointer text-center border-t mt-2 pt-2"},sh={key:0,class:"bg-red-100 rounded-md p-3 text-sm mt-4"},lh={class:"flex"},oh={class:"truncate"},uh={class:"mt-4 flex w-full"},fh={__name:"ChatBubble",props:{content:Object,type:String},setup(W){const be=W,m=e0(!1),Ne=xe=>{const X=i0(xe),le=`https://www.google.com/maps/search/?api=1&query=${X.lat},${X.lng}`;window.open(le,"_blank")},de=()=>{m.value=!0,setTimeout(()=>{m.value=!1},2e3)},He=xe=>({"text/plain":"TXT","application/pdf":"PDF","application/powerpoint":"PPT","application/vnd.ms-powerpoint":"PPT","application/msword":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX"})[xe]||"Unknown",Be=xe=>{if(xe===0)return"0 Bytes";const X=1024,le=["Bytes","KB","MB","GB","TB"],f0=parseInt(Math.floor(Math.log(xe)/Math.log(X)));return Math.round(xe/Math.pow(X,f0)*100)/100+" "+le[f0]},We=xe=>{const X=JSON.parse(xe).contacts;if(X.length===1){const le=X[0];return le.name.formatted_name||`${le.name.first_name} ${le.name.last_name}`}else if(X.length>1){const le=X[0].name.first_name,f0=X.length-1;return`${le} and ${f0} other contacts`}else return"No contacts available"},i0=xe=>{const X=JSON.parse(xe);return{lat:X.location.latitude,lng:X.location.longitude}},u0=xe=>{const le=si(()=>Tr().props.config).value.find(f0=>f0.key===xe);return le?le.value:""},s0=xe=>{let X="sent";return xe.forEach(le=>{const r0=JSON.parse(le.metadata).status;if(r0==="failed"){X="failed";return}else r0==="read"?X="read":r0==="delivered"&&X!=="read"&&(X="delivered")}),X},Qe=e0(!1),S0=((xe=0)=>{var X,le,f0;try{return(f0=(le=(X=be.content)==null?void 0:X.logs)==null?void 0:le[xe])!=null&&f0.metadata?JSON.parse(be.content.logs[xe].metadata).errors||[]:[]}catch(r0){return console.error("Error parsing metadata:",r0),[]}})(),Ue=e0(null),qe=async xe=>{Ue.value=xe;const X=document.createElement("textarea");X.value=xe,document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),setTimeout(()=>{Ue.value=null},2e3)};return(xe,X)=>{var le,f0,r0,V0,rt,G0,M0,$0,z0,mt,kt,Et,A0,ze,K0,w0,pt,d1,r1,bt,Ut,v0,g,It,m1,W1,a1,Lt,a0,ye,Ke,T1,L0,lt,B1,o0,Xn,An,xt,Ot,z1,un,Zn,Ft,fr,Dt,$1,F1,fn,Mn,Rn,D1,P1,En;return fe(),me(G1,null,[M("div",{class:Mt(["rounded-lg my-1 p-2 text-sm flex flex-col relative",be.type==="outbound"?"ml-auto rounded-tr-none bg-[#d8fad4] speech-bubble-right":"mr-auto rounded-tl-none bg-white speech-bubble-left"])},[M("div",null,[JSON.parse(W.content.metadata).type==="text"?(fe(),me("div",q_,[(le=JSON.parse(W.content.metadata).header)!=null&&le.text?(fe(),me("div",X_,[M("p",Z_,Fe(JSON.parse(W.content.metadata).header.text),1)])):Ge("",!0),M("p",U_,Fe((f0=JSON.parse(W.content.metadata).text)==null?void 0:f0.body),1),(r0=JSON.parse(W.content.metadata))!=null&&r0.buttons?(fe(),me("div",Y_,[(fe(!0),me(G1,null,lr((V0=JSON.parse(W.content.metadata))==null?void 0:V0.buttons,(y0,Nt)=>(fe(),me("div",{key:Nt,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[M("span",null,[y0.type==="COPY_CODE"?(fe(),me("svg",G_,[...X[5]||(X[5]=[M("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)])])):y0.type==="PHONE_NUMBER"?(fe(),me("svg",W_,[...X[6]||(X[6]=[M("g",{fill:"none"},[M("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),M("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)])])):y0.type==="URL"?(fe(),me("img",z_)):(fe(),me("img",K_))]),M("span",null,Fe(y0.text),1)]))),128))])):Ge("",!0)])):Ge("",!0),JSON.parse(W.content.metadata).type==="unsupported"?(fe(),me("div",Q_,[X[7]||(X[7]=M("span",{class:"text-red-500"},[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"})])],-1)),M("p",J_,Fe(xe.$t("Error code"))+" : "+Fe(JSON.parse(W.content.metadata).errors[0].code),1),M("p",j_,Fe(JSON.parse(W.content.metadata).errors[0].error_data.details),1)])):Ge("",!0),JSON.parse(W.content.metadata).type==="button"?(fe(),me("div",ev,[M("p",tv,Fe(JSON.parse(W.content.metadata).button.text),1)])):Ge("",!0),JSON.parse(W.content.metadata).type==="interactive"?(fe(),me("div",nv,[JSON.parse(W.content.metadata).interactive.type=="button_reply"?(fe(),me("div",rv,[M("p",av,Fe((G0=(rt=JSON.parse(W.content.metadata).interactive)==null?void 0:rt.button_reply)==null?void 0:G0.title),1)])):Ge("",!0),JSON.parse(W.content.metadata).interactive.type=="list_reply"?(fe(),me("p",iv,Fe(($0=(M0=JSON.parse(W.content.metadata).interactive)==null?void 0:M0.list_reply)==null?void 0:$0.title),1)):Ge("",!0),JSON.parse(W.content.metadata).interactive.type=="list_reply"?(fe(),me("p",sv,Fe((mt=(z0=JSON.parse(W.content.metadata).interactive)==null?void 0:z0.list_reply)==null?void 0:mt.description),1)):Ge("",!0)])):JSON.parse(W.content.metadata).type==="image"?(fe(),me("div",lv,[W.content.media!=null?(fe(),me("img",{key:0,src:(Et=(kt=W.content)==null?void 0:kt.media)==null?void 0:Et.path,alt:"Image",class:"mb-2 max-w-[320px]"},null,8,ov)):(fe(),me("div",uv,[X[8]||(X[8]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("g",{fill:"none"},[M("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),M("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),Rt(" "+Fe(xe.$t("Content not available")),1)])),(A0=JSON.parse(W.content.metadata).image)!=null&&A0.caption?(fe(),me("div",fv,Fe((ze=JSON.parse(W.content.metadata).image)==null?void 0:ze.caption),1)):Ge("",!0),(K0=JSON.parse(W.content.metadata))!=null&&K0.buttons?(fe(),me("div",cv,[(fe(!0),me(G1,null,lr((w0=JSON.parse(W.content.metadata))==null?void 0:w0.buttons,(y0,Nt)=>(fe(),me("div",{key:Nt,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[M("span",null,[y0.type==="COPY_CODE"?(fe(),me("svg",_v,[...X[9]||(X[9]=[M("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)])])):y0.type==="PHONE_NUMBER"?(fe(),me("svg",vv,[...X[10]||(X[10]=[M("g",{fill:"none"},[M("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),M("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)])])):y0.type==="URL"?(fe(),me("img",hv)):(fe(),me("img",dv))]),M("span",null,Fe(y0.text),1)]))),128))])):Ge("",!0)])):JSON.parse(W.content.metadata).type==="document"?(fe(),me("div",mv,[M("div",pv,[M("div",bv,[M("div",null,[He((d1=(pt=W.content)==null?void 0:pt.media)==null?void 0:d1.type)==="PDF"?(fe(),me("svg",xv,[...X[11]||(X[11]=[M("path",{fill:"red",d:"m531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7c-3.8-21.3-19.5-29.6-32.9-30.2c-15.8-.7-29.9 8.3-33.4 21.4c-6.6 24-.7 56.8 10.1 98.6c-13.6 32.4-35.3 79.5-51.2 107.5c-29.6 15.3-69.3 38.9-75.2 68.7c-1.2 5.5.2 12.5 3.5 18.8c3.7 7 9.6 12.4 16.5 15c3 1.1 6.6 2 10.8 2c17.6 0 46.1-14.2 84.1-79.4c5.8-1.9 11.8-3.9 17.6-5.9c27.2-9.2 55.4-18.8 80.9-23.1c28.2 15.1 60.3 24.8 82.1 24.8c21.6 0 30.1-12.8 33.3-20.5c5.6-13.5 2.9-30.5-6.2-39.6c-13.2-13-45.3-16.4-95.3-10.2c-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7c6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4c-4.9-19.9-5.6-48.1-2.7-51.4c.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2c-21.6 4.9-41.3 13-58.9 20.2c-4.2 1.7-8.3 3.4-12.3 5c13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6c40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"},null,-1)])])):Ge("",!0),He((bt=(r1=W.content)==null?void 0:r1.media)==null?void 0:bt.type)==="XLSX"||He((v0=(Ut=W.content)==null?void 0:Ut.media)==null?void 0:v0.type)==="XLS"?(fe(),me("svg",wv,[...X[12]||(X[12]=[R1('<defs><linearGradient id="vscodeIconsFileTypeExcel0" x1="4.494" x2="13.832" y1="-2092.086" y2="-2075.914" gradientTransform="translate(0 2100)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#18884f"></stop><stop offset=".5" stop-color="#117e43"></stop><stop offset="1" stop-color="#0b6631"></stop></linearGradient></defs><path fill="#185c37" d="M19.581 15.35L8.512 13.4v14.409A1.192 1.192 0 0 0 9.705 29h19.1A1.192 1.192 0 0 0 30 27.809V22.5Z"></path><path fill="#21a366" d="M19.581 3H9.705a1.192 1.192 0 0 0-1.193 1.191V9.5L19.581 16l5.861 1.95L30 16V9.5Z"></path><path fill="#107c41" d="M8.512 9.5h11.069V16H8.512Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2Z" opacity=".1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypeExcel0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="m5.7 19.873l2.511-3.884l-2.3-3.862h1.847L9.013 14.6c.116.234.2.408.238.524h.017c.082-.188.169-.369.26-.546l1.342-2.447h1.7l-2.359 3.84l2.419 3.905h-1.809l-1.45-2.711A2.355 2.355 0 0 1 9.2 16.8h-.024a1.688 1.688 0 0 1-.168.351l-1.493 2.722Z"></path><path fill="#33c481" d="M28.806 3h-9.225v6.5H30V4.191A1.192 1.192 0 0 0 28.806 3Z"></path><path fill="#107c41" d="M19.581 16H30v6.5H19.581Z"></path>',12)])])):Ge("",!0),He((It=(g=W.content)==null?void 0:g.media)==null?void 0:It.type)==="DOC"||He((W1=(m1=W.content)==null?void 0:m1.media)==null?void 0:W1.type)==="DOCX"?(fe(),me("svg",yv,[...X[13]||(X[13]=[R1('<defs><linearGradient id="vscodeIconsFileTypeWord0" x1="4.494" x2="13.832" y1="-1712.086" y2="-1695.914" gradientTransform="translate(0 1720)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2368c4"></stop><stop offset=".5" stop-color="#1a5dbe"></stop><stop offset="1" stop-color="#1146ac"></stop></linearGradient></defs><path fill="#41a5ee" d="M28.806 3H9.705a1.192 1.192 0 0 0-1.193 1.191V9.5l11.069 3.25L30 9.5V4.191A1.192 1.192 0 0 0 28.806 3Z"></path><path fill="#2b7cd3" d="M30 9.5H8.512V16l11.069 1.95L30 16Z"></path><path fill="#185abd" d="M8.512 16v6.5l10.418 1.3L30 22.5V16Z"></path><path fill="#103f91" d="M9.705 29h19.1A1.192 1.192 0 0 0 30 27.809V22.5H8.512v5.309A1.192 1.192 0 0 0 9.705 29Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2Z" opacity=".1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypeWord0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="M6.9 17.988c.023.184.039.344.046.481h.028c.01-.13.032-.287.065-.47s.062-.338.089-.465l1.255-5.407h1.624l1.3 5.326a7.761 7.761 0 0 1 .162 1h.022a7.6 7.6 0 0 1 .135-.975l1.039-5.358h1.477l-1.824 7.748h-1.727l-1.237-5.126q-.054-.222-.122-.578t-.084-.52h-.021q-.021.189-.084.561c-.042.249-.075.432-.1.552L7.78 19.871H6.024L4.19 12.127h1.5l1.131 5.418a4.469 4.469 0 0 1 .079.443Z"></path>',11)])])):Ge("",!0),He((Lt=(a1=W.content)==null?void 0:a1.media)==null?void 0:Lt.type)==="PPT"||He((ye=(a0=W.content)==null?void 0:a0.media)==null?void 0:ye.type)==="PPTX"?(fe(),me("svg",gv,[...X[14]||(X[14]=[R1('<defs><linearGradient id="vscodeIconsFileTypePowerpoint0" x1="4.494" x2="13.832" y1="-1748.086" y2="-1731.914" gradientTransform="translate(0 1756)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ca4c28"></stop><stop offset=".5" stop-color="#c5401e"></stop><stop offset="1" stop-color="#b62f14"></stop></linearGradient></defs><path fill="#ed6c47" d="M18.93 17.3L16.977 3h-.146A12.9 12.9 0 0 0 3.953 15.854V16Z"></path><path fill="#ff8f6b" d="M17.123 3h-.146v13l6.511 2.6L30 16v-.146A12.9 12.9 0 0 0 17.123 3Z"></path><path fill="#d35230" d="M30 16v.143A12.905 12.905 0 0 1 17.12 29h-.287a12.907 12.907 0 0 1-12.88-12.857V16Z"></path><path d="M17.628 9.389V23.26a1.2 1.2 0 0 1-.742 1.1a1.16 1.16 0 0 1-.45.091H7.027a10.08 10.08 0 0 1-.521-.65a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85a8.82 8.82 0 0 1 .456-.65h9.93a1.2 1.2 0 0 1 1.192 1.189Z" opacity=".1"></path><path d="M16.977 10.04v13.871a1.15 1.15 0 0 1-.091.448a1.2 1.2 0 0 1-1.1.741H7.62q-.309-.314-.593-.65a10.08 10.08 0 0 1-.521-.65a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.735a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path d="M16.977 10.04v12.571a1.2 1.2 0 0 1-1.192 1.189H6.506a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.735a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path d="M16.326 10.04v12.571a1.2 1.2 0 0 1-1.192 1.189H6.506a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.084a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypePowerpoint0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="M9.293 12.028a3.287 3.287 0 0 1 2.174.636a2.27 2.27 0 0 1 .756 1.841a2.555 2.555 0 0 1-.373 1.376a2.49 2.49 0 0 1-1.059.935a3.607 3.607 0 0 1-1.591.334H7.687v2.8H6.141v-7.922ZM7.686 15.94h1.331a1.735 1.735 0 0 0 1.177-.351a1.3 1.3 0 0 0 .4-1.025q0-1.309-1.525-1.31H7.686v2.686Z"></path>',10)])])):Ge("",!0)]),M("div",null,[M("div",null,[M("p",Sv,Fe((T1=(Ke=W.content)==null?void 0:Ke.media)==null?void 0:T1.name),1)]),M("div",Av,[M("span",null,Fe(He((lt=(L0=W.content)==null?void 0:L0.media)==null?void 0:lt.type)),1),X[15]||(X[15]=M("span",null,[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24"},[M("circle",{cx:"12.1",cy:"12.1",r:"1",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],-1)),M("span",null,Fe(Be((o0=(B1=W.content)==null?void 0:B1.media)==null?void 0:o0.size)),1)])]),M("a",{href:(An=(Xn=W.content)==null?void 0:Xn.media)==null?void 0:An.path,download:(Ot=(xt=W.content)==null?void 0:xt.media)==null?void 0:Ot.name,target:"_blank",onClick:de,class:"flex justify-end w-full"},[m.value?(fe(),me("svg",Ev,[...X[17]||(X[17]=[R1('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="2 4" stroke-dashoffset="6" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21"><animate attributeName="stroke-dashoffset" dur="0.6s" repeatCount="indefinite" values="6;0"></animate></path><path stroke-dasharray="30" stroke-dashoffset="30" d="M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.3s" values="30;0"></animate></path><path stroke-dasharray="10" stroke-dashoffset="10" d="M12 8v7.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="10;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 15.5l3.5 -3.5M12 15.5l-3.5 -3.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"></animate></path></g>',1)])])):(fe(),me("svg",Rv,[...X[16]||(X[16]=[M("path",{fill:"currentColor",d:"M4.025 11.975q0 2.825 1.725 5t4.4 2.825q.375.1.6.425t.225.725q0 .4-.275.663t-.625.187q-3.5-.7-5.775-3.437t-2.275-6.388q0-3.65 2.288-6.387T10.1 2.15q.35-.075.625.188T11 3q0 .4-.225.725t-.6.425q-2.7.65-4.425 2.825t-1.725 5Zm8.95 1.15l1.85-1.85q.3-.3.725-.3t.725.3q.3.3.288.725t-.313.725L12.675 16.3q-.3.3-.7.3t-.7-.3L7.65 12.65q-.3-.3-.288-.713t.313-.712q.3-.3.713-.3t.712.3l1.875 1.9V8q0-.425.288-.713T11.975 7q.425 0 .713.288t.287.712v5.125Zm3.05 5.75q.375-.225.813-.2t.762.35q.3.3.25.713t-.4.637q-.8.5-1.675.863t-1.8.562q-.4.075-.7-.175t-.3-.675q0-.425.263-.75t.687-.45q.55-.15 1.075-.375t1.025-.5ZM13.975 4.2q-.425-.125-.7-.45T13 3q0-.425.288-.675t.687-.175q.95.2 1.838.562T17.5 3.6q.35.225.375.625t-.25.7q-.3.325-.738.35t-.812-.2q-.5-.275-1.025-.5T13.975 4.2Zm5.75 9.75q.125-.425.463-.7t.762-.275q.425 0 .688.325t.162.725q-.2.95-.575 1.812t-.9 1.663q-.225.35-.625.35t-.675-.275q-.3-.3-.337-.725t.187-.8q.275-.5.488-1.012t.362-1.088Zm-.85-6.075q-.225-.375-.188-.788t.338-.712q.275-.275.675-.263t.625.338q.55.8.925 1.688t.575 1.837q.075.4-.187.7t-.688.3q-.425 0-.762-.287t-.463-.713q-.15-.55-.363-1.075t-.487-1.025Z"},null,-1)])]))],8,Mv)])]),(z1=JSON.parse(W.content.metadata))!=null&&z1.buttons?(fe(),me("div",Tv,[(fe(!0),me(G1,null,lr((un=JSON.parse(W.content.metadata))==null?void 0:un.buttons,(y0,Nt)=>(fe(),me("div",{key:Nt,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[M("span",null,[y0.type==="COPY_CODE"?(fe(),me("svg",Bv,[...X[18]||(X[18]=[M("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)])])):y0.type==="PHONE_NUMBER"?(fe(),me("svg",Cv,[...X[19]||(X[19]=[M("g",{fill:"none"},[M("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),M("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)])])):y0.type==="URL"?(fe(),me("img",kv)):(fe(),me("img",Iv))]),M("span",null,Fe(y0.text),1)]))),128))])):Ge("",!0)])):JSON.parse(W.content.metadata).type==="location"?(fe(),me("div",Lv,[st(nt(O_),{"api-key":u0("google_maps_api_key"),style:{width:"300px",height:"200px"},center:i0(W.content.metadata),zoom:15},{default:At(()=>[st(nt(P_),{options:{position:i0(W.content.metadata)}},null,8,["options"])]),_:1},8,["api-key","center"]),M("button",{onClick:X[0]||(X[0]=y0=>Ne(W.content.metadata)),class:"w-full mt-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-2.5 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors cursor-pointer shadow-sm"},[X[20]||(X[20]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[M("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),M("span",null,Fe(xe.$t("Directions")),1)])])):JSON.parse(W.content.metadata).type==="sticker"?(fe(),me("div",Ov,[W.content.media!=null?(fe(),me("img",{key:0,src:(Ft=(Zn=W.content)==null?void 0:Zn.media)==null?void 0:Ft.path,alt:"Image",class:"mb-2 max-w-[100px]"},null,8,Nv)):(fe(),me("div",Hv,[X[21]||(X[21]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("g",{fill:"none"},[M("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),M("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),Rt(" "+Fe(xe.$t("Content not available")),1)]))])):JSON.parse(W.content.metadata).type==="contacts"?(fe(),me("div",Vv,[M("div",$v,[X[22]||(X[22]=M("div",{class:"rounded-full p-3 bg-slate-200"},[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 512 512"},[M("path",{fill:"currentColor",d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38c-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6ZM432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75c1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480Z"})])],-1)),M("div",null,Fe(We(W.content.metadata)),1)])])):JSON.parse(W.content.metadata).type==="audio"?(fe(),me("div",Fv,[W.content.media!=null?(fe(),me("audio",Dv,[M("source",{src:(Dt=(fr=W.content)==null?void 0:fr.media)==null?void 0:Dt.path},null,8,Pv),Rt(" "+Fe(xe.$t("Your browser does not support the audio element")),1)])):(fe(),me("div",qv,[X[23]||(X[23]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("g",{fill:"none"},[M("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),M("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),Rt(" "+Fe(xe.$t("Content not available")),1)]))])):JSON.parse(W.content.metadata).type==="video"?(fe(),me("div",Xv,[W.content.media!=null?(fe(),me("video",Zv,[M("source",{src:(F1=($1=W.content)==null?void 0:$1.media)==null?void 0:F1.path,type:"video/mp4"},null,8,Uv),Rt(" "+Fe(xe.$t("Your browser does not support the video element")),1)])):(fe(),me("div",Yv,[X[24]||(X[24]=M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[M("g",{fill:"none"},[M("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),M("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),Rt(" "+Fe(xe.$t("Content not available")),1)])),(fn=JSON.parse(W.content.metadata).video)!=null&&fn.caption?(fe(),me("div",Gv,Fe((Mn=JSON.parse(W.content.metadata).video)==null?void 0:Mn.caption),1)):Ge("",!0),(Rn=JSON.parse(W.content.metadata))!=null&&Rn.buttons?(fe(),me("div",Wv,[(fe(!0),me(G1,null,lr((D1=JSON.parse(W.content.metadata))==null?void 0:D1.buttons,(y0,Nt)=>(fe(),me("div",{key:Nt,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[M("span",null,[y0.type==="COPY_CODE"?(fe(),me("svg",zv,[...X[25]||(X[25]=[M("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)])])):y0.type==="PHONE_NUMBER"?(fe(),me("svg",Kv,[...X[26]||(X[26]=[M("g",{fill:"none"},[M("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),M("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)])])):y0.type==="URL"?(fe(),me("img",Qv)):(fe(),me("img",Jv))]),M("span",null,Fe(y0.text),1)]))),128))])):Ge("",!0)])):Ge("",!0),be.type==="outbound"&&W.content.user?(fe(),me("div",jv,[M("span",eh,[X[27]||(X[27]=Rt("Sent By: ",-1)),M("u",null,Fe(((P1=W.content.user)==null?void 0:P1.first_name)+" "+((En=W.content.user)==null?void 0:En.last_name)),1)])])):Ge("",!0),M("div",{class:Mt(["flex items-center justify-between space-x-4",be.type==="outbound"&&W.content.user?"":"mt-2"])},[M("p",th,Fe(W.content.created_at),1),M("span",{class:Mt(["relative group cursor-pointer",s0(W.content.logs)==="read"?"text-blue-500":"text-gray-500"])},[M("div",nh,Fe(s0(W.content.logs)),1),s0(W.content.logs)==="sent"?(fe(),me("svg",rh,[...X[28]||(X[28]=[M("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m2.75 8.75l3.5 3.5l7-7.5"},null,-1)])])):Ge("",!0),s0(W.content.logs)==="delivered"||s0(W.content.logs)==="read"?(fe(),me("svg",ah,[...X[29]||(X[29]=[M("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m1.75 9.75l2.5 2.5m3.5-4l2.5-2.5m-4.5 4l2.5 2.5l6-6.5"},null,-1)])])):Ge("",!0),s0(W.content.logs)==="failed"?(fe(),me("svg",{key:2,onClick:X[1]||(X[1]=y0=>Qe.value=!0),class:"text-red-600",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[...X[30]||(X[30]=[M("g",{fill:"currentColor"},[M("path",{d:"M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2zm3.708 6.208L1 11.105V5.383zM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2z"}),M("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.5-5v1.5a.5.5 0 0 1-1 0V11a.5.5 0 0 1 1 0m0 3a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0"})],-1)])])):Ge("",!0)],2)],2),JSON.parse(W.content.metadata).type==="contacts"?(fe(),me("div",ih,Fe(xe.$t("View")),1)):Ge("",!0)])],2),st(S2,{label:xe.$t("Message status: ")+s0(W.content.logs),isOpen:Qe.value,closeBtn:!0,onClose:X[4]||(X[4]=y0=>Qe.value=!1)},{default:At(()=>[M("div",null,[nt(S0).length?(fe(),me("div",sh,[(fe(!0),me(G1,null,lr(nt(S0),(y0,Nt)=>(fe(),me("div",{key:Nt},[M("div",lh,[M("p",oh,"Chat ID: "+Fe(JSON.parse(W.content.logs[0].metadata).id),1),M("button",{onClick:X[2]||(X[2]=sa=>qe(JSON.parse(W.content.logs[0].metadata).id)),class:"text-gray-600 hover:text-black transition"},[...X[31]||(X[31]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[M("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[M("path",{d:"M6 11c0-2.828 0-4.243.879-5.121C7.757 5 9.172 5 12 5h3c2.828 0 4.243 0 5.121.879C21 6.757 21 8.172 21 11v5c0 2.828 0 4.243-.879 5.121C19.243 22 17.828 22 15 22h-3c-2.828 0-4.243 0-5.121-.879C6 20.243 6 18.828 6 16z"}),M("path",{d:"M6 19a3 3 0 0 1-3-3v-6c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h4a3 3 0 0 1 3 3"})])],-1)])])]),M("p",null,"Error Code: "+Fe(y0.code),1),M("p",null,"Title: "+Fe(y0.title),1),M("p",null,"Message: "+Fe(y0.message),1),M("p",null,"Error Details: "+Fe(y0.error_data.details),1)]))),128))])):Ge("",!0),M("div",uh,[M("button",{type:"button",onClick:X[3]||(X[3]=ur(y0=>Qe.value=!1,["self"])),class:"w-full justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},Fe(xe.$t("Cancel")),1)])])]),_:1},8,["label","isOpen"])],64)}}},ch={class:"py-4 md:py-4 relative px-6 md:px-10"},_h={key:0,class:"text-center py-2"},vh={key:0,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md text-sm text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},hh={key:1,class:"py-2"},dh={class:"text-center font-light text-sm border-b border-t py-2 border-dashed border-black"},mh={class:"text-xs"},ph={key:2,class:"py-2 bg-orange-100 my-2 rounded-lg p-2 w-[fit-content] ml-auto"},bh={class:"text-right font-light text-sm"},xh={class:"flex items-center justify-between mt-2 space-x-4"},wh={class:"text-gray-500 text-xs text-right leading-none"},yh={__name:"ChatThread",props:{contactId:{type:Number,required:!0},initialMessages:{type:Array,required:!0},hasMoreMessages:{type:Boolean,required:!0},initialNextPage:{type:Number,required:!0}},setup(W){const be=W,m=e0(be.initialMessages),Ne=e0(!1),de=e0(be.initialNextPage),He=e0(be.hasMoreMessages),Be=async()=>{if(!(Ne.value||!He.value)){Ne.value=!0;try{const We=await Cr.get(`/chats/${be.contactId}/messages?page=${de.value}`);m.value=[...We.data.messages,...m.value],He.value=We.data.hasMoreMessages,de.value=We.data.nextPage}catch(We){console.error("Error loading messages:",We)}finally{Ne.value=!1}}};return(We,i0)=>(fe(),me("div",ch,[He.value?(fe(),me("div",_h,[Ne.value?(fe(),me("div",vh,[...i0[0]||(i0[0]=[M("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Rt(" Loading... ",-1)])])):(fe(),me("button",{key:1,onClick:Be,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md text-sm text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[...i0[1]||(i0[1]=[M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1),Rt(" Load More Messages ",-1)])]))])):Ge("",!0),(fe(!0),me(G1,null,lr(m.value,(u0,s0)=>(fe(),me("div",{key:s0,class:Mt(["flex flex-grow flex-col",u0[0].type==="ticket"?"justify-center":"justify-end"])},[u0[0].type==="chat"?(fe(),E1(fh,{key:0,content:u0[0].value,type:u0[0].value.type},null,8,["content","type"])):Ge("",!0),u0[0].type==="ticket"?(fe(),me("div",hh,[M("div",dh,[M("div",null,Fe(u0[0].value.description),1),M("div",mh,Fe(u0[0].value.created_at),1)])])):Ge("",!0),u0[0].type==="notes"?(fe(),me("div",ph,[M("div",bh,[M("div",null,Fe(u0[0].value.content),1),M("div",xh,[M("p",wh,Fe(u0[0].value.created_at),1)])])])):Ge("",!0)],2))),128))]))}};var ii={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ii.exports;(function(W,be){(function(){var m,Ne="4.17.21",de=200,He="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Be="Expected a function",We="Invalid `variable` option passed into `_.template`",i0="__lodash_hash_undefined__",u0=500,s0="__lodash_placeholder__",Qe=1,E0=2,S0=4,Ue=1,qe=2,xe=1,X=2,le=4,f0=8,r0=16,V0=32,rt=64,G0=128,M0=256,$0=512,z0=30,mt="...",kt=800,Et=16,A0=1,ze=2,K0=3,w0=1/0,pt=9007199254740991,d1=17976931348623157e292,r1=0/0,bt=4294967295,Ut=bt-1,v0=bt>>>1,g=[["ary",G0],["bind",xe],["bindKey",X],["curry",f0],["curryRight",r0],["flip",$0],["partial",V0],["partialRight",rt],["rearg",M0]],It="[object Arguments]",m1="[object Array]",W1="[object AsyncFunction]",a1="[object Boolean]",Lt="[object Date]",a0="[object DOMException]",ye="[object Error]",Ke="[object Function]",T1="[object GeneratorFunction]",L0="[object Map]",lt="[object Number]",B1="[object Null]",o0="[object Object]",Xn="[object Promise]",An="[object Proxy]",xt="[object RegExp]",Ot="[object Set]",z1="[object String]",un="[object Symbol]",Zn="[object Undefined]",Ft="[object WeakMap]",fr="[object WeakSet]",Dt="[object ArrayBuffer]",$1="[object DataView]",F1="[object Float32Array]",fn="[object Float64Array]",Mn="[object Int8Array]",Rn="[object Int16Array]",D1="[object Int32Array]",P1="[object Uint8Array]",En="[object Uint8ClampedArray]",y0="[object Uint16Array]",Nt="[object Uint32Array]",sa=/\b__p \+= '';/g,li=/\b(__p \+=) '' \+/g,oi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,la=/&(?:amp|lt|gt|quot|#39);/g,oa=/[&<>"']/g,ui=RegExp(la.source),fi=RegExp(oa.source),ci=/<%-([\s\S]+?)%>/g,i1=/<%([\s\S]+?)%>/g,K1=/<%=([\s\S]+?)%>/g,p1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cr=/^\w*$/,q1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W0=/[\\^$.*+?()[\]{}|]/g,cn=RegExp(W0.source),kr=/^\s+/,_i=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ua=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tn=/[()=,{}\[\]\/\s]/,fa=/\\(\\)?/g,vi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ca=/\w*$/,hi=/^[-+]0x[0-9a-f]+$/i,_a=/^0b[01]+$/i,va=/^\[object .+?Constructor\]$/,di=/^0o[0-7]+$/i,ha=/^(?:0|[1-9]\d*)$/,mi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_r=/($^)/,N0=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",k0="\\u0300-\\u036f",_n="\\ufe20-\\ufe2f",vr="\\u20d0-\\u20ff",hr=k0+_n+vr,Q1="\\u2700-\\u27bf",da="a-z\\xdf-\\xf6\\xf8-\\xff",Un="\\xac\\xb1\\xd7\\xf7",X1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",J1="\\u2000-\\u206f",pi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ma="A-Z\\xc0-\\xd6\\xd8-\\xde",Bn="\\ufe0e\\ufe0f",dr=Un+X1+J1+pi,Yn="[']",Ir="["+Ee+"]",b1="["+dr+"]",mr="["+hr+"]",pa="\\d+",bi="["+Q1+"]",ba="["+da+"]",ot="[^"+Ee+dr+pa+Q1+da+ma+"]",Cn="\\ud83c[\\udffb-\\udfff]",j1="(?:"+mr+"|"+Cn+")",xa="[^"+Ee+"]",F0="(?:\\ud83c[\\udde6-\\uddff]){2}",Gn="[\\ud800-\\udbff][\\udc00-\\udfff]",s1="["+ma+"]",Lr="\\u200d",wa="(?:"+ba+"|"+ot+")",en="(?:"+s1+"|"+ot+")",ut="(?:"+Yn+"(?:d|ll|m|re|s|t|ve))?",ya="(?:"+Yn+"(?:D|LL|M|RE|S|T|VE))?",x1=j1+"?",ga="["+Bn+"]?",xi="(?:"+Lr+"(?:"+[xa,F0,Gn].join("|")+")"+ga+x1+")*",wi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sa=ga+x1+xi,Or="(?:"+[bi,F0,Gn].join("|")+")"+Sa,Aa="(?:"+[xa+mr+"?",mr,F0,Gn,Ir].join("|")+")",gi=RegExp(Yn,"g"),Si=RegExp(mr,"g"),Nr=RegExp(Cn+"(?="+Cn+")|"+Aa+Sa,"g"),tn=RegExp([s1+"?"+ba+"+"+ut+"(?="+[b1,s1,"$"].join("|")+")",en+"+"+ya+"(?="+[b1,s1+wa,"$"].join("|")+")",s1+"?"+wa+"+"+ut,s1+"+"+ya,yi,wi,pa,Or].join("|"),"g"),Ma=RegExp("["+Lr+Ee+hr+Bn+"]"),Hr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wn=-1,D0={};D0[F1]=D0[fn]=D0[Mn]=D0[Rn]=D0[D1]=D0[P1]=D0[En]=D0[y0]=D0[Nt]=!0,D0[It]=D0[m1]=D0[Dt]=D0[a1]=D0[$1]=D0[Lt]=D0[ye]=D0[Ke]=D0[L0]=D0[lt]=D0[o0]=D0[xt]=D0[Ot]=D0[z1]=D0[Ft]=!1;var Q0={};Q0[It]=Q0[m1]=Q0[Dt]=Q0[$1]=Q0[a1]=Q0[Lt]=Q0[F1]=Q0[fn]=Q0[Mn]=Q0[Rn]=Q0[D1]=Q0[L0]=Q0[lt]=Q0[o0]=Q0[xt]=Q0[Ot]=Q0[z1]=Q0[un]=Q0[P1]=Q0[En]=Q0[y0]=Q0[Nt]=!0,Q0[ye]=Q0[Ke]=Q0[Ft]=!1;var Ai={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ra={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ri={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ei=parseFloat,Ti=parseInt,Ea=typeof Er=="object"&&Er&&Er.Object===Object&&Er,Vr=typeof self=="object"&&self&&self.Object===Object&&self,wt=Ea||Vr||Function("return this")(),$r=be&&!be.nodeType&&be,C1=$r&&!0&&W&&!W.nodeType&&W,Ta=C1&&C1.exports===$r,vn=Ta&&Ea.process,l1=function(){try{var L=C1&&C1.require&&C1.require("util").types;return L||vn&&vn.binding&&vn.binding("util")}catch{}}(),Fr=l1&&l1.isArrayBuffer,Ba=l1&&l1.isDate,P0=l1&&l1.isMap,Ca=l1&&l1.isRegExp,In=l1&&l1.isSet,ka=l1&&l1.isTypedArray;function Yt(L,ee,Z){switch(Z.length){case 0:return L.call(ee);case 1:return L.call(ee,Z[0]);case 2:return L.call(ee,Z[0],Z[1]);case 3:return L.call(ee,Z[0],Z[1],Z[2])}return L.apply(ee,Z)}function Bi(L,ee,Z,se){for(var Xe=-1,c0=L==null?0:L.length;++Xe<c0;){var l0=L[Xe];ee(se,l0,Z(l0),L)}return se}function o1(L,ee){for(var Z=-1,se=L==null?0:L.length;++Z<se&&ee(L[Z],Z,L)!==!1;);return L}function ct(L,ee){for(var Z=L==null?0:L.length;Z--&&ee(L[Z],Z,L)!==!1;);return L}function k1(L,ee){for(var Z=-1,se=L==null?0:L.length;++Z<se;)if(!ee(L[Z],Z,L))return!1;return!0}function nn(L,ee){for(var Z=-1,se=L==null?0:L.length,Xe=0,c0=[];++Z<se;){var l0=L[Z];ee(l0,Z,L)&&(c0[Xe++]=l0)}return c0}function pr(L,ee){var Z=L==null?0:L.length;return!!Z&&oe(L,ee,0)>-1}function Dr(L,ee,Z){for(var se=-1,Xe=L==null?0:L.length;++se<Xe;)if(Z(ee,L[se]))return!0;return!1}function tt(L,ee){for(var Z=-1,se=L==null?0:L.length,Xe=Array(se);++Z<se;)Xe[Z]=ee(L[Z],Z,L);return Xe}function rn(L,ee){for(var Z=-1,se=ee.length,Xe=L.length;++Z<se;)L[Xe+Z]=ee[Z];return L}function Ln(L,ee,Z,se){var Xe=-1,c0=L==null?0:L.length;for(se&&c0&&(Z=L[++Xe]);++Xe<c0;)Z=ee(Z,L[Xe],Xe,L);return Z}function Ci(L,ee,Z,se){var Xe=L==null?0:L.length;for(se&&Xe&&(Z=L[--Xe]);Xe--;)Z=ee(Z,L[Xe],Xe,L);return Z}function br(L,ee){for(var Z=-1,se=L==null?0:L.length;++Z<se;)if(ee(L[Z],Z,L))return!0;return!1}var Ia=_e("length");function ki(L){return L.split("")}function Ii(L){return L.match(Ht)||[]}function I(L,ee,Z){var se;return Z(L,function(Xe,c0,l0){if(ee(Xe,c0,l0))return se=c0,!1}),se}function J(L,ee,Z,se){for(var Xe=L.length,c0=Z+(se?1:-1);se?c0--:++c0<Xe;)if(ee(L[c0],c0,L))return c0;return-1}function oe(L,ee,Z){return ee===ee?C(L,ee,Z):J(L,Se,Z)}function j(L,ee,Z,se){for(var Xe=Z-1,c0=L.length;++Xe<c0;)if(se(L[Xe],ee))return Xe;return-1}function Se(L){return L!==L}function ne(L,ee){var Z=L==null?0:L.length;return Z?we(L,ee)/Z:r1}function _e(L){return function(ee){return ee==null?m:ee[L]}}function Ce(L){return function(ee){return L==null?m:L[ee]}}function Oe(L,ee,Z,se,Xe){return Xe(L,function(c0,l0,_0){Z=se?(se=!1,c0):ee(Z,c0,l0,_0)}),Z}function P(L,ee){var Z=L.length;for(L.sort(ee);Z--;)L[Z]=L[Z].value;return L}function we(L,ee){for(var Z,se=-1,Xe=L.length;++se<Xe;){var c0=ee(L[se]);c0!==m&&(Z=Z===m?c0:Z+c0)}return Z}function R(L,ee){for(var Z=-1,se=Array(L);++Z<L;)se[Z]=ee(Z);return se}function T(L,ee){return tt(ee,function(Z){return[Z,L[Z]]})}function N(L){return L&&L.slice(0,s(L)+1).replace(kr,"")}function r(L){return function(ee){return L(ee)}}function G(L,ee){return tt(ee,function(Z){return L[Z]})}function q(L,ee){return L.has(ee)}function V(L,ee){for(var Z=-1,se=L.length;++Z<se&&oe(ee,L[Z],0)>-1;);return Z}function o(L,ee){for(var Z=L.length;Z--&&oe(ee,L[Z],0)>-1;);return Z}function w(L,ee){for(var Z=L.length,se=0;Z--;)L[Z]===ee&&++se;return se}var E=Ce(Ai),B=Ce(Ra);function O(L){return"\\"+Ri[L]}function i(L,ee){return L==null?m:L[ee]}function b(L){return Ma.test(L)}function h(L){return Hr.test(L)}function u(L){for(var ee,Z=[];!(ee=L.next()).done;)Z.push(ee.value);return Z}function d(L){var ee=-1,Z=Array(L.size);return L.forEach(function(se,Xe){Z[++ee]=[Xe,se]}),Z}function p(L,ee){return function(Z){return L(ee(Z))}}function l(L,ee){for(var Z=-1,se=L.length,Xe=0,c0=[];++Z<se;){var l0=L[Z];(l0===ee||l0===s0)&&(L[Z]=s0,c0[Xe++]=Z)}return c0}function f(L){var ee=-1,Z=Array(L.size);return L.forEach(function(se){Z[++ee]=se}),Z}function c(L){var ee=-1,Z=Array(L.size);return L.forEach(function(se){Z[++ee]=[se,se]}),Z}function C(L,ee,Z){for(var se=Z-1,Xe=L.length;++se<Xe;)if(L[se]===ee)return se;return-1}function ie(L,ee,Z){for(var se=Z+1;se--;)if(L[se]===ee)return se;return se}function F(L){return b(L)?ue(L):Ia(L)}function U(L){return b(L)?he(L):ki(L)}function s(L){for(var ee=L.length;ee--&&_i.test(L.charAt(ee)););return ee}var _=Ce(Mi);function ue(L){for(var ee=Nr.lastIndex=0;Nr.test(L);)++ee;return ee}function he(L){return L.match(Nr)||[]}function Le(L){return L.match(tn)||[]}var $e=function L(ee){ee=ee==null?wt:ke.defaults(wt.Object(),ee,ke.pick(wt,kn));var Z=ee.Array,se=ee.Date,Xe=ee.Error,c0=ee.Function,l0=ee.Math,_0=ee.Object,J0=ee.RegExp,it=ee.String,q0=ee.TypeError,Gt=Z.prototype,u1=c0.prototype,vt=_0.prototype,qt=ee["__core-js_shared__"],I1=u1.toString,I0=vt.hasOwnProperty,Wt=0,an=function(){var e=/[^.]+$/.exec(qt&&qt.keys&&qt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),f1=vt.toString,zt=I1.call(_0),On=wt._,La=J0("^"+I1.call(I0).replace(W0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zn=Ta?ee.Buffer:m,Kt=ee.Symbol,y=ee.Uint8Array,A=zn?zn.allocUnsafe:m,H=p(_0.getPrototypeOf,_0),D=_0.create,K=vt.propertyIsEnumerable,k=Gt.splice,Q=Kt?Kt.isConcatSpreadable:m,re=Kt?Kt.iterator:m,z=Kt?Kt.toStringTag:m,ve=function(){try{var e=nr(_0,"defineProperty");return e({},"",{}),e}catch{}}(),ae=ee.clearTimeout!==wt.clearTimeout&&ee.clearTimeout,pe=se&&se.now!==wt.Date.now&&se.now,De=ee.setTimeout!==wt.setTimeout&&ee.setTimeout,je=l0.ceil,Re=l0.floor,Je=_0.getOwnPropertySymbols,ce=zn?zn.isBuffer:m,Ze=ee.isFinite,b0=Gt.join,Te=p(_0.keys,_0),Ve=l0.max,ge=l0.min,t0=se.now,j0=ee.parseInt,Pe=l0.random,d0=Gt.reverse,x0=nr(ee,"DataView"),Z0=nr(ee,"Map"),Vt=nr(ee,"Promise"),et=nr(ee,"Set"),U0=nr(ee,"WeakMap"),yt=nr(_0,"create"),Tt=U0&&new U0,gt={},w1=rr(x0),y1=rr(Z0),Bt=rr(Vt),L1=rr(et),Nn=rr(U0),Hn=Kt?Kt.prototype:m,Vn=Hn?Hn.valueOf:m,Pr=Hn?Hn.toString:m;function x(e){if(_t(e)&&!g0(e)&&!(e instanceof T0)){if(e instanceof Qt)return e;if(I0.call(e,"__wrapped__"))return Il(e)}return new Qt(e)}var X0=function(){function e(){}return function(t){if(!ft(t))return{};if(D)return D(t);e.prototype=t;var n=new e;return e.prototype=m,n}}();function Kn(){}function Qt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=m}x.templateSettings={escape:ci,evaluate:i1,interpolate:K1,variable:"",imports:{_:x}},x.prototype=Kn.prototype,x.prototype.constructor=x,Qt.prototype=X0(Kn.prototype),Qt.prototype.constructor=Qt;function T0(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bt,this.__views__=[]}function qr(){var e=new T0(this.__wrapped__);return e.__actions__=c1(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=c1(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=c1(this.__views__),e}function Oa(){if(this.__filtered__){var e=new T0(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Qn(){var e=this.__wrapped__.value(),t=this.__dir__,n=g0(e),a=t<0,v=n?e.length:0,S=To(0,v,this.__views__),$=S.start,Y=S.end,te=Y-$,Ae=a?Y:$-1,Me=this.__iteratees__,Ie=Me.length,Ye=0,n0=ge(te,this.__takeCount__);if(!n||!a&&v==te&&n0==te)return tl(e,this.__actions__);var m0=[];e:for(;te--&&Ye<n0;){Ae+=t;for(var B0=-1,p0=e[Ae];++B0<Ie;){var O0=Me[B0],H0=O0.iteratee,A1=O0.type,n1=H0(p0);if(A1==ze)p0=n1;else if(!n1){if(A1==A0)continue e;break e}}m0[Ye++]=p0}return m0}T0.prototype=X0(Kn.prototype),T0.prototype.constructor=T0;function hn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function St(){this.__data__=yt?yt(null):{},this.size=0}function Xr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Zr(e){var t=this.__data__;if(yt){var n=t[e];return n===i0?m:n}return I0.call(t,e)?t[e]:m}function Ur(e){var t=this.__data__;return yt?t[e]!==m:I0.call(t,e)}function Xt(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yt&&t===m?i0:t,this}hn.prototype.clear=St,hn.prototype.delete=Xr,hn.prototype.get=Zr,hn.prototype.has=Ur,hn.prototype.set=Xt;function Jt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function dn(){this.__data__=[],this.size=0}function Yr(e){var t=this.__data__,n=Na(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():k.call(t,n,1),--this.size,!0}function mn(e){var t=this.__data__,n=Na(t,e);return n<0?m:t[n][1]}function Gr(e){return Na(this.__data__,e)>-1}function Jn(e,t){var n=this.__data__,a=Na(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}Jt.prototype.clear=dn,Jt.prototype.delete=Yr,Jt.prototype.get=mn,Jt.prototype.has=Gr,Jt.prototype.set=Jn;function jt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function xr(){this.size=0,this.__data__={hash:new hn,map:new(Z0||Jt),string:new hn}}function wr(e){var t=Ga(this,e).delete(e);return this.size-=t?1:0,t}function T2(e){return Ga(this,e).get(e)}function B2(e){return Ga(this,e).has(e)}function C2(e,t){var n=Ga(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}jt.prototype.clear=xr,jt.prototype.delete=wr,jt.prototype.get=T2,jt.prototype.has=B2,jt.prototype.set=C2;function jn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new jt;++t<n;)this.add(e[t])}function k2(e){return this.__data__.set(e,i0),this}function I2(e){return this.__data__.has(e)}jn.prototype.add=jn.prototype.push=k2,jn.prototype.has=I2;function Z1(e){var t=this.__data__=new Jt(e);this.size=t.size}function L2(){this.__data__=new Jt,this.size=0}function O2(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function N2(e){return this.__data__.get(e)}function H2(e){return this.__data__.has(e)}function V2(e,t){var n=this.__data__;if(n instanceof Jt){var a=n.__data__;if(!Z0||a.length<de-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new jt(a)}return n.set(e,t),this.size=n.size,this}Z1.prototype.clear=L2,Z1.prototype.delete=O2,Z1.prototype.get=N2,Z1.prototype.has=H2,Z1.prototype.set=V2;function Is(e,t){var n=g0(e),a=!n&&ar(e),v=!n&&!a&&qn(e),S=!n&&!a&&!v&&Ar(e),$=n||a||v||S,Y=$?R(e.length,it):[],te=Y.length;for(var Ae in e)(t||I0.call(e,Ae))&&!($&&(Ae=="length"||v&&(Ae=="offset"||Ae=="parent")||S&&(Ae=="buffer"||Ae=="byteLength"||Ae=="byteOffset")||wn(Ae,te)))&&Y.push(Ae);return Y}function Ls(e){var t=e.length;return t?e[Xi(0,t-1)]:m}function $2(e,t){return Wa(c1(e),er(t,0,e.length))}function F2(e){return Wa(c1(e))}function Li(e,t,n){(n!==m&&!U1(e[t],n)||n===m&&!(t in e))&&pn(e,t,n)}function Wr(e,t,n){var a=e[t];(!(I0.call(e,t)&&U1(a,n))||n===m&&!(t in e))&&pn(e,t,n)}function Na(e,t){for(var n=e.length;n--;)if(U1(e[n][0],t))return n;return-1}function D2(e,t,n,a){return $n(e,function(v,S,$){t(a,v,n(v),$)}),a}function Os(e,t){return e&&ln(t,Ct(t),e)}function P2(e,t){return e&&ln(t,v1(t),e)}function pn(e,t,n){t=="__proto__"&&ve?ve(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Oi(e,t){for(var n=-1,a=t.length,v=Z(a),S=e==null;++n<a;)v[n]=S?m:hs(e,t[n]);return v}function er(e,t,n){return e===e&&(n!==m&&(e=e<=n?e:n),t!==m&&(e=e>=t?e:t)),e}function O1(e,t,n,a,v,S){var $,Y=t&Qe,te=t&E0,Ae=t&S0;if(n&&($=v?n(e,a,v,S):n(e)),$!==m)return $;if(!ft(e))return e;var Me=g0(e);if(Me){if($=Co(e),!Y)return c1(e,$)}else{var Ie=Zt(e),Ye=Ie==Ke||Ie==T1;if(qn(e))return al(e,Y);if(Ie==o0||Ie==It||Ye&&!v){if($=te||Ye?{}:Sl(e),!Y)return te?xo(e,P2($,e)):bo(e,Os($,e))}else{if(!Q0[Ie])return v?e:{};$=ko(e,Ie,Y)}}S||(S=new Z1);var n0=S.get(e);if(n0)return n0;S.set(e,$),Jl(e)?e.forEach(function(p0){$.add(O1(p0,t,n,p0,e,S))}):Kl(e)&&e.forEach(function(p0,O0){$.set(O0,O1(p0,t,n,O0,e,S))});var m0=Ae?te?es:ji:te?v1:Ct,B0=Me?m:m0(e);return o1(B0||e,function(p0,O0){B0&&(O0=p0,p0=e[O0]),Wr($,O0,O1(p0,t,n,O0,e,S))}),$}function q2(e){var t=Ct(e);return function(n){return Ns(n,e,t)}}function Ns(e,t,n){var a=n.length;if(e==null)return!a;for(e=_0(e);a--;){var v=n[a],S=t[v],$=e[v];if($===m&&!(v in e)||!S($))return!1}return!0}function Hs(e,t,n){if(typeof e!="function")throw new q0(Be);return ta(function(){e.apply(m,n)},t)}function zr(e,t,n,a){var v=-1,S=pr,$=!0,Y=e.length,te=[],Ae=t.length;if(!Y)return te;n&&(t=tt(t,r(n))),a?(S=Dr,$=!1):t.length>=de&&(S=q,$=!1,t=new jn(t));e:for(;++v<Y;){var Me=e[v],Ie=n==null?Me:n(Me);if(Me=a||Me!==0?Me:0,$&&Ie===Ie){for(var Ye=Ae;Ye--;)if(t[Ye]===Ie)continue e;te.push(Me)}else S(t,Ie,a)||te.push(Me)}return te}var $n=ul(sn),Vs=ul(Hi,!0);function X2(e,t){var n=!0;return $n(e,function(a,v,S){return n=!!t(a,v,S),n}),n}function Ha(e,t,n){for(var a=-1,v=e.length;++a<v;){var S=e[a],$=t(S);if($!=null&&(Y===m?$===$&&!S1($):n($,Y)))var Y=$,te=S}return te}function Z2(e,t,n,a){var v=e.length;for(n=R0(n),n<0&&(n=-n>v?0:v+n),a=a===m||a>v?v:R0(a),a<0&&(a+=v),a=n>a?0:e2(a);n<a;)e[n++]=t;return e}function $s(e,t){var n=[];return $n(e,function(a,v,S){t(a,v,S)&&n.push(a)}),n}function $t(e,t,n,a,v){var S=-1,$=e.length;for(n||(n=Lo),v||(v=[]);++S<$;){var Y=e[S];t>0&&n(Y)?t>1?$t(Y,t-1,n,a,v):rn(v,Y):a||(v[v.length]=Y)}return v}var Ni=fl(),Fs=fl(!0);function sn(e,t){return e&&Ni(e,t,Ct)}function Hi(e,t){return e&&Fs(e,t,Ct)}function Va(e,t){return nn(t,function(n){return yn(e[n])})}function tr(e,t){t=Dn(t,e);for(var n=0,a=t.length;e!=null&&n<a;)e=e[on(t[n++])];return n&&n==a?e:m}function Ds(e,t,n){var a=t(e);return g0(e)?a:rn(a,n(e))}function e1(e){return e==null?e===m?Zn:B1:z&&z in _0(e)?Eo(e):Do(e)}function Vi(e,t){return e>t}function U2(e,t){return e!=null&&I0.call(e,t)}function Y2(e,t){return e!=null&&t in _0(e)}function G2(e,t,n){return e>=ge(t,n)&&e<Ve(t,n)}function $i(e,t,n){for(var a=n?Dr:pr,v=e[0].length,S=e.length,$=S,Y=Z(S),te=1/0,Ae=[];$--;){var Me=e[$];$&&t&&(Me=tt(Me,r(t))),te=ge(Me.length,te),Y[$]=!n&&(t||v>=120&&Me.length>=120)?new jn($&&Me):m}Me=e[0];var Ie=-1,Ye=Y[0];e:for(;++Ie<v&&Ae.length<te;){var n0=Me[Ie],m0=t?t(n0):n0;if(n0=n||n0!==0?n0:0,!(Ye?q(Ye,m0):a(Ae,m0,n))){for($=S;--$;){var B0=Y[$];if(!(B0?q(B0,m0):a(e[$],m0,n)))continue e}Ye&&Ye.push(m0),Ae.push(n0)}}return Ae}function W2(e,t,n,a){return sn(e,function(v,S,$){t(a,n(v),S,$)}),a}function Kr(e,t,n){t=Dn(t,e),e=El(e,t);var a=e==null?e:e[on(H1(t))];return a==null?m:Yt(a,e,n)}function Ps(e){return _t(e)&&e1(e)==It}function z2(e){return _t(e)&&e1(e)==Dt}function K2(e){return _t(e)&&e1(e)==Lt}function Qr(e,t,n,a,v){return e===t?!0:e==null||t==null||!_t(e)&&!_t(t)?e!==e&&t!==t:Q2(e,t,n,a,Qr,v)}function Q2(e,t,n,a,v,S){var $=g0(e),Y=g0(t),te=$?m1:Zt(e),Ae=Y?m1:Zt(t);te=te==It?o0:te,Ae=Ae==It?o0:Ae;var Me=te==o0,Ie=Ae==o0,Ye=te==Ae;if(Ye&&qn(e)){if(!qn(t))return!1;$=!0,Me=!1}if(Ye&&!Me)return S||(S=new Z1),$||Ar(e)?wl(e,t,n,a,v,S):Mo(e,t,te,n,a,v,S);if(!(n&Ue)){var n0=Me&&I0.call(e,"__wrapped__"),m0=Ie&&I0.call(t,"__wrapped__");if(n0||m0){var B0=n0?e.value():e,p0=m0?t.value():t;return S||(S=new Z1),v(B0,p0,n,a,S)}}return Ye?(S||(S=new Z1),Ro(e,t,n,a,v,S)):!1}function J2(e){return _t(e)&&Zt(e)==L0}function Fi(e,t,n,a){var v=n.length,S=v,$=!a;if(e==null)return!S;for(e=_0(e);v--;){var Y=n[v];if($&&Y[2]?Y[1]!==e[Y[0]]:!(Y[0]in e))return!1}for(;++v<S;){Y=n[v];var te=Y[0],Ae=e[te],Me=Y[1];if($&&Y[2]){if(Ae===m&&!(te in e))return!1}else{var Ie=new Z1;if(a)var Ye=a(Ae,Me,te,e,t,Ie);if(!(Ye===m?Qr(Me,Ae,Ue|qe,a,Ie):Ye))return!1}}return!0}function qs(e){if(!ft(e)||No(e))return!1;var t=yn(e)?La:va;return t.test(rr(e))}function j2(e){return _t(e)&&e1(e)==xt}function eo(e){return _t(e)&&Zt(e)==Ot}function to(e){return _t(e)&&ei(e.length)&&!!D0[e1(e)]}function Xs(e){return typeof e=="function"?e:e==null?h1:typeof e=="object"?g0(e)?Ys(e[0],e[1]):Us(e):c2(e)}function Di(e){if(!ea(e))return Te(e);var t=[];for(var n in _0(e))I0.call(e,n)&&n!="constructor"&&t.push(n);return t}function no(e){if(!ft(e))return Fo(e);var t=ea(e),n=[];for(var a in e)a=="constructor"&&(t||!I0.call(e,a))||n.push(a);return n}function Pi(e,t){return e<t}function Zs(e,t){var n=-1,a=_1(e)?Z(e.length):[];return $n(e,function(v,S,$){a[++n]=t(v,S,$)}),a}function Us(e){var t=ns(e);return t.length==1&&t[0][2]?Ml(t[0][0],t[0][1]):function(n){return n===e||Fi(n,e,t)}}function Ys(e,t){return as(e)&&Al(t)?Ml(on(e),t):function(n){var a=hs(n,e);return a===m&&a===t?ds(n,e):Qr(t,a,Ue|qe)}}function $a(e,t,n,a,v){e!==t&&Ni(t,function(S,$){if(v||(v=new Z1),ft(S))ro(e,t,$,n,$a,a,v);else{var Y=a?a(ss(e,$),S,$+"",e,t,v):m;Y===m&&(Y=S),Li(e,$,Y)}},v1)}function ro(e,t,n,a,v,S,$){var Y=ss(e,n),te=ss(t,n),Ae=$.get(te);if(Ae){Li(e,n,Ae);return}var Me=S?S(Y,te,n+"",e,t,$):m,Ie=Me===m;if(Ie){var Ye=g0(te),n0=!Ye&&qn(te),m0=!Ye&&!n0&&Ar(te);Me=te,Ye||n0||m0?g0(Y)?Me=Y:ht(Y)?Me=c1(Y):n0?(Ie=!1,Me=al(te,!0)):m0?(Ie=!1,Me=il(te,!0)):Me=[]:na(te)||ar(te)?(Me=Y,ar(Y)?Me=t2(Y):(!ft(Y)||yn(Y))&&(Me=Sl(te))):Ie=!1}Ie&&($.set(te,Me),v(Me,te,a,S,$),$.delete(te)),Li(e,n,Me)}function Gs(e,t){var n=e.length;if(n)return t+=t<0?n:0,wn(t,n)?e[t]:m}function Ws(e,t,n){t.length?t=tt(t,function(S){return g0(S)?function($){return tr($,S.length===1?S[0]:S)}:S}):t=[h1];var a=-1;t=tt(t,r(h0()));var v=Zs(e,function(S,$,Y){var te=tt(t,function(Ae){return Ae(S)});return{criteria:te,index:++a,value:S}});return P(v,function(S,$){return po(S,$,n)})}function ao(e,t){return zs(e,t,function(n,a){return ds(e,a)})}function zs(e,t,n){for(var a=-1,v=t.length,S={};++a<v;){var $=t[a],Y=tr(e,$);n(Y,$)&&Jr(S,Dn($,e),Y)}return S}function io(e){return function(t){return tr(t,e)}}function qi(e,t,n,a){var v=a?j:oe,S=-1,$=t.length,Y=e;for(e===t&&(t=c1(t)),n&&(Y=tt(e,r(n)));++S<$;)for(var te=0,Ae=t[S],Me=n?n(Ae):Ae;(te=v(Y,Me,te,a))>-1;)Y!==e&&k.call(Y,te,1),k.call(e,te,1);return e}function Ks(e,t){for(var n=e?t.length:0,a=n-1;n--;){var v=t[n];if(n==a||v!==S){var S=v;wn(v)?k.call(e,v,1):Yi(e,v)}}return e}function Xi(e,t){return e+Re(Pe()*(t-e+1))}function so(e,t,n,a){for(var v=-1,S=Ve(je((t-e)/(n||1)),0),$=Z(S);S--;)$[a?S:++v]=e,e+=n;return $}function Zi(e,t){var n="";if(!e||t<1||t>pt)return n;do t%2&&(n+=e),t=Re(t/2),t&&(e+=e);while(t);return n}function C0(e,t){return ls(Rl(e,t,h1),e+"")}function lo(e){return Ls(Mr(e))}function oo(e,t){var n=Mr(e);return Wa(n,er(t,0,n.length))}function Jr(e,t,n,a){if(!ft(e))return e;t=Dn(t,e);for(var v=-1,S=t.length,$=S-1,Y=e;Y!=null&&++v<S;){var te=on(t[v]),Ae=n;if(te==="__proto__"||te==="constructor"||te==="prototype")return e;if(v!=$){var Me=Y[te];Ae=a?a(Me,te,Y):m,Ae===m&&(Ae=ft(Me)?Me:wn(t[v+1])?[]:{})}Wr(Y,te,Ae),Y=Y[te]}return e}var Qs=Tt?function(e,t){return Tt.set(e,t),e}:h1,uo=ve?function(e,t){return ve(e,"toString",{configurable:!0,enumerable:!1,value:ps(t),writable:!0})}:h1;function fo(e){return Wa(Mr(e))}function N1(e,t,n){var a=-1,v=e.length;t<0&&(t=-t>v?0:v+t),n=n>v?v:n,n<0&&(n+=v),v=t>n?0:n-t>>>0,t>>>=0;for(var S=Z(v);++a<v;)S[a]=e[a+t];return S}function co(e,t){var n;return $n(e,function(a,v,S){return n=t(a,v,S),!n}),!!n}function Fa(e,t,n){var a=0,v=e==null?a:e.length;if(typeof t=="number"&&t===t&&v<=v0){for(;a<v;){var S=a+v>>>1,$=e[S];$!==null&&!S1($)&&(n?$<=t:$<t)?a=S+1:v=S}return v}return Ui(e,t,h1,n)}function Ui(e,t,n,a){var v=0,S=e==null?0:e.length;if(S===0)return 0;t=n(t);for(var $=t!==t,Y=t===null,te=S1(t),Ae=t===m;v<S;){var Me=Re((v+S)/2),Ie=n(e[Me]),Ye=Ie!==m,n0=Ie===null,m0=Ie===Ie,B0=S1(Ie);if($)var p0=a||m0;else Ae?p0=m0&&(a||Ye):Y?p0=m0&&Ye&&(a||!n0):te?p0=m0&&Ye&&!n0&&(a||!B0):n0||B0?p0=!1:p0=a?Ie<=t:Ie<t;p0?v=Me+1:S=Me}return ge(S,Ut)}function Js(e,t){for(var n=-1,a=e.length,v=0,S=[];++n<a;){var $=e[n],Y=t?t($):$;if(!n||!U1(Y,te)){var te=Y;S[v++]=$===0?0:$}}return S}function js(e){return typeof e=="number"?e:S1(e)?r1:+e}function g1(e){if(typeof e=="string")return e;if(g0(e))return tt(e,g1)+"";if(S1(e))return Pr?Pr.call(e):"";var t=e+"";return t=="0"&&1/e==-w0?"-0":t}function Fn(e,t,n){var a=-1,v=pr,S=e.length,$=!0,Y=[],te=Y;if(n)$=!1,v=Dr;else if(S>=de){var Ae=t?null:So(e);if(Ae)return f(Ae);$=!1,v=q,te=new jn}else te=t?[]:Y;e:for(;++a<S;){var Me=e[a],Ie=t?t(Me):Me;if(Me=n||Me!==0?Me:0,$&&Ie===Ie){for(var Ye=te.length;Ye--;)if(te[Ye]===Ie)continue e;t&&te.push(Ie),Y.push(Me)}else v(te,Ie,n)||(te!==Y&&te.push(Ie),Y.push(Me))}return Y}function Yi(e,t){return t=Dn(t,e),e=El(e,t),e==null||delete e[on(H1(t))]}function el(e,t,n,a){return Jr(e,t,n(tr(e,t)),a)}function Da(e,t,n,a){for(var v=e.length,S=a?v:-1;(a?S--:++S<v)&&t(e[S],S,e););return n?N1(e,a?0:S,a?S+1:v):N1(e,a?S+1:0,a?v:S)}function tl(e,t){var n=e;return n instanceof T0&&(n=n.value()),Ln(t,function(a,v){return v.func.apply(v.thisArg,rn([a],v.args))},n)}function Gi(e,t,n){var a=e.length;if(a<2)return a?Fn(e[0]):[];for(var v=-1,S=Z(a);++v<a;)for(var $=e[v],Y=-1;++Y<a;)Y!=v&&(S[v]=zr(S[v]||$,e[Y],t,n));return Fn($t(S,1),t,n)}function nl(e,t,n){for(var a=-1,v=e.length,S=t.length,$={};++a<v;){var Y=a<S?t[a]:m;n($,e[a],Y)}return $}function Wi(e){return ht(e)?e:[]}function zi(e){return typeof e=="function"?e:h1}function Dn(e,t){return g0(e)?e:as(e,t)?[e]:kl(Y0(e))}var _o=C0;function Pn(e,t,n){var a=e.length;return n=n===m?a:n,!t&&n>=a?e:N1(e,t,n)}var rl=ae||function(e){return wt.clearTimeout(e)};function al(e,t){if(t)return e.slice();var n=e.length,a=A?A(n):new e.constructor(n);return e.copy(a),a}function Ki(e){var t=new e.constructor(e.byteLength);return new y(t).set(new y(e)),t}function vo(e,t){var n=t?Ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ho(e){var t=new e.constructor(e.source,ca.exec(e));return t.lastIndex=e.lastIndex,t}function mo(e){return Vn?_0(Vn.call(e)):{}}function il(e,t){var n=t?Ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function sl(e,t){if(e!==t){var n=e!==m,a=e===null,v=e===e,S=S1(e),$=t!==m,Y=t===null,te=t===t,Ae=S1(t);if(!Y&&!Ae&&!S&&e>t||S&&$&&te&&!Y&&!Ae||a&&$&&te||!n&&te||!v)return 1;if(!a&&!S&&!Ae&&e<t||Ae&&n&&v&&!a&&!S||Y&&n&&v||!$&&v||!te)return-1}return 0}function po(e,t,n){for(var a=-1,v=e.criteria,S=t.criteria,$=v.length,Y=n.length;++a<$;){var te=sl(v[a],S[a]);if(te){if(a>=Y)return te;var Ae=n[a];return te*(Ae=="desc"?-1:1)}}return e.index-t.index}function ll(e,t,n,a){for(var v=-1,S=e.length,$=n.length,Y=-1,te=t.length,Ae=Ve(S-$,0),Me=Z(te+Ae),Ie=!a;++Y<te;)Me[Y]=t[Y];for(;++v<$;)(Ie||v<S)&&(Me[n[v]]=e[v]);for(;Ae--;)Me[Y++]=e[v++];return Me}function ol(e,t,n,a){for(var v=-1,S=e.length,$=-1,Y=n.length,te=-1,Ae=t.length,Me=Ve(S-Y,0),Ie=Z(Me+Ae),Ye=!a;++v<Me;)Ie[v]=e[v];for(var n0=v;++te<Ae;)Ie[n0+te]=t[te];for(;++$<Y;)(Ye||v<S)&&(Ie[n0+n[$]]=e[v++]);return Ie}function c1(e,t){var n=-1,a=e.length;for(t||(t=Z(a));++n<a;)t[n]=e[n];return t}function ln(e,t,n,a){var v=!n;n||(n={});for(var S=-1,$=t.length;++S<$;){var Y=t[S],te=a?a(n[Y],e[Y],Y,n,e):m;te===m&&(te=e[Y]),v?pn(n,Y,te):Wr(n,Y,te)}return n}function bo(e,t){return ln(e,rs(e),t)}function xo(e,t){return ln(e,yl(e),t)}function Pa(e,t){return function(n,a){var v=g0(n)?Bi:D2,S=t?t():{};return v(n,e,h0(a,2),S)}}function yr(e){return C0(function(t,n){var a=-1,v=n.length,S=v>1?n[v-1]:m,$=v>2?n[2]:m;for(S=e.length>3&&typeof S=="function"?(v--,S):m,$&&t1(n[0],n[1],$)&&(S=v<3?m:S,v=1),t=_0(t);++a<v;){var Y=n[a];Y&&e(t,Y,a,S)}return t})}function ul(e,t){return function(n,a){if(n==null)return n;if(!_1(n))return e(n,a);for(var v=n.length,S=t?v:-1,$=_0(n);(t?S--:++S<v)&&a($[S],S,$)!==!1;);return n}}function fl(e){return function(t,n,a){for(var v=-1,S=_0(t),$=a(t),Y=$.length;Y--;){var te=$[e?Y:++v];if(n(S[te],te,S)===!1)break}return t}}function wo(e,t,n){var a=t&xe,v=jr(e);function S(){var $=this&&this!==wt&&this instanceof S?v:e;return $.apply(a?n:this,arguments)}return S}function cl(e){return function(t){t=Y0(t);var n=b(t)?U(t):m,a=n?n[0]:t.charAt(0),v=n?Pn(n,1).join(""):t.slice(1);return a[e]()+v}}function gr(e){return function(t){return Ln(u2(o2(t).replace(gi,"")),e,"")}}function jr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=X0(e.prototype),a=e.apply(n,t);return ft(a)?a:n}}function yo(e,t,n){var a=jr(e);function v(){for(var S=arguments.length,$=Z(S),Y=S,te=Sr(v);Y--;)$[Y]=arguments[Y];var Ae=S<3&&$[0]!==te&&$[S-1]!==te?[]:l($,te);if(S-=Ae.length,S<n)return ml(e,t,qa,v.placeholder,m,$,Ae,m,m,n-S);var Me=this&&this!==wt&&this instanceof v?a:e;return Yt(Me,this,$)}return v}function _l(e){return function(t,n,a){var v=_0(t);if(!_1(t)){var S=h0(n,3);t=Ct(t),n=function(Y){return S(v[Y],Y,v)}}var $=e(t,n,a);return $>-1?v[S?t[$]:$]:m}}function vl(e){return xn(function(t){var n=t.length,a=n,v=Qt.prototype.thru;for(e&&t.reverse();a--;){var S=t[a];if(typeof S!="function")throw new q0(Be);if(v&&!$&&Ya(S)=="wrapper")var $=new Qt([],!0)}for(a=$?a:n;++a<n;){S=t[a];var Y=Ya(S),te=Y=="wrapper"?ts(S):m;te&&is(te[0])&&te[1]==(G0|f0|V0|M0)&&!te[4].length&&te[9]==1?$=$[Ya(te[0])].apply($,te[3]):$=S.length==1&&is(S)?$[Y]():$.thru(S)}return function(){var Ae=arguments,Me=Ae[0];if($&&Ae.length==1&&g0(Me))return $.plant(Me).value();for(var Ie=0,Ye=n?t[Ie].apply(this,Ae):Me;++Ie<n;)Ye=t[Ie].call(this,Ye);return Ye}})}function qa(e,t,n,a,v,S,$,Y,te,Ae){var Me=t&G0,Ie=t&xe,Ye=t&X,n0=t&(f0|r0),m0=t&$0,B0=Ye?m:jr(e);function p0(){for(var O0=arguments.length,H0=Z(O0),A1=O0;A1--;)H0[A1]=arguments[A1];if(n0)var n1=Sr(p0),M1=w(H0,n1);if(a&&(H0=ll(H0,a,v,n0)),S&&(H0=ol(H0,S,$,n0)),O0-=M1,n0&&O0<Ae){var dt=l(H0,n1);return ml(e,t,qa,p0.placeholder,n,H0,dt,Y,te,Ae-O0)}var Y1=Ie?n:this,Sn=Ye?Y1[e]:e;return O0=H0.length,Y?H0=Po(H0,Y):m0&&O0>1&&H0.reverse(),Me&&te<O0&&(H0.length=te),this&&this!==wt&&this instanceof p0&&(Sn=B0||jr(Sn)),Sn.apply(Y1,H0)}return p0}function hl(e,t){return function(n,a){return W2(n,e,t(a),{})}}function Xa(e,t){return function(n,a){var v;if(n===m&&a===m)return t;if(n!==m&&(v=n),a!==m){if(v===m)return a;typeof n=="string"||typeof a=="string"?(n=g1(n),a=g1(a)):(n=js(n),a=js(a)),v=e(n,a)}return v}}function Qi(e){return xn(function(t){return t=tt(t,r(h0())),C0(function(n){var a=this;return e(t,function(v){return Yt(v,a,n)})})})}function Za(e,t){t=t===m?" ":g1(t);var n=t.length;if(n<2)return n?Zi(t,e):t;var a=Zi(t,je(e/F(t)));return b(t)?Pn(U(a),0,e).join(""):a.slice(0,e)}function go(e,t,n,a){var v=t&xe,S=jr(e);function $(){for(var Y=-1,te=arguments.length,Ae=-1,Me=a.length,Ie=Z(Me+te),Ye=this&&this!==wt&&this instanceof $?S:e;++Ae<Me;)Ie[Ae]=a[Ae];for(;te--;)Ie[Ae++]=arguments[++Y];return Yt(Ye,v?n:this,Ie)}return $}function dl(e){return function(t,n,a){return a&&typeof a!="number"&&t1(t,n,a)&&(n=a=m),t=gn(t),n===m?(n=t,t=0):n=gn(n),a=a===m?t<n?1:-1:gn(a),so(t,n,a,e)}}function Ua(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=V1(t),n=V1(n)),e(t,n)}}function ml(e,t,n,a,v,S,$,Y,te,Ae){var Me=t&f0,Ie=Me?$:m,Ye=Me?m:$,n0=Me?S:m,m0=Me?m:S;t|=Me?V0:rt,t&=~(Me?rt:V0),t&le||(t&=~(xe|X));var B0=[e,t,v,n0,Ie,m0,Ye,Y,te,Ae],p0=n.apply(m,B0);return is(e)&&Tl(p0,B0),p0.placeholder=a,Bl(p0,e,t)}function Ji(e){var t=l0[e];return function(n,a){if(n=V1(n),a=a==null?0:ge(R0(a),292),a&&Ze(n)){var v=(Y0(n)+"e").split("e"),S=t(v[0]+"e"+(+v[1]+a));return v=(Y0(S)+"e").split("e"),+(v[0]+"e"+(+v[1]-a))}return t(n)}}var So=et&&1/f(new et([,-0]))[1]==w0?function(e){return new et(e)}:ws;function pl(e){return function(t){var n=Zt(t);return n==L0?d(t):n==Ot?c(t):T(t,e(t))}}function bn(e,t,n,a,v,S,$,Y){var te=t&X;if(!te&&typeof e!="function")throw new q0(Be);var Ae=a?a.length:0;if(Ae||(t&=~(V0|rt),a=v=m),$=$===m?$:Ve(R0($),0),Y=Y===m?Y:R0(Y),Ae-=v?v.length:0,t&rt){var Me=a,Ie=v;a=v=m}var Ye=te?m:ts(e),n0=[e,t,n,a,v,Me,Ie,S,$,Y];if(Ye&&$o(n0,Ye),e=n0[0],t=n0[1],n=n0[2],a=n0[3],v=n0[4],Y=n0[9]=n0[9]===m?te?0:e.length:Ve(n0[9]-Ae,0),!Y&&t&(f0|r0)&&(t&=~(f0|r0)),!t||t==xe)var m0=wo(e,t,n);else t==f0||t==r0?m0=yo(e,t,Y):(t==V0||t==(xe|V0))&&!v.length?m0=go(e,t,n,a):m0=qa.apply(m,n0);var B0=Ye?Qs:Tl;return Bl(B0(m0,n0),e,t)}function bl(e,t,n,a){return e===m||U1(e,vt[n])&&!I0.call(a,n)?t:e}function xl(e,t,n,a,v,S){return ft(e)&&ft(t)&&(S.set(t,e),$a(e,t,m,xl,S),S.delete(t)),e}function Ao(e){return na(e)?m:e}function wl(e,t,n,a,v,S){var $=n&Ue,Y=e.length,te=t.length;if(Y!=te&&!($&&te>Y))return!1;var Ae=S.get(e),Me=S.get(t);if(Ae&&Me)return Ae==t&&Me==e;var Ie=-1,Ye=!0,n0=n&qe?new jn:m;for(S.set(e,t),S.set(t,e);++Ie<Y;){var m0=e[Ie],B0=t[Ie];if(a)var p0=$?a(B0,m0,Ie,t,e,S):a(m0,B0,Ie,e,t,S);if(p0!==m){if(p0)continue;Ye=!1;break}if(n0){if(!br(t,function(O0,H0){if(!q(n0,H0)&&(m0===O0||v(m0,O0,n,a,S)))return n0.push(H0)})){Ye=!1;break}}else if(!(m0===B0||v(m0,B0,n,a,S))){Ye=!1;break}}return S.delete(e),S.delete(t),Ye}function Mo(e,t,n,a,v,S,$){switch(n){case $1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Dt:return!(e.byteLength!=t.byteLength||!S(new y(e),new y(t)));case a1:case Lt:case lt:return U1(+e,+t);case ye:return e.name==t.name&&e.message==t.message;case xt:case z1:return e==t+"";case L0:var Y=d;case Ot:var te=a&Ue;if(Y||(Y=f),e.size!=t.size&&!te)return!1;var Ae=$.get(e);if(Ae)return Ae==t;a|=qe,$.set(e,t);var Me=wl(Y(e),Y(t),a,v,S,$);return $.delete(e),Me;case un:if(Vn)return Vn.call(e)==Vn.call(t)}return!1}function Ro(e,t,n,a,v,S){var $=n&Ue,Y=ji(e),te=Y.length,Ae=ji(t),Me=Ae.length;if(te!=Me&&!$)return!1;for(var Ie=te;Ie--;){var Ye=Y[Ie];if(!($?Ye in t:I0.call(t,Ye)))return!1}var n0=S.get(e),m0=S.get(t);if(n0&&m0)return n0==t&&m0==e;var B0=!0;S.set(e,t),S.set(t,e);for(var p0=$;++Ie<te;){Ye=Y[Ie];var O0=e[Ye],H0=t[Ye];if(a)var A1=$?a(H0,O0,Ye,t,e,S):a(O0,H0,Ye,e,t,S);if(!(A1===m?O0===H0||v(O0,H0,n,a,S):A1)){B0=!1;break}p0||(p0=Ye=="constructor")}if(B0&&!p0){var n1=e.constructor,M1=t.constructor;n1!=M1&&"constructor"in e&&"constructor"in t&&!(typeof n1=="function"&&n1 instanceof n1&&typeof M1=="function"&&M1 instanceof M1)&&(B0=!1)}return S.delete(e),S.delete(t),B0}function xn(e){return ls(Rl(e,m,Nl),e+"")}function ji(e){return Ds(e,Ct,rs)}function es(e){return Ds(e,v1,yl)}var ts=Tt?function(e){return Tt.get(e)}:ws;function Ya(e){for(var t=e.name+"",n=gt[t],a=I0.call(gt,t)?n.length:0;a--;){var v=n[a],S=v.func;if(S==null||S==e)return v.name}return t}function Sr(e){var t=I0.call(x,"placeholder")?x:e;return t.placeholder}function h0(){var e=x.iteratee||bs;return e=e===bs?Xs:e,arguments.length?e(arguments[0],arguments[1]):e}function Ga(e,t){var n=e.__data__;return Oo(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ns(e){for(var t=Ct(e),n=t.length;n--;){var a=t[n],v=e[a];t[n]=[a,v,Al(v)]}return t}function nr(e,t){var n=i(e,t);return qs(n)?n:m}function Eo(e){var t=I0.call(e,z),n=e[z];try{e[z]=m;var a=!0}catch{}var v=f1.call(e);return a&&(t?e[z]=n:delete e[z]),v}var rs=Je?function(e){return e==null?[]:(e=_0(e),nn(Je(e),function(t){return K.call(e,t)}))}:ys,yl=Je?function(e){for(var t=[];e;)rn(t,rs(e)),e=H(e);return t}:ys,Zt=e1;(x0&&Zt(new x0(new ArrayBuffer(1)))!=$1||Z0&&Zt(new Z0)!=L0||Vt&&Zt(Vt.resolve())!=Xn||et&&Zt(new et)!=Ot||U0&&Zt(new U0)!=Ft)&&(Zt=function(e){var t=e1(e),n=t==o0?e.constructor:m,a=n?rr(n):"";if(a)switch(a){case w1:return $1;case y1:return L0;case Bt:return Xn;case L1:return Ot;case Nn:return Ft}return t});function To(e,t,n){for(var a=-1,v=n.length;++a<v;){var S=n[a],$=S.size;switch(S.type){case"drop":e+=$;break;case"dropRight":t-=$;break;case"take":t=ge(t,e+$);break;case"takeRight":e=Ve(e,t-$);break}}return{start:e,end:t}}function Bo(e){var t=e.match(ua);return t?t[1].split(at):[]}function gl(e,t,n){t=Dn(t,e);for(var a=-1,v=t.length,S=!1;++a<v;){var $=on(t[a]);if(!(S=e!=null&&n(e,$)))break;e=e[$]}return S||++a!=v?S:(v=e==null?0:e.length,!!v&&ei(v)&&wn($,v)&&(g0(e)||ar(e)))}function Co(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&I0.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Sl(e){return typeof e.constructor=="function"&&!ea(e)?X0(H(e)):{}}function ko(e,t,n){var a=e.constructor;switch(t){case Dt:return Ki(e);case a1:case Lt:return new a(+e);case $1:return vo(e,n);case F1:case fn:case Mn:case Rn:case D1:case P1:case En:case y0:case Nt:return il(e,n);case L0:return new a;case lt:case z1:return new a(e);case xt:return ho(e);case Ot:return new a;case un:return mo(e)}}function Io(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(Pt,`{
/* [wrapped with `+t+`] */
`)}function Lo(e){return g0(e)||ar(e)||!!(Q&&e&&e[Q])}function wn(e,t){var n=typeof e;return t=t??pt,!!t&&(n=="number"||n!="symbol"&&ha.test(e))&&e>-1&&e%1==0&&e<t}function t1(e,t,n){if(!ft(n))return!1;var a=typeof t;return(a=="number"?_1(n)&&wn(t,n.length):a=="string"&&t in n)?U1(n[t],e):!1}function as(e,t){if(g0(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||S1(e)?!0:cr.test(e)||!p1.test(e)||t!=null&&e in _0(t)}function Oo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function is(e){var t=Ya(e),n=x[t];if(typeof n!="function"||!(t in T0.prototype))return!1;if(e===n)return!0;var a=ts(n);return!!a&&e===a[0]}function No(e){return!!an&&an in e}var Ho=qt?yn:gs;function ea(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||vt;return e===n}function Al(e){return e===e&&!ft(e)}function Ml(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==m||e in _0(n))}}function Vo(e){var t=Ja(e,function(a){return n.size===u0&&n.clear(),a}),n=t.cache;return t}function $o(e,t){var n=e[1],a=t[1],v=n|a,S=v<(xe|X|G0),$=a==G0&&n==f0||a==G0&&n==M0&&e[7].length<=t[8]||a==(G0|M0)&&t[7].length<=t[8]&&n==f0;if(!(S||$))return e;a&xe&&(e[2]=t[2],v|=n&xe?0:le);var Y=t[3];if(Y){var te=e[3];e[3]=te?ll(te,Y,t[4]):Y,e[4]=te?l(e[3],s0):t[4]}return Y=t[5],Y&&(te=e[5],e[5]=te?ol(te,Y,t[6]):Y,e[6]=te?l(e[5],s0):t[6]),Y=t[7],Y&&(e[7]=Y),a&G0&&(e[8]=e[8]==null?t[8]:ge(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}function Fo(e){var t=[];if(e!=null)for(var n in _0(e))t.push(n);return t}function Do(e){return f1.call(e)}function Rl(e,t,n){return t=Ve(t===m?e.length-1:t,0),function(){for(var a=arguments,v=-1,S=Ve(a.length-t,0),$=Z(S);++v<S;)$[v]=a[t+v];v=-1;for(var Y=Z(t+1);++v<t;)Y[v]=a[v];return Y[t]=n($),Yt(e,this,Y)}}function El(e,t){return t.length<2?e:tr(e,N1(t,0,-1))}function Po(e,t){for(var n=e.length,a=ge(t.length,n),v=c1(e);a--;){var S=t[a];e[a]=wn(S,n)?v[S]:m}return e}function ss(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Tl=Cl(Qs),ta=De||function(e,t){return wt.setTimeout(e,t)},ls=Cl(uo);function Bl(e,t,n){var a=t+"";return ls(e,Io(a,qo(Bo(a),n)))}function Cl(e){var t=0,n=0;return function(){var a=t0(),v=Et-(a-n);if(n=a,v>0){if(++t>=kt)return arguments[0]}else t=0;return e.apply(m,arguments)}}function Wa(e,t){var n=-1,a=e.length,v=a-1;for(t=t===m?a:t;++n<t;){var S=Xi(n,v),$=e[S];e[S]=e[n],e[n]=$}return e.length=t,e}var kl=Vo(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(q1,function(n,a,v,S){t.push(v?S.replace(fa,"$1"):a||n)}),t});function on(e){if(typeof e=="string"||S1(e))return e;var t=e+"";return t=="0"&&1/e==-w0?"-0":t}function rr(e){if(e!=null){try{return I1.call(e)}catch{}try{return e+""}catch{}}return""}function qo(e,t){return o1(g,function(n){var a="_."+n[0];t&n[1]&&!pr(e,a)&&e.push(a)}),e.sort()}function Il(e){if(e instanceof T0)return e.clone();var t=new Qt(e.__wrapped__,e.__chain__);return t.__actions__=c1(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Xo(e,t,n){(n?t1(e,t,n):t===m)?t=1:t=Ve(R0(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var v=0,S=0,$=Z(je(a/t));v<a;)$[S++]=N1(e,v,v+=t);return $}function Zo(e){for(var t=-1,n=e==null?0:e.length,a=0,v=[];++t<n;){var S=e[t];S&&(v[a++]=S)}return v}function Uo(){var e=arguments.length;if(!e)return[];for(var t=Z(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return rn(g0(n)?c1(n):[n],$t(t,1))}var Yo=C0(function(e,t){return ht(e)?zr(e,$t(t,1,ht,!0)):[]}),Go=C0(function(e,t){var n=H1(t);return ht(n)&&(n=m),ht(e)?zr(e,$t(t,1,ht,!0),h0(n,2)):[]}),Wo=C0(function(e,t){var n=H1(t);return ht(n)&&(n=m),ht(e)?zr(e,$t(t,1,ht,!0),m,n):[]});function zo(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===m?1:R0(t),N1(e,t<0?0:t,a)):[]}function Ko(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===m?1:R0(t),t=a-t,N1(e,0,t<0?0:t)):[]}function Qo(e,t){return e&&e.length?Da(e,h0(t,3),!0,!0):[]}function Jo(e,t){return e&&e.length?Da(e,h0(t,3),!0):[]}function jo(e,t,n,a){var v=e==null?0:e.length;return v?(n&&typeof n!="number"&&t1(e,t,n)&&(n=0,a=v),Z2(e,t,n,a)):[]}function Ll(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var v=n==null?0:R0(n);return v<0&&(v=Ve(a+v,0)),J(e,h0(t,3),v)}function Ol(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var v=a-1;return n!==m&&(v=R0(n),v=n<0?Ve(a+v,0):ge(v,a-1)),J(e,h0(t,3),v,!0)}function Nl(e){var t=e==null?0:e.length;return t?$t(e,1):[]}function eu(e){var t=e==null?0:e.length;return t?$t(e,w0):[]}function tu(e,t){var n=e==null?0:e.length;return n?(t=t===m?1:R0(t),$t(e,t)):[]}function nu(e){for(var t=-1,n=e==null?0:e.length,a={};++t<n;){var v=e[t];a[v[0]]=v[1]}return a}function Hl(e){return e&&e.length?e[0]:m}function ru(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var v=n==null?0:R0(n);return v<0&&(v=Ve(a+v,0)),oe(e,t,v)}function au(e){var t=e==null?0:e.length;return t?N1(e,0,-1):[]}var iu=C0(function(e){var t=tt(e,Wi);return t.length&&t[0]===e[0]?$i(t):[]}),su=C0(function(e){var t=H1(e),n=tt(e,Wi);return t===H1(n)?t=m:n.pop(),n.length&&n[0]===e[0]?$i(n,h0(t,2)):[]}),lu=C0(function(e){var t=H1(e),n=tt(e,Wi);return t=typeof t=="function"?t:m,t&&n.pop(),n.length&&n[0]===e[0]?$i(n,m,t):[]});function ou(e,t){return e==null?"":b0.call(e,t)}function H1(e){var t=e==null?0:e.length;return t?e[t-1]:m}function uu(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var v=a;return n!==m&&(v=R0(n),v=v<0?Ve(a+v,0):ge(v,a-1)),t===t?ie(e,t,v):J(e,Se,v,!0)}function fu(e,t){return e&&e.length?Gs(e,R0(t)):m}var cu=C0(Vl);function Vl(e,t){return e&&e.length&&t&&t.length?qi(e,t):e}function _u(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,h0(n,2)):e}function vu(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,m,n):e}var hu=xn(function(e,t){var n=e==null?0:e.length,a=Oi(e,t);return Ks(e,tt(t,function(v){return wn(v,n)?+v:v}).sort(sl)),a});function du(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,v=[],S=e.length;for(t=h0(t,3);++a<S;){var $=e[a];t($,a,e)&&(n.push($),v.push(a))}return Ks(e,v),n}function os(e){return e==null?e:d0.call(e)}function mu(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&t1(e,t,n)?(t=0,n=a):(t=t==null?0:R0(t),n=n===m?a:R0(n)),N1(e,t,n)):[]}function pu(e,t){return Fa(e,t)}function bu(e,t,n){return Ui(e,t,h0(n,2))}function xu(e,t){var n=e==null?0:e.length;if(n){var a=Fa(e,t);if(a<n&&U1(e[a],t))return a}return-1}function wu(e,t){return Fa(e,t,!0)}function yu(e,t,n){return Ui(e,t,h0(n,2),!0)}function gu(e,t){var n=e==null?0:e.length;if(n){var a=Fa(e,t,!0)-1;if(U1(e[a],t))return a}return-1}function Su(e){return e&&e.length?Js(e):[]}function Au(e,t){return e&&e.length?Js(e,h0(t,2)):[]}function Mu(e){var t=e==null?0:e.length;return t?N1(e,1,t):[]}function Ru(e,t,n){return e&&e.length?(t=n||t===m?1:R0(t),N1(e,0,t<0?0:t)):[]}function Eu(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===m?1:R0(t),t=a-t,N1(e,t<0?0:t,a)):[]}function Tu(e,t){return e&&e.length?Da(e,h0(t,3),!1,!0):[]}function Bu(e,t){return e&&e.length?Da(e,h0(t,3)):[]}var Cu=C0(function(e){return Fn($t(e,1,ht,!0))}),ku=C0(function(e){var t=H1(e);return ht(t)&&(t=m),Fn($t(e,1,ht,!0),h0(t,2))}),Iu=C0(function(e){var t=H1(e);return t=typeof t=="function"?t:m,Fn($t(e,1,ht,!0),m,t)});function Lu(e){return e&&e.length?Fn(e):[]}function Ou(e,t){return e&&e.length?Fn(e,h0(t,2)):[]}function Nu(e,t){return t=typeof t=="function"?t:m,e&&e.length?Fn(e,m,t):[]}function us(e){if(!(e&&e.length))return[];var t=0;return e=nn(e,function(n){if(ht(n))return t=Ve(n.length,t),!0}),R(t,function(n){return tt(e,_e(n))})}function $l(e,t){if(!(e&&e.length))return[];var n=us(e);return t==null?n:tt(n,function(a){return Yt(t,m,a)})}var Hu=C0(function(e,t){return ht(e)?zr(e,t):[]}),Vu=C0(function(e){return Gi(nn(e,ht))}),$u=C0(function(e){var t=H1(e);return ht(t)&&(t=m),Gi(nn(e,ht),h0(t,2))}),Fu=C0(function(e){var t=H1(e);return t=typeof t=="function"?t:m,Gi(nn(e,ht),m,t)}),Du=C0(us);function Pu(e,t){return nl(e||[],t||[],Wr)}function qu(e,t){return nl(e||[],t||[],Jr)}var Xu=C0(function(e){var t=e.length,n=t>1?e[t-1]:m;return n=typeof n=="function"?(e.pop(),n):m,$l(e,n)});function Fl(e){var t=x(e);return t.__chain__=!0,t}function Zu(e,t){return t(e),e}function za(e,t){return t(e)}var Uu=xn(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,v=function(S){return Oi(S,e)};return t>1||this.__actions__.length||!(a instanceof T0)||!wn(n)?this.thru(v):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:za,args:[v],thisArg:m}),new Qt(a,this.__chain__).thru(function(S){return t&&!S.length&&S.push(m),S}))});function Yu(){return Fl(this)}function Gu(){return new Qt(this.value(),this.__chain__)}function Wu(){this.__values__===m&&(this.__values__=jl(this.value()));var e=this.__index__>=this.__values__.length,t=e?m:this.__values__[this.__index__++];return{done:e,value:t}}function zu(){return this}function Ku(e){for(var t,n=this;n instanceof Kn;){var a=Il(n);a.__index__=0,a.__values__=m,t?v.__wrapped__=a:t=a;var v=a;n=n.__wrapped__}return v.__wrapped__=e,t}function Qu(){var e=this.__wrapped__;if(e instanceof T0){var t=e;return this.__actions__.length&&(t=new T0(this)),t=t.reverse(),t.__actions__.push({func:za,args:[os],thisArg:m}),new Qt(t,this.__chain__)}return this.thru(os)}function Ju(){return tl(this.__wrapped__,this.__actions__)}var ju=Pa(function(e,t,n){I0.call(e,n)?++e[n]:pn(e,n,1)});function e3(e,t,n){var a=g0(e)?k1:X2;return n&&t1(e,t,n)&&(t=m),a(e,h0(t,3))}function t3(e,t){var n=g0(e)?nn:$s;return n(e,h0(t,3))}var n3=_l(Ll),r3=_l(Ol);function a3(e,t){return $t(Ka(e,t),1)}function i3(e,t){return $t(Ka(e,t),w0)}function s3(e,t,n){return n=n===m?1:R0(n),$t(Ka(e,t),n)}function Dl(e,t){var n=g0(e)?o1:$n;return n(e,h0(t,3))}function Pl(e,t){var n=g0(e)?ct:Vs;return n(e,h0(t,3))}var l3=Pa(function(e,t,n){I0.call(e,n)?e[n].push(t):pn(e,n,[t])});function o3(e,t,n,a){e=_1(e)?e:Mr(e),n=n&&!a?R0(n):0;var v=e.length;return n<0&&(n=Ve(v+n,0)),ti(e)?n<=v&&e.indexOf(t,n)>-1:!!v&&oe(e,t,n)>-1}var u3=C0(function(e,t,n){var a=-1,v=typeof t=="function",S=_1(e)?Z(e.length):[];return $n(e,function($){S[++a]=v?Yt(t,$,n):Kr($,t,n)}),S}),f3=Pa(function(e,t,n){pn(e,n,t)});function Ka(e,t){var n=g0(e)?tt:Zs;return n(e,h0(t,3))}function c3(e,t,n,a){return e==null?[]:(g0(t)||(t=t==null?[]:[t]),n=a?m:n,g0(n)||(n=n==null?[]:[n]),Ws(e,t,n))}var _3=Pa(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function v3(e,t,n){var a=g0(e)?Ln:Oe,v=arguments.length<3;return a(e,h0(t,4),n,v,$n)}function h3(e,t,n){var a=g0(e)?Ci:Oe,v=arguments.length<3;return a(e,h0(t,4),n,v,Vs)}function d3(e,t){var n=g0(e)?nn:$s;return n(e,ja(h0(t,3)))}function m3(e){var t=g0(e)?Ls:lo;return t(e)}function p3(e,t,n){(n?t1(e,t,n):t===m)?t=1:t=R0(t);var a=g0(e)?$2:oo;return a(e,t)}function b3(e){var t=g0(e)?F2:fo;return t(e)}function x3(e){if(e==null)return 0;if(_1(e))return ti(e)?F(e):e.length;var t=Zt(e);return t==L0||t==Ot?e.size:Di(e).length}function w3(e,t,n){var a=g0(e)?br:co;return n&&t1(e,t,n)&&(t=m),a(e,h0(t,3))}var y3=C0(function(e,t){if(e==null)return[];var n=t.length;return n>1&&t1(e,t[0],t[1])?t=[]:n>2&&t1(t[0],t[1],t[2])&&(t=[t[0]]),Ws(e,$t(t,1),[])}),Qa=pe||function(){return wt.Date.now()};function g3(e,t){if(typeof t!="function")throw new q0(Be);return e=R0(e),function(){if(--e<1)return t.apply(this,arguments)}}function ql(e,t,n){return t=n?m:t,t=e&&t==null?e.length:t,bn(e,G0,m,m,m,m,t)}function Xl(e,t){var n;if(typeof t!="function")throw new q0(Be);return e=R0(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=m),n}}var fs=C0(function(e,t,n){var a=xe;if(n.length){var v=l(n,Sr(fs));a|=V0}return bn(e,a,t,n,v)}),Zl=C0(function(e,t,n){var a=xe|X;if(n.length){var v=l(n,Sr(Zl));a|=V0}return bn(t,a,e,n,v)});function Ul(e,t,n){t=n?m:t;var a=bn(e,f0,m,m,m,m,m,t);return a.placeholder=Ul.placeholder,a}function Yl(e,t,n){t=n?m:t;var a=bn(e,r0,m,m,m,m,m,t);return a.placeholder=Yl.placeholder,a}function Gl(e,t,n){var a,v,S,$,Y,te,Ae=0,Me=!1,Ie=!1,Ye=!0;if(typeof e!="function")throw new q0(Be);t=V1(t)||0,ft(n)&&(Me=!!n.leading,Ie="maxWait"in n,S=Ie?Ve(V1(n.maxWait)||0,t):S,Ye="trailing"in n?!!n.trailing:Ye);function n0(dt){var Y1=a,Sn=v;return a=v=m,Ae=dt,$=e.apply(Sn,Y1),$}function m0(dt){return Ae=dt,Y=ta(O0,t),Me?n0(dt):$}function B0(dt){var Y1=dt-te,Sn=dt-Ae,_2=t-Y1;return Ie?ge(_2,S-Sn):_2}function p0(dt){var Y1=dt-te,Sn=dt-Ae;return te===m||Y1>=t||Y1<0||Ie&&Sn>=S}function O0(){var dt=Qa();if(p0(dt))return H0(dt);Y=ta(O0,B0(dt))}function H0(dt){return Y=m,Ye&&a?n0(dt):(a=v=m,$)}function A1(){Y!==m&&rl(Y),Ae=0,a=te=v=Y=m}function n1(){return Y===m?$:H0(Qa())}function M1(){var dt=Qa(),Y1=p0(dt);if(a=arguments,v=this,te=dt,Y1){if(Y===m)return m0(te);if(Ie)return rl(Y),Y=ta(O0,t),n0(te)}return Y===m&&(Y=ta(O0,t)),$}return M1.cancel=A1,M1.flush=n1,M1}var S3=C0(function(e,t){return Hs(e,1,t)}),A3=C0(function(e,t,n){return Hs(e,V1(t)||0,n)});function M3(e){return bn(e,$0)}function Ja(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new q0(Be);var n=function(){var a=arguments,v=t?t.apply(this,a):a[0],S=n.cache;if(S.has(v))return S.get(v);var $=e.apply(this,a);return n.cache=S.set(v,$)||S,$};return n.cache=new(Ja.Cache||jt),n}Ja.Cache=jt;function ja(e){if(typeof e!="function")throw new q0(Be);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function R3(e){return Xl(2,e)}var E3=_o(function(e,t){t=t.length==1&&g0(t[0])?tt(t[0],r(h0())):tt($t(t,1),r(h0()));var n=t.length;return C0(function(a){for(var v=-1,S=ge(a.length,n);++v<S;)a[v]=t[v].call(this,a[v]);return Yt(e,this,a)})}),cs=C0(function(e,t){var n=l(t,Sr(cs));return bn(e,V0,m,t,n)}),Wl=C0(function(e,t){var n=l(t,Sr(Wl));return bn(e,rt,m,t,n)}),T3=xn(function(e,t){return bn(e,M0,m,m,m,t)});function B3(e,t){if(typeof e!="function")throw new q0(Be);return t=t===m?t:R0(t),C0(e,t)}function C3(e,t){if(typeof e!="function")throw new q0(Be);return t=t==null?0:Ve(R0(t),0),C0(function(n){var a=n[t],v=Pn(n,0,t);return a&&rn(v,a),Yt(e,this,v)})}function k3(e,t,n){var a=!0,v=!0;if(typeof e!="function")throw new q0(Be);return ft(n)&&(a="leading"in n?!!n.leading:a,v="trailing"in n?!!n.trailing:v),Gl(e,t,{leading:a,maxWait:t,trailing:v})}function I3(e){return ql(e,1)}function L3(e,t){return cs(zi(t),e)}function O3(){if(!arguments.length)return[];var e=arguments[0];return g0(e)?e:[e]}function N3(e){return O1(e,S0)}function H3(e,t){return t=typeof t=="function"?t:m,O1(e,S0,t)}function V3(e){return O1(e,Qe|S0)}function $3(e,t){return t=typeof t=="function"?t:m,O1(e,Qe|S0,t)}function F3(e,t){return t==null||Ns(e,t,Ct(t))}function U1(e,t){return e===t||e!==e&&t!==t}var D3=Ua(Vi),P3=Ua(function(e,t){return e>=t}),ar=Ps(function(){return arguments}())?Ps:function(e){return _t(e)&&I0.call(e,"callee")&&!K.call(e,"callee")},g0=Z.isArray,q3=Fr?r(Fr):z2;function _1(e){return e!=null&&ei(e.length)&&!yn(e)}function ht(e){return _t(e)&&_1(e)}function X3(e){return e===!0||e===!1||_t(e)&&e1(e)==a1}var qn=ce||gs,Z3=Ba?r(Ba):K2;function U3(e){return _t(e)&&e.nodeType===1&&!na(e)}function Y3(e){if(e==null)return!0;if(_1(e)&&(g0(e)||typeof e=="string"||typeof e.splice=="function"||qn(e)||Ar(e)||ar(e)))return!e.length;var t=Zt(e);if(t==L0||t==Ot)return!e.size;if(ea(e))return!Di(e).length;for(var n in e)if(I0.call(e,n))return!1;return!0}function G3(e,t){return Qr(e,t)}function W3(e,t,n){n=typeof n=="function"?n:m;var a=n?n(e,t):m;return a===m?Qr(e,t,m,n):!!a}function _s(e){if(!_t(e))return!1;var t=e1(e);return t==ye||t==a0||typeof e.message=="string"&&typeof e.name=="string"&&!na(e)}function z3(e){return typeof e=="number"&&Ze(e)}function yn(e){if(!ft(e))return!1;var t=e1(e);return t==Ke||t==T1||t==W1||t==An}function zl(e){return typeof e=="number"&&e==R0(e)}function ei(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=pt}function ft(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function _t(e){return e!=null&&typeof e=="object"}var Kl=P0?r(P0):J2;function K3(e,t){return e===t||Fi(e,t,ns(t))}function Q3(e,t,n){return n=typeof n=="function"?n:m,Fi(e,t,ns(t),n)}function J3(e){return Ql(e)&&e!=+e}function j3(e){if(Ho(e))throw new Xe(He);return qs(e)}function e4(e){return e===null}function t4(e){return e==null}function Ql(e){return typeof e=="number"||_t(e)&&e1(e)==lt}function na(e){if(!_t(e)||e1(e)!=o0)return!1;var t=H(e);if(t===null)return!0;var n=I0.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&I1.call(n)==zt}var vs=Ca?r(Ca):j2;function n4(e){return zl(e)&&e>=-pt&&e<=pt}var Jl=In?r(In):eo;function ti(e){return typeof e=="string"||!g0(e)&&_t(e)&&e1(e)==z1}function S1(e){return typeof e=="symbol"||_t(e)&&e1(e)==un}var Ar=ka?r(ka):to;function r4(e){return e===m}function a4(e){return _t(e)&&Zt(e)==Ft}function i4(e){return _t(e)&&e1(e)==fr}var s4=Ua(Pi),l4=Ua(function(e,t){return e<=t});function jl(e){if(!e)return[];if(_1(e))return ti(e)?U(e):c1(e);if(re&&e[re])return u(e[re]());var t=Zt(e),n=t==L0?d:t==Ot?f:Mr;return n(e)}function gn(e){if(!e)return e===0?e:0;if(e=V1(e),e===w0||e===-w0){var t=e<0?-1:1;return t*d1}return e===e?e:0}function R0(e){var t=gn(e),n=t%1;return t===t?n?t-n:t:0}function e2(e){return e?er(R0(e),0,bt):0}function V1(e){if(typeof e=="number")return e;if(S1(e))return r1;if(ft(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ft(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=N(e);var n=_a.test(e);return n||di.test(e)?Ti(e.slice(2),n?2:8):hi.test(e)?r1:+e}function t2(e){return ln(e,v1(e))}function o4(e){return e?er(R0(e),-pt,pt):e===0?e:0}function Y0(e){return e==null?"":g1(e)}var u4=yr(function(e,t){if(ea(t)||_1(t)){ln(t,Ct(t),e);return}for(var n in t)I0.call(t,n)&&Wr(e,n,t[n])}),n2=yr(function(e,t){ln(t,v1(t),e)}),ni=yr(function(e,t,n,a){ln(t,v1(t),e,a)}),f4=yr(function(e,t,n,a){ln(t,Ct(t),e,a)}),c4=xn(Oi);function _4(e,t){var n=X0(e);return t==null?n:Os(n,t)}var v4=C0(function(e,t){e=_0(e);var n=-1,a=t.length,v=a>2?t[2]:m;for(v&&t1(t[0],t[1],v)&&(a=1);++n<a;)for(var S=t[n],$=v1(S),Y=-1,te=$.length;++Y<te;){var Ae=$[Y],Me=e[Ae];(Me===m||U1(Me,vt[Ae])&&!I0.call(e,Ae))&&(e[Ae]=S[Ae])}return e}),h4=C0(function(e){return e.push(m,xl),Yt(r2,m,e)});function d4(e,t){return I(e,h0(t,3),sn)}function m4(e,t){return I(e,h0(t,3),Hi)}function p4(e,t){return e==null?e:Ni(e,h0(t,3),v1)}function b4(e,t){return e==null?e:Fs(e,h0(t,3),v1)}function x4(e,t){return e&&sn(e,h0(t,3))}function w4(e,t){return e&&Hi(e,h0(t,3))}function y4(e){return e==null?[]:Va(e,Ct(e))}function g4(e){return e==null?[]:Va(e,v1(e))}function hs(e,t,n){var a=e==null?m:tr(e,t);return a===m?n:a}function S4(e,t){return e!=null&&gl(e,t,U2)}function ds(e,t){return e!=null&&gl(e,t,Y2)}var A4=hl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=f1.call(t)),e[t]=n},ps(h1)),M4=hl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=f1.call(t)),I0.call(e,t)?e[t].push(n):e[t]=[n]},h0),R4=C0(Kr);function Ct(e){return _1(e)?Is(e):Di(e)}function v1(e){return _1(e)?Is(e,!0):no(e)}function E4(e,t){var n={};return t=h0(t,3),sn(e,function(a,v,S){pn(n,t(a,v,S),a)}),n}function T4(e,t){var n={};return t=h0(t,3),sn(e,function(a,v,S){pn(n,v,t(a,v,S))}),n}var B4=yr(function(e,t,n){$a(e,t,n)}),r2=yr(function(e,t,n,a){$a(e,t,n,a)}),C4=xn(function(e,t){var n={};if(e==null)return n;var a=!1;t=tt(t,function(S){return S=Dn(S,e),a||(a=S.length>1),S}),ln(e,es(e),n),a&&(n=O1(n,Qe|E0|S0,Ao));for(var v=t.length;v--;)Yi(n,t[v]);return n});function k4(e,t){return a2(e,ja(h0(t)))}var I4=xn(function(e,t){return e==null?{}:ao(e,t)});function a2(e,t){if(e==null)return{};var n=tt(es(e),function(a){return[a]});return t=h0(t),zs(e,n,function(a,v){return t(a,v[0])})}function L4(e,t,n){t=Dn(t,e);var a=-1,v=t.length;for(v||(v=1,e=m);++a<v;){var S=e==null?m:e[on(t[a])];S===m&&(a=v,S=n),e=yn(S)?S.call(e):S}return e}function O4(e,t,n){return e==null?e:Jr(e,t,n)}function N4(e,t,n,a){return a=typeof a=="function"?a:m,e==null?e:Jr(e,t,n,a)}var i2=pl(Ct),s2=pl(v1);function H4(e,t,n){var a=g0(e),v=a||qn(e)||Ar(e);if(t=h0(t,4),n==null){var S=e&&e.constructor;v?n=a?new S:[]:ft(e)?n=yn(S)?X0(H(e)):{}:n={}}return(v?o1:sn)(e,function($,Y,te){return t(n,$,Y,te)}),n}function V4(e,t){return e==null?!0:Yi(e,t)}function $4(e,t,n){return e==null?e:el(e,t,zi(n))}function F4(e,t,n,a){return a=typeof a=="function"?a:m,e==null?e:el(e,t,zi(n),a)}function Mr(e){return e==null?[]:G(e,Ct(e))}function D4(e){return e==null?[]:G(e,v1(e))}function P4(e,t,n){return n===m&&(n=t,t=m),n!==m&&(n=V1(n),n=n===n?n:0),t!==m&&(t=V1(t),t=t===t?t:0),er(V1(e),t,n)}function q4(e,t,n){return t=gn(t),n===m?(n=t,t=0):n=gn(n),e=V1(e),G2(e,t,n)}function X4(e,t,n){if(n&&typeof n!="boolean"&&t1(e,t,n)&&(t=n=m),n===m&&(typeof t=="boolean"?(n=t,t=m):typeof e=="boolean"&&(n=e,e=m)),e===m&&t===m?(e=0,t=1):(e=gn(e),t===m?(t=e,e=0):t=gn(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var v=Pe();return ge(e+v*(t-e+Ei("1e-"+((v+"").length-1))),t)}return Xi(e,t)}var Z4=gr(function(e,t,n){return t=t.toLowerCase(),e+(n?l2(t):t)});function l2(e){return ms(Y0(e).toLowerCase())}function o2(e){return e=Y0(e),e&&e.replace(mi,E).replace(Si,"")}function U4(e,t,n){e=Y0(e),t=g1(t);var a=e.length;n=n===m?a:er(R0(n),0,a);var v=n;return n-=t.length,n>=0&&e.slice(n,v)==t}function Y4(e){return e=Y0(e),e&&fi.test(e)?e.replace(oa,B):e}function G4(e){return e=Y0(e),e&&cn.test(e)?e.replace(W0,"\\$&"):e}var W4=gr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),z4=gr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),K4=cl("toLowerCase");function Q4(e,t,n){e=Y0(e),t=R0(t);var a=t?F(e):0;if(!t||a>=t)return e;var v=(t-a)/2;return Za(Re(v),n)+e+Za(je(v),n)}function J4(e,t,n){e=Y0(e),t=R0(t);var a=t?F(e):0;return t&&a<t?e+Za(t-a,n):e}function j4(e,t,n){e=Y0(e),t=R0(t);var a=t?F(e):0;return t&&a<t?Za(t-a,n)+e:e}function e5(e,t,n){return n||t==null?t=0:t&&(t=+t),j0(Y0(e).replace(kr,""),t||0)}function t5(e,t,n){return(n?t1(e,t,n):t===m)?t=1:t=R0(t),Zi(Y0(e),t)}function n5(){var e=arguments,t=Y0(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var r5=gr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function a5(e,t,n){return n&&typeof n!="number"&&t1(e,t,n)&&(t=n=m),n=n===m?bt:n>>>0,n?(e=Y0(e),e&&(typeof t=="string"||t!=null&&!vs(t))&&(t=g1(t),!t&&b(e))?Pn(U(e),0,n):e.split(t,n)):[]}var i5=gr(function(e,t,n){return e+(n?" ":"")+ms(t)});function s5(e,t,n){return e=Y0(e),n=n==null?0:er(R0(n),0,e.length),t=g1(t),e.slice(n,n+t.length)==t}function l5(e,t,n){var a=x.templateSettings;n&&t1(e,t,n)&&(t=m),e=Y0(e),t=ni({},t,a,bl);var v=ni({},t.imports,a.imports,bl),S=Ct(v),$=G(v,S),Y,te,Ae=0,Me=t.interpolate||_r,Ie="__p += '",Ye=J0((t.escape||_r).source+"|"+Me.source+"|"+(Me===K1?vi:_r).source+"|"+(t.evaluate||_r).source+"|$","g"),n0="//# sourceURL="+(I0.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wn+"]")+`
`;e.replace(Ye,function(p0,O0,H0,A1,n1,M1){return H0||(H0=A1),Ie+=e.slice(Ae,M1).replace(N0,O),O0&&(Y=!0,Ie+=`' +
__e(`+O0+`) +
'`),n1&&(te=!0,Ie+=`';
`+n1+`;
__p += '`),H0&&(Ie+=`' +
((__t = (`+H0+`)) == null ? '' : __t) +
'`),Ae=M1+p0.length,p0}),Ie+=`';
`;var m0=I0.call(t,"variable")&&t.variable;if(!m0)Ie=`with (obj) {
`+Ie+`
}
`;else if(Tn.test(m0))throw new Xe(We);Ie=(te?Ie.replace(sa,""):Ie).replace(li,"$1").replace(oi,"$1;"),Ie="function("+(m0||"obj")+`) {
`+(m0?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ie+`return __p
}`;var B0=f2(function(){return c0(S,n0+"return "+Ie).apply(m,$)});if(B0.source=Ie,_s(B0))throw B0;return B0}function o5(e){return Y0(e).toLowerCase()}function u5(e){return Y0(e).toUpperCase()}function f5(e,t,n){if(e=Y0(e),e&&(n||t===m))return N(e);if(!e||!(t=g1(t)))return e;var a=U(e),v=U(t),S=V(a,v),$=o(a,v)+1;return Pn(a,S,$).join("")}function c5(e,t,n){if(e=Y0(e),e&&(n||t===m))return e.slice(0,s(e)+1);if(!e||!(t=g1(t)))return e;var a=U(e),v=o(a,U(t))+1;return Pn(a,0,v).join("")}function _5(e,t,n){if(e=Y0(e),e&&(n||t===m))return e.replace(kr,"");if(!e||!(t=g1(t)))return e;var a=U(e),v=V(a,U(t));return Pn(a,v).join("")}function v5(e,t){var n=z0,a=mt;if(ft(t)){var v="separator"in t?t.separator:v;n="length"in t?R0(t.length):n,a="omission"in t?g1(t.omission):a}e=Y0(e);var S=e.length;if(b(e)){var $=U(e);S=$.length}if(n>=S)return e;var Y=n-F(a);if(Y<1)return a;var te=$?Pn($,0,Y).join(""):e.slice(0,Y);if(v===m)return te+a;if($&&(Y+=te.length-Y),vs(v)){if(e.slice(Y).search(v)){var Ae,Me=te;for(v.global||(v=J0(v.source,Y0(ca.exec(v))+"g")),v.lastIndex=0;Ae=v.exec(Me);)var Ie=Ae.index;te=te.slice(0,Ie===m?Y:Ie)}}else if(e.indexOf(g1(v),Y)!=Y){var Ye=te.lastIndexOf(v);Ye>-1&&(te=te.slice(0,Ye))}return te+a}function h5(e){return e=Y0(e),e&&ui.test(e)?e.replace(la,_):e}var d5=gr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ms=cl("toUpperCase");function u2(e,t,n){return e=Y0(e),t=n?m:t,t===m?h(e)?Le(e):Ii(e):e.match(t)||[]}var f2=C0(function(e,t){try{return Yt(e,m,t)}catch(n){return _s(n)?n:new Xe(n)}}),m5=xn(function(e,t){return o1(t,function(n){n=on(n),pn(e,n,fs(e[n],e))}),e});function p5(e){var t=e==null?0:e.length,n=h0();return e=t?tt(e,function(a){if(typeof a[1]!="function")throw new q0(Be);return[n(a[0]),a[1]]}):[],C0(function(a){for(var v=-1;++v<t;){var S=e[v];if(Yt(S[0],this,a))return Yt(S[1],this,a)}})}function b5(e){return q2(O1(e,Qe))}function ps(e){return function(){return e}}function x5(e,t){return e==null||e!==e?t:e}var w5=vl(),y5=vl(!0);function h1(e){return e}function bs(e){return Xs(typeof e=="function"?e:O1(e,Qe))}function g5(e){return Us(O1(e,Qe))}function S5(e,t){return Ys(e,O1(t,Qe))}var A5=C0(function(e,t){return function(n){return Kr(n,e,t)}}),M5=C0(function(e,t){return function(n){return Kr(e,n,t)}});function xs(e,t,n){var a=Ct(t),v=Va(t,a);n==null&&!(ft(t)&&(v.length||!a.length))&&(n=t,t=e,e=this,v=Va(t,Ct(t)));var S=!(ft(n)&&"chain"in n)||!!n.chain,$=yn(e);return o1(v,function(Y){var te=t[Y];e[Y]=te,$&&(e.prototype[Y]=function(){var Ae=this.__chain__;if(S||Ae){var Me=e(this.__wrapped__),Ie=Me.__actions__=c1(this.__actions__);return Ie.push({func:te,args:arguments,thisArg:e}),Me.__chain__=Ae,Me}return te.apply(e,rn([this.value()],arguments))})}),e}function R5(){return wt._===this&&(wt._=On),this}function ws(){}function E5(e){return e=R0(e),C0(function(t){return Gs(t,e)})}var T5=Qi(tt),B5=Qi(k1),C5=Qi(br);function c2(e){return as(e)?_e(on(e)):io(e)}function k5(e){return function(t){return e==null?m:tr(e,t)}}var I5=dl(),L5=dl(!0);function ys(){return[]}function gs(){return!1}function O5(){return{}}function N5(){return""}function H5(){return!0}function V5(e,t){if(e=R0(e),e<1||e>pt)return[];var n=bt,a=ge(e,bt);t=h0(t),e-=bt;for(var v=R(a,t);++n<e;)t(n);return v}function $5(e){return g0(e)?tt(e,on):S1(e)?[e]:c1(kl(Y0(e)))}function F5(e){var t=++Wt;return Y0(e)+t}var D5=Xa(function(e,t){return e+t},0),P5=Ji("ceil"),q5=Xa(function(e,t){return e/t},1),X5=Ji("floor");function Z5(e){return e&&e.length?Ha(e,h1,Vi):m}function U5(e,t){return e&&e.length?Ha(e,h0(t,2),Vi):m}function Y5(e){return ne(e,h1)}function G5(e,t){return ne(e,h0(t,2))}function W5(e){return e&&e.length?Ha(e,h1,Pi):m}function z5(e,t){return e&&e.length?Ha(e,h0(t,2),Pi):m}var K5=Xa(function(e,t){return e*t},1),Q5=Ji("round"),J5=Xa(function(e,t){return e-t},0);function j5(e){return e&&e.length?we(e,h1):0}function ef(e,t){return e&&e.length?we(e,h0(t,2)):0}return x.after=g3,x.ary=ql,x.assign=u4,x.assignIn=n2,x.assignInWith=ni,x.assignWith=f4,x.at=c4,x.before=Xl,x.bind=fs,x.bindAll=m5,x.bindKey=Zl,x.castArray=O3,x.chain=Fl,x.chunk=Xo,x.compact=Zo,x.concat=Uo,x.cond=p5,x.conforms=b5,x.constant=ps,x.countBy=ju,x.create=_4,x.curry=Ul,x.curryRight=Yl,x.debounce=Gl,x.defaults=v4,x.defaultsDeep=h4,x.defer=S3,x.delay=A3,x.difference=Yo,x.differenceBy=Go,x.differenceWith=Wo,x.drop=zo,x.dropRight=Ko,x.dropRightWhile=Qo,x.dropWhile=Jo,x.fill=jo,x.filter=t3,x.flatMap=a3,x.flatMapDeep=i3,x.flatMapDepth=s3,x.flatten=Nl,x.flattenDeep=eu,x.flattenDepth=tu,x.flip=M3,x.flow=w5,x.flowRight=y5,x.fromPairs=nu,x.functions=y4,x.functionsIn=g4,x.groupBy=l3,x.initial=au,x.intersection=iu,x.intersectionBy=su,x.intersectionWith=lu,x.invert=A4,x.invertBy=M4,x.invokeMap=u3,x.iteratee=bs,x.keyBy=f3,x.keys=Ct,x.keysIn=v1,x.map=Ka,x.mapKeys=E4,x.mapValues=T4,x.matches=g5,x.matchesProperty=S5,x.memoize=Ja,x.merge=B4,x.mergeWith=r2,x.method=A5,x.methodOf=M5,x.mixin=xs,x.negate=ja,x.nthArg=E5,x.omit=C4,x.omitBy=k4,x.once=R3,x.orderBy=c3,x.over=T5,x.overArgs=E3,x.overEvery=B5,x.overSome=C5,x.partial=cs,x.partialRight=Wl,x.partition=_3,x.pick=I4,x.pickBy=a2,x.property=c2,x.propertyOf=k5,x.pull=cu,x.pullAll=Vl,x.pullAllBy=_u,x.pullAllWith=vu,x.pullAt=hu,x.range=I5,x.rangeRight=L5,x.rearg=T3,x.reject=d3,x.remove=du,x.rest=B3,x.reverse=os,x.sampleSize=p3,x.set=O4,x.setWith=N4,x.shuffle=b3,x.slice=mu,x.sortBy=y3,x.sortedUniq=Su,x.sortedUniqBy=Au,x.split=a5,x.spread=C3,x.tail=Mu,x.take=Ru,x.takeRight=Eu,x.takeRightWhile=Tu,x.takeWhile=Bu,x.tap=Zu,x.throttle=k3,x.thru=za,x.toArray=jl,x.toPairs=i2,x.toPairsIn=s2,x.toPath=$5,x.toPlainObject=t2,x.transform=H4,x.unary=I3,x.union=Cu,x.unionBy=ku,x.unionWith=Iu,x.uniq=Lu,x.uniqBy=Ou,x.uniqWith=Nu,x.unset=V4,x.unzip=us,x.unzipWith=$l,x.update=$4,x.updateWith=F4,x.values=Mr,x.valuesIn=D4,x.without=Hu,x.words=u2,x.wrap=L3,x.xor=Vu,x.xorBy=$u,x.xorWith=Fu,x.zip=Du,x.zipObject=Pu,x.zipObjectDeep=qu,x.zipWith=Xu,x.entries=i2,x.entriesIn=s2,x.extend=n2,x.extendWith=ni,xs(x,x),x.add=D5,x.attempt=f2,x.camelCase=Z4,x.capitalize=l2,x.ceil=P5,x.clamp=P4,x.clone=N3,x.cloneDeep=V3,x.cloneDeepWith=$3,x.cloneWith=H3,x.conformsTo=F3,x.deburr=o2,x.defaultTo=x5,x.divide=q5,x.endsWith=U4,x.eq=U1,x.escape=Y4,x.escapeRegExp=G4,x.every=e3,x.find=n3,x.findIndex=Ll,x.findKey=d4,x.findLast=r3,x.findLastIndex=Ol,x.findLastKey=m4,x.floor=X5,x.forEach=Dl,x.forEachRight=Pl,x.forIn=p4,x.forInRight=b4,x.forOwn=x4,x.forOwnRight=w4,x.get=hs,x.gt=D3,x.gte=P3,x.has=S4,x.hasIn=ds,x.head=Hl,x.identity=h1,x.includes=o3,x.indexOf=ru,x.inRange=q4,x.invoke=R4,x.isArguments=ar,x.isArray=g0,x.isArrayBuffer=q3,x.isArrayLike=_1,x.isArrayLikeObject=ht,x.isBoolean=X3,x.isBuffer=qn,x.isDate=Z3,x.isElement=U3,x.isEmpty=Y3,x.isEqual=G3,x.isEqualWith=W3,x.isError=_s,x.isFinite=z3,x.isFunction=yn,x.isInteger=zl,x.isLength=ei,x.isMap=Kl,x.isMatch=K3,x.isMatchWith=Q3,x.isNaN=J3,x.isNative=j3,x.isNil=t4,x.isNull=e4,x.isNumber=Ql,x.isObject=ft,x.isObjectLike=_t,x.isPlainObject=na,x.isRegExp=vs,x.isSafeInteger=n4,x.isSet=Jl,x.isString=ti,x.isSymbol=S1,x.isTypedArray=Ar,x.isUndefined=r4,x.isWeakMap=a4,x.isWeakSet=i4,x.join=ou,x.kebabCase=W4,x.last=H1,x.lastIndexOf=uu,x.lowerCase=z4,x.lowerFirst=K4,x.lt=s4,x.lte=l4,x.max=Z5,x.maxBy=U5,x.mean=Y5,x.meanBy=G5,x.min=W5,x.minBy=z5,x.stubArray=ys,x.stubFalse=gs,x.stubObject=O5,x.stubString=N5,x.stubTrue=H5,x.multiply=K5,x.nth=fu,x.noConflict=R5,x.noop=ws,x.now=Qa,x.pad=Q4,x.padEnd=J4,x.padStart=j4,x.parseInt=e5,x.random=X4,x.reduce=v3,x.reduceRight=h3,x.repeat=t5,x.replace=n5,x.result=L4,x.round=Q5,x.runInContext=L,x.sample=m3,x.size=x3,x.snakeCase=r5,x.some=w3,x.sortedIndex=pu,x.sortedIndexBy=bu,x.sortedIndexOf=xu,x.sortedLastIndex=wu,x.sortedLastIndexBy=yu,x.sortedLastIndexOf=gu,x.startCase=i5,x.startsWith=s5,x.subtract=J5,x.sum=j5,x.sumBy=ef,x.template=l5,x.times=V5,x.toFinite=gn,x.toInteger=R0,x.toLength=e2,x.toLower=o5,x.toNumber=V1,x.toSafeInteger=o4,x.toString=Y0,x.toUpper=u5,x.trim=f5,x.trimEnd=c5,x.trimStart=_5,x.truncate=v5,x.unescape=h5,x.uniqueId=F5,x.upperCase=d5,x.upperFirst=ms,x.each=Dl,x.eachRight=Pl,x.first=Hl,xs(x,function(){var e={};return sn(x,function(t,n){I0.call(x.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),x.VERSION=Ne,o1(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){x[e].placeholder=x}),o1(["drop","take"],function(e,t){T0.prototype[e]=function(n){n=n===m?1:Ve(R0(n),0);var a=this.__filtered__&&!t?new T0(this):this.clone();return a.__filtered__?a.__takeCount__=ge(n,a.__takeCount__):a.__views__.push({size:ge(n,bt),type:e+(a.__dir__<0?"Right":"")}),a},T0.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),o1(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==A0||n==K0;T0.prototype[e]=function(v){var S=this.clone();return S.__iteratees__.push({iteratee:h0(v,3),type:n}),S.__filtered__=S.__filtered__||a,S}}),o1(["head","last"],function(e,t){var n="take"+(t?"Right":"");T0.prototype[e]=function(){return this[n](1).value()[0]}}),o1(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");T0.prototype[e]=function(){return this.__filtered__?new T0(this):this[n](1)}}),T0.prototype.compact=function(){return this.filter(h1)},T0.prototype.find=function(e){return this.filter(e).head()},T0.prototype.findLast=function(e){return this.reverse().find(e)},T0.prototype.invokeMap=C0(function(e,t){return typeof e=="function"?new T0(this):this.map(function(n){return Kr(n,e,t)})}),T0.prototype.reject=function(e){return this.filter(ja(h0(e)))},T0.prototype.slice=function(e,t){e=R0(e);var n=this;return n.__filtered__&&(e>0||t<0)?new T0(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==m&&(t=R0(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},T0.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},T0.prototype.toArray=function(){return this.take(bt)},sn(T0.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),v=x[a?"take"+(t=="last"?"Right":""):t],S=a||/^find/.test(t);v&&(x.prototype[t]=function(){var $=this.__wrapped__,Y=a?[1]:arguments,te=$ instanceof T0,Ae=Y[0],Me=te||g0($),Ie=function(O0){var H0=v.apply(x,rn([O0],Y));return a&&Ye?H0[0]:H0};Me&&n&&typeof Ae=="function"&&Ae.length!=1&&(te=Me=!1);var Ye=this.__chain__,n0=!!this.__actions__.length,m0=S&&!Ye,B0=te&&!n0;if(!S&&Me){$=B0?$:new T0(this);var p0=e.apply($,Y);return p0.__actions__.push({func:za,args:[Ie],thisArg:m}),new Qt(p0,Ye)}return m0&&B0?e.apply(this,Y):(p0=this.thru(Ie),m0?a?p0.value()[0]:p0.value():p0)})}),o1(["pop","push","shift","sort","splice","unshift"],function(e){var t=Gt[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);x.prototype[e]=function(){var v=arguments;if(a&&!this.__chain__){var S=this.value();return t.apply(g0(S)?S:[],v)}return this[n](function($){return t.apply(g0($)?$:[],v)})}}),sn(T0.prototype,function(e,t){var n=x[t];if(n){var a=n.name+"";I0.call(gt,a)||(gt[a]=[]),gt[a].push({name:t,func:n})}}),gt[qa(m,X).name]=[{name:"wrapper",func:m}],T0.prototype.clone=qr,T0.prototype.reverse=Oa,T0.prototype.value=Qn,x.prototype.at=Uu,x.prototype.chain=Yu,x.prototype.commit=Gu,x.prototype.next=Wu,x.prototype.plant=Ku,x.prototype.reverse=Qu,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Ju,x.prototype.first=x.prototype.head,re&&(x.prototype[re]=zu),x},ke=$e();C1?((C1.exports=ke)._=ke,$r._=ke):wt._=ke}).call(Er)})(ii,ii.exports);var gh=ii.exports;const Sh={class:"md:flex md:flex-grow md:overflow-hidden"},Ah={key:2,class:"is-blocked flex justify-center items-center gap-2 px-3 py-1 h-[80px] text-center bg-red-50/80 backdrop-blur-sm border border-red-200 rounded-lg"},Mh={class:"text-xs font-bold text-red-800 uppercase tracking-tighter"},Rh={key:3,class:"w-full py-4"},Eh={key:4,class:"flex-1 overflow-y-hidden"},Th=["onClick"],s8={__name:"Index",props:{rows:Array,rowCount:Number,pusherSettings:Object,organizationId:Number,isChatLimitReached:Boolean,toggleNavBar:Function,state:String,demoNumber:String,settings:Object,status:String,chatThread:Array,hasMoreMessages:Boolean,nextPage:Number,addon:Object,contact:Object,ticket:Object,chat_sort_direction:String,filters:Object,templates:Array,fields:Array,locationSettings:Object,simpleForm:Boolean},setup(W){var rt,G0;let be=null;const m=W,Ne=e0(m.rows);e0(m.rowCount);const de=e0(null),He=e0(!1),Be=e0(!1),We=e0(!1),i0=e0(!1),u0=e0(m.isChatLimitReached),s0=e0(null),Qe=e0(m.settings.metadata),E0=e0(Qe.value?JSON.parse(Qe.value):null),S0=e0(((G0=(rt=E0.value)==null?void 0:rt.tickets)==null?void 0:G0.active)??!1),Ue=e0(m.chatThread),qe=e0(m.contact);aa(()=>m.rows,M0=>{Ne.value=M0});function xe(M0){Be.value=M0}const X=()=>{const M0=de.value;M0&&M0.scrollTo({top:M0.scrollHeight,behavior:"smooth"})},le=()=>{s0.value.click(),qe.value=null},f0=async()=>{Ue.value=[],await Cr.delete("/chats/"+qe.value.uuid)},r0=M0=>{const $0=M0[0].value.wam_id;!Ue.value.some(mt=>mt[0].value.wam_id===$0)&&M0[0].value.deleted_at==null&&(Ue.value.push(M0),setTimeout(X,100))},V0=gh.debounce(async M0=>{var $0;qe.value&&qe.value.id==M0[0].value.contact_id&&r0(M0);try{const z0=await Cr.get("/chats");($0=z0==null?void 0:z0.data)!=null&&$0.result&&(Ne.value=z0.data.result)}catch(z0){console.error("Error updating side panel:",z0)}},1e3);return ia(()=>{be=df(m.pusherSettings.pusher_app_key,m.pusherSettings.pusher_app_cluster).channel("chats.ch"+m.organizationId),be.listen("NewChatEvent",$0=>{V0($0.chat)}),X()}),Cs(()=>{be&&be.stopListening("NewChatEvent")}),(M0,$0)=>(fe(),E1(mf,null,{default:At(z0=>{var mt;return[M("div",Sh,[M("div",{class:Mt(["md:w-[30%] md:flex flex-col h-full bg-white border-r border-l",qe.value?"hidden":""])},[st(y_,{rows:Ne.value,filters:m.filters,rowCount:m.rowCount,ticketingIsEnabled:S0.value,status:m==null?void 0:m.status,chatSortDirection:m.chat_sort_direction},null,8,["rows","filters","rowCount","ticketingIsEnabled","status","chatSortDirection"])],2),M("div",{class:Mt(["min-w-0 bg-cover flex flex-col chat-bg",qe.value?"h-screen md:w-[70%]":"md:h-screen md:w-[70%]"])},[qe.value?(fe(),E1(pc,{key:0,ticketingIsEnabled:S0.value,contact:qe.value,displayContactInfo:Be.value,ticket:W.ticket,addon:W.addon,onToggleView:xe,onDeleteThread:f0,onCloseThread:le},null,8,["ticketingIsEnabled","contact","displayContactInfo","ticket","addon"])):Ge("",!0),qe.value&&!We.value?(fe(),me("div",{key:1,class:"flex-1 overflow-y-auto",ref_key:"scrollContainer2",ref:de},[!Be.value&&!He.value&&!We.value?(fe(),E1(yh,{key:0,contactId:qe.value.id,initialMessages:Ue.value,hasMoreMessages:W.hasMoreMessages,initialNextPage:W.nextPage},null,8,["contactId","initialMessages","hasMoreMessages","initialNextPage"])):Ge("",!0),Be.value&&!We.value?(fe(),E1(hf,{key:1,class:"bg-white h-full",fields:m.fields,contact:qe.value,locationSettings:m.locationSettings},null,8,["fields","contact","locationSettings"])):Ge("",!0)],512)):Ge("",!0),(mt=m.contact)!=null&&mt.is_blocked?(fe(),me("div",Ah,[$0[2]||($0[2]=M("div",{class:"relative flex h-2 w-2"},[M("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),M("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})],-1)),M("span",Mh,Fe(M0.$t("Blocked")),1)])):Ge("",!0),qe.value&&!qe.value.is_blocked&&!Be.value&&!i0.value&&!We.value?(fe(),me("div",Rh,[st(tc,{contact:qe.value,simpleForm:W.simpleForm,chatLimitReached:u0.value,onViewTemplate:$0[0]||($0[0]=kt=>We.value=!0)},null,8,["contact","simpleForm","chatLimitReached"])])):Ge("",!0),We.value?(fe(),me("div",Eh,[We.value?(fe(),E1(tf,{key:0,class:"bg-white h-full",contact:qe.value.uuid,templates:W.templates,contactGroups:[],settings:m.settings,displayCancelBtn:!1,displayTitle:!0,isCampaignFlow:!1,scheduleTemplate:!1,sendText:"Send Message",onViewTemplate:$0[1]||($0[1]=kt=>We.value=!1)},null,8,["contact","templates","settings"])):Ge("",!0)])):Ge("",!0)],2)]),M("button",{class:"hidden",ref_key:"toggleNavbarBtn",ref:s0,onClick:z0.toggleNavBar},null,8,Th)]}),_:1}))}};export{s8 as default};
