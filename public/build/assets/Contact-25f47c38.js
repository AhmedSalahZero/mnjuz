import{T as U,o as b,c as x,a as e,j as i,g as m,h as A,t as r,b as B,u as n,l as ee,F as te,y as P,r as v,s as oe,f as R,n as c,k as z}from"./app-ac1f9e43.js";import se from"./Layout-3fd23d03.js";import{t as a,F as N}from"./FormSelect-d0f19959.js";import{d as J}from"./vuedraggable.umd-782cac12.js";import{_ as le}from"./Modal-b262c4cd.js";import{F as H}from"./FormInput-be921ea7.js";import"./FormTextArea-6950e47b.js";import{_ as ae}from"./AlertModal-e8f560f8.js";import{u as ne}from"./useAlertModal-4783987e.js";import{P as ie}from"./Pagination-b58df4eb.js";import{a as re,_ as T,T as de}from"./TableHeaderRowItem-485e5e89.js";import{_ as ue}from"./Dropdown-b50e93d4.js";import{_ as me,a as Z}from"./DropdownItem-bf230a0c.js";import"./App-faf1a869.js";import"./useRtl-9dc8930f.js";import"./index-ad69648f.js";/* empty css              */import"./MobileSidebar-3b4ff44f.js";import"./Menu-14b518b1.js";import"./ProfileModal-56357d1f.js";import"./FormPhoneInput-ab6a13d5.js";import"./transition-d697c73f.js";import"./keyboard-e322bbae.js";import"./use-text-value-e873cc97.js";import"./OrganizationModal-fe10eb31.js";import"./Sidebar-6805b741.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-3197f402.js";const pe={class:"bg-slate-100 md:bg-slate-50 rounded-[0.5rem]"},ce={class:"w-full"},fe={class:"hover:bg-slate-50 md:border-b-0 md:border-t border-[#d1d5db] text-sm"},ve={class:"pl-4 py-4"},be={class:"flex"},he={class:"pl-2 py-2 pb-2 capitalize"},ge={class:"mr-2"},we={key:0,class:"bg-slate-200 px-2 py-1 rounded-lg text-xs capitalize"},ye={class:"pl-2 py-2 pb-2 capitalize"},_e={class:"pr-4 float-right"},xe={__name:"ContactFieldTable",props:{rows:{type:Object,required:!0}},emits:["edit","delete"],setup($,{emit:k}){const f=$,{isOpenAlert:w,openAlert:y,confirmAlert:C}=ne(),F=k,h=U({test:null});function g(s){F("edit",s)}const q=s=>{h.delete("/contact-fields/"+s)};f.rows.data;const _=s=>s.charAt(0).toUpperCase()+s.slice(1),o=async()=>{const s=f.rows.data.map(d=>d.uuid);try{(await P.post("/contact-fields/update-positions",{orderedIds:s})).data.success}catch(d){console.error("Error updating contact field order:",d)}};return(s,d)=>(b(),x(te,null,[e("div",null,[e("div",pe,[e("table",ce,[i(de,null,{default:m(()=>[i(re,null,{default:m(()=>[i(T,{position:"first",class:"pl-2 py-2 pb-2"},{default:m(()=>[A(r(s.$t("Input field name")),1)]),_:1}),i(T,{class:"pl-2 py-2 pb-2"},{default:m(()=>[A(r(s.$t("Input type")),1)]),_:1}),i(T,{class:"pl-2 py-2 pb-2"},{default:m(()=>[A(r(s.$t("Is required")),1)]),_:1}),i(T,{position:"last",class:"pl-2 py-2 pb-2"})]),_:1})]),_:1}),i(n(J),{tag:"tbody",list:$.rows.data,handle:".handle","item-key":"uuid",onUpdate:o},{item:m(({element:p,index:D})=>[e("tr",fe,[e("td",ve,[e("div",be,[d[2]||(d[2]=e("div",{class:"handle cursor-pointer mr-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M9 19.23q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36"})])],-1)),e("div",null,r(p.name),1)])]),e("td",he,[e("span",ge,r(s.$t(_(p.type))),1),p.type==="input"?(b(),x("span",we,r(s.$t(_(p.value))),1)):B("",!0)]),e("td",ye,r(p.required===0?s.$t("No"):s.$t("Yes")),1),e("td",_e,[i(ue,{align:"right",class:"mt-2"},{items:m(()=>[i(me,null,{default:m(()=>[i(Z,{as:"button",onClick:M=>g(p.uuid)},{default:m(()=>[A(r(s.$t("Edit")),1)]),_:1},8,["onClick"]),i(Z,{as:"button",onClick:M=>n(y)(p.uuid)},{default:m(()=>[A(r(s.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:m(()=>[d[3]||(d[3]=e("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[e("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)])])]),_:1},8,["list"])])]),i(ie,{class:"mt-3",pagination:$.rows.meta},null,8,["pagination"])]),i(ae,{modelValue:n(w),"onUpdate:modelValue":d[0]||(d[0]=p=>ee(w)?w.value=p:null),onConfirm:d[1]||(d[1]=()=>n(C)(q)),label:s.$t("Delete row"),description:s.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},qe={class:"md:h-[90vh]"},$e={class:"flex justify-center items-center"},ke={class:"md:w-[60em]"},Ce={class:"bg-white border border-slate-200 rounded-lg pt-2 text-sm mb-4 px-4 mb-20"},Ve={class:"w-full py-2 mb-4 mt-2"},Ae={class:"flex w-full"},Fe={class:"text-md"},Se={class:"text-[16px]"},Te={class:"mb-1 text-slate-500"},Me={class:"ml-auto"},Ne={class:"bg-white border border-slate-200 rounded-lg py-2 text-sm mb-4 pb-4 px-4 mb-20"},Ue={class:"w-full py-2 mb-2 mt-2"},Be={class:"flex w-full mb-4"},De={class:"text-md"},Ie={class:"text-[16px]"},Oe={class:"flex items-center mt-1 text-slate-500"},je={class:"ml-auto"},Ee={class:"w-5/5"},Le={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},Re={class:"grid grid-cols gap-y-4"},ze={key:1,class:c("col-span-6 mt-2")},He={class:"flex pb-2"},Ze={class:"text-sm"},Pe={class:"col-1 ml-auto"},Je={class:"bg-slate-100 rounded-lg p-2"},Ye={class:"flex items-center w-full space-x-4"},Ge=["onClick"],Ke={class:"text-sm"},Qe={class:"mt-4 flex"},We=["disabled"],Xe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},et={key:1},Ft={__name:"Contact",props:["rows","filters","settings","modules"],setup($){var O,j,E,L;const k=$,f=v(!1),w=v("Add Contact Field"),y=v("/contact-fields"),C=v("post"),F=v(k.settings.metadata),h=v(F.value?JSON.parse(F.value):null),g=v(!1),q=v((j=(O=h==null?void 0:h.value)==null?void 0:O.contacts)!=null&&j.location?(L=(E=h==null?void 0:h.value)==null?void 0:E.contacts)==null?void 0:L.location:null);let _=0;const o=U({name:null,component:null,type:null,required:0,options:[{value:"",id:0}]}),s=U({location:null}),d=(l,t={})=>{w.value=a("Add contact field"),y.value="/contact-fields",C.value="post",l!=null?(w.value=a("Edit contact field"),y.value="/contact-fields/"+l,C.value="put",p()):(_=0,o.name=null,o.type=null,o.options=[{value:"",id:0}],f.value=!0)};function p(){P.get(y.value).then(l=>{const{data:t}=l;if(console.log(t.item),t.item.type==="select"){o.name=t.item.name,o.component=t.item.type,o.required=t.item.required;const V=t.item.value.split(", ").map((S,X)=>({id:X,value:S}));_=V.length-1,o.options=V}else t.item.type==="input"?(o.name=t.item.name,o.component=t.item.type,o.type=t.item.value,o.required=t.item.required):(o.name=t.item.name,o.component=t.item.type,o.required=t.item.required);f.value=!0}).catch(l=>{})}a("Name"),a("Type"),a("Text"),a("Number"),a("Email"),a("URL"),a("Date"),a("Time"),a("Date & Time Local");const D=[{label:a("Text"),value:"text"},{label:a("Number"),value:"number"},{label:a("Email"),value:"email"},{label:a("URL"),value:"url"},{label:a("Date"),value:"date"},{label:a("Time"),value:"time"},{label:a("Date & time"),value:"datetime-local"}],M=[{label:a("Input"),value:"input"},{label:a("Select box"),value:"select"},{label:a("Text area"),value:"textarea"},{label:a("Checkbox"),value:"checkbox"}],Y=[{label:a("Before address"),value:"before"},{label:a("After address"),value:"after"}],G=()=>{o.required=o.required===0?1:0};v(!1);const K=l=>{o.options.splice(l,1)},I=()=>{_++,o.options.push({id:_,value:""})},Q=async()=>{g.value=!0,C.value=="post"?o.post(y.value,{preserveScroll:!0,onFinish:()=>{g.value=!1},onSuccess:()=>{f.value=!1}}):o.put(y.value,{preserveScroll:!0,onFinish:()=>{g.value=!1},onSuccess:()=>{f.value=!1}})};oe(q,(l,t)=>{l!==t&&(s.location=q,W())});const W=async()=>{s.post("/settings/contacts",{preserveScroll:!0})};return(l,t)=>(b(),R(se,{modules:k.modules},{default:m(()=>[e("div",qe,[e("div",$e,[e("div",ke,[e("div",Ce,[e("div",Ve,[e("div",Ae,[e("div",Fe,[e("h4",Se,r(l.$t("Contact fields location")),1),e("div",Te,r(l.$t("Place custom fields before or after the address section")),1)]),e("div",Me,[i(N,{modelValue:q.value,"onUpdate:modelValue":t[0]||(t[0]=u=>q.value=u),options:Y,name:"",error:n(s).errors.location,class:c("col-span-6"),placeholder:"Select Here"},null,8,["modelValue","error"])])])])]),e("div",Ne,[e("div",Ue,[e("div",Be,[e("div",De,[e("h4",Ie,r(l.$t("Custom contact fields")),1),e("span",Oe,r(l.$t("Create custom input fields for the contacts section")),1)]),e("div",je,[e("button",{onClick:t[1]||(t[1]=u=>d()),class:"float-right rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},r(l.$t("Add fields")),1)])]),e("div",Ee,[i(xe,{rows:k.rows,onEdit:d,onDelete:l.openAlert},null,8,["rows","onDelete"])])])])])])]),i(le,{label:w.value,isOpen:f.value},{default:m(()=>[e("div",Le,[e("form",{onSubmit:t[7]||(t[7]=z(u=>Q(),["prevent"])),class:"gap-y-4"},[e("div",Re,[i(H,{modelValue:n(o).name,"onUpdate:modelValue":t[2]||(t[2]=u=>n(o).name=u),name:l.$t("Label"),error:n(o).errors.name,type:"text",class:c("col-span-6")},null,8,["modelValue","name","error"]),i(N,{modelValue:n(o).component,"onUpdate:modelValue":t[3]||(t[3]=u=>n(o).component=u),options:M,name:l.$t("Form component"),error:n(o).errors.component,class:c("col-span-6"),optionClassName:"h-[8em]",placeholder:"Select Here"},null,8,["modelValue","name","error"]),n(o).component==="input"?(b(),R(N,{key:0,modelValue:n(o).type,"onUpdate:modelValue":t[4]||(t[4]=u=>n(o).type=u),options:D,name:l.$t("Input type"),error:n(o).errors.type,class:c("col-span-6"),optionClassName:"h-[8em]",placeholder:"Select Here"},null,8,["modelValue","name","error"])):B("",!0),n(o).component==="select"?(b(),x("div",ze,[e("div",He,[e("span",Ze,r(l.$t("Select options")),1),e("div",Pe,[e("button",{class:"btn bg-primary text-xs text-white px-2 rounded-md py-1",onClick:I},r(l.$t("Add option")),1)])]),e("div",Je,[i(n(J),{tag:"div",list:n(o).options,class:"mt-2 w-full",handle:".handle","item-key":"id"},{item:m(({element:u,index:V})=>[e("div",Ye,[t[10]||(t[10]=e("span",{class:"handle"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M9 19.23q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36"})])],-1)),i(H,{modelValue:u.value,"onUpdate:modelValue":S=>u.value=S,name:"",type:"text",class:c("w-full py-2"),required:!0},null,8,["modelValue","onUpdate:modelValue"]),V!=0?(b(),x("span",{key:0,onClick:S=>K(V),class:"cursor-pointer hover:bg-red-600 hover:text-white p-1 rounded-full"},[...t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m20 9l-1.995 11.346A2 2 0 0 1 16.035 22h-8.07a2 2 0 0 1-1.97-1.654L4 9m17-3h-5.625M3 6h5.625m0 0V4a2 2 0 0 1 2-2h2.75a2 2 0 0 1 2 2v2m-6.75 0h6.75"})],-1)])],8,Ge)):(b(),x("span",{key:1,onClick:I,class:"cursor-pointer hover:bg-primary hover:text-white p-1 rounded-full"},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 17h7m5-1h3m0 0h3m-3 0v3m0-3v-3M3 12h11M3 7h11"})],-1)])]))])]),_:1},8,["list"])])])):B("",!0),e("div",{class:c(["flex space-x-4 py-3","col-span-6"])},[e("span",Ke,r(l.$t("Is required")),1),e("div",{class:c(["w-12 h-6 flex items-center bg-gray-300 rounded-full p-1",{"bg-primary":n(o).required!=0}]),onClick:t[5]||(t[5]=u=>G())},[e("div",{class:c(["bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ease-in-out",{"translate-x-6":n(o).required!=0}])},null,2)],2)])]),e("div",Qe,[e("button",{type:"button",onClick:t[6]||(t[6]=z(u=>f.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},r(l.$t("Cancel")),1),e("button",{class:c(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":g.value}]),disabled:g.value},[g.value?(b(),x("svg",Xe,[...t[11]||(t[11]=[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(b(),x("span",et,r(l.$t("Save")),1))],10,We)])],32)])]),_:1},8,["label","isOpen"])]),_:1},8,["modules"]))}};export{Ft as default};
