import{r as C,s as j,o as b,c as w,a,b as k,n as $,t as n,T as F,N as E,w as L,v as R,u as x,d as q,j as e,g as t,h as r,F as O,e as D,f as U,l as H}from"./app-fd405cde.js";import{d as I}from"./debounce-8c1522e2.js";import{_ as P}from"./AlertModal-9fb23213.js";import{u as Z}from"./useAlertModal-8eb06a6d.js";/* empty css              */import{_ as J}from"./Table-e1ecbfa7.js";import{T as K,a as X,_ as c}from"./TableHeaderRowItem-3c09f4bd.js";import{T as Y,a as G,_ as m}from"./TableBodyRowItem-4093d939.js";import{_ as Q}from"./Dropdown-a54f1397.js";import{_ as W,a as A}from"./DropdownItem-9add4917.js";const ee=["disabled"],te={key:0,class:"animate-spin h-full w-full text-gray-400 p-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ae={__name:"ToggleButton",props:{modelValue:{type:Boolean,required:!0},organizationId:{type:String,required:!0},apiEndpoint:{type:String,default:"/admin/organizations"}},emits:["update:modelValue"],setup(v,{emit:V}){const p=v,_=V,g=C(!1),i=C(p.modelValue),T=async()=>{var h;const u=!i.value;g.value=!0;try{const d=await fetch(`${p.apiEndpoint}/${p.organizationId}/toggle`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||""},body:JSON.stringify({is_banned:u})});if(!d.ok)throw new Error("Failed to update");const y=await d.json();i.value=u,_("update:modelValue",u),console.log("Toggle updated successfully",y)}catch(d){console.error("Error updating toggle:",d),i.value=!u}finally{g.value=!1}};return j(()=>p.modelValue,u=>{i.value=u}),(u,h)=>(b(),w("button",{onClick:T,disabled:g.value,class:$(["relative inline-flex h-6 w-12 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",[i.value?"bg-red-500 focus:ring-red-500":"bg-green-500 focus:ring-green-500",g.value?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[a("span",{class:$(["inline-block h-4 w-4 transform rounded-full bg-white shadow-lg transition-transform duration-300",i.value?"translate-x-7":"translate-x-1"])},[g.value?(b(),w("svg",te,[...h[0]||(h[0]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):k("",!0)],2),a("span",{class:$(["absolute text-xs font-medium text-white pointer-events-none",i.value?"left-2":"right-2"])},n(i.value?"Yes":"No"),3)],10,ee))}},le={class:"md:bg-white flex items-center border border-primary md:border-none md:shadow-sm h-12 md:h-10 md:w-80 rounded-[0.5rem] mb-6 text-xl md:text-sm"},se=["placeholder"],ne={key:1,class:"pr-2"},oe={class:"float-right"},re={class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},ie={class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},de={class:"float-right"},_e={__name:"OrganizationTable",props:{rows:{type:Object,required:!0},filters:{type:Object}},emits:["delete"],setup(v,{emit:V}){const p=v,{isOpenAlert:_,openAlert:g,confirmAlert:i}=Z(),T=F({test:null}),u=l=>{T.delete("/admin/organizations/"+l)},h=l=>l===p.rows.data.length-1,d=C({search:p.filters.search}),y=C(!1),M=()=>{d.value.search=null,z()},N=I(()=>{y.value=!0,z()},1e3),z=()=>{const l=window.location.pathname;E.visit(l,{method:"get",data:d.value})};return(l,o)=>(b(),w(O,null,[a("div",le,[o[6]||(o[6]=a("span",{class:"pl-3"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 15l6 6m-11-4a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z"})])],-1)),L(a("input",{onInput:o[0]||(o[0]=(...s)=>x(N)&&x(N)(...s)),"onUpdate:modelValue":o[1]||(o[1]=s=>d.value.search=s),type:"text",class:"outline-none px-4 w-full bg-inherit",placeholder:l.$t("Search organizations")},null,40,se),[[R,d.value.search]]),y.value===!1&&d.value.search?(b(),w("button",{key:0,onClick:M,type:"button",class:"pr-2"},[...o[4]||(o[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1)])])):k("",!0),y.value?(b(),w("span",ne,[...o[5]||(o[5]=[q('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1)])])):k("",!0)]),e(J,{rows:v.rows},{default:t(()=>[e(K,null,{default:t(()=>[e(X,null,{default:t(()=>[e(c,{position:"first"},{default:t(()=>[r(n(l.$t("Name")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(l.$t("Owner")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(l.$t("Owner email")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[a("span",null,n(l.$t("Seats")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(l.$t("Plan")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(l.$t("Next billing date")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(l.$t("Banned")),1)]),_:1}),e(c,{class:"hidden sm:table-cell"},{default:t(()=>[a("span",oe,n(l.$t("Last updated")),1)]),_:1}),e(c,{position:"last"})]),_:1})]),_:1}),e(Y,null,{default:t(()=>[(b(!0),w(O,null,D(v.rows.data,(s,S)=>(b(),U(G,{key:S,class:$(h(S)?"":"border-b")},{default:t(()=>[e(m,{position:"first",class:"capitalize"},{default:t(()=>[r(n(s.name),1)]),_:2},1024),e(m,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(s.owner.user.full_name),1)]),_:2},1024),e(m,{class:"hidden sm:table-cell"},{default:t(()=>[r(n(s.owner.user.email),1)]),_:2},1024),e(m,{class:"hidden sm:table-cell"},{default:t(()=>[a("span",null,n(s.teams_count),1)]),_:2},1024),e(m,{class:"hidden sm:table-cell"},{default:t(()=>{var f,B;return[a("span",re,n(((B=(f=s.subscription)==null?void 0:f.plan)==null?void 0:B.name)??l.$t("Not set")),1)]}),_:2},1024),e(m,{class:"capitalize"},{default:t(()=>{var f;return[a("span",ie,n(((f=s.subscription)==null?void 0:f.next_billing_date)??"Not Set"),1)]}),_:2},1024),e(m,{class:"hidden sm:table-cell"},{default:t(()=>[e(ae,{modelValue:s.is_banned,"onUpdate:modelValue":f=>s.is_banned=f,"organization-id":s.uuid,"api-endpoint":"/admin/organizations"},null,8,["modelValue","onUpdate:modelValue","organization-id"])]),_:2},1024),e(m,{class:"hidden sm:table-cell"},{default:t(()=>[a("span",de,n(s.updated_at),1)]),_:2},1024),e(m,{position:"last"},{default:t(()=>[e(Q,{align:"right",class:"mt-2"},{items:t(()=>[e(W,null,{default:t(()=>[e(A,{href:"/admin/organizations/"+s.uuid},{default:t(()=>[r(n(l.$t("View/edit")),1)]),_:1},8,["href"]),e(A,{as:"button",onClick:f=>x(g)(s.uuid)},{default:t(()=>[r(n(l.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:t(()=>[o[7]||(o[7]=a("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[a("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),e(P,{modelValue:x(_),"onUpdate:modelValue":o[2]||(o[2]=s=>H(_)?_.value=s:null),onConfirm:o[3]||(o[3]=()=>x(i)(u)),label:l.$t("Delete row"),description:l.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}};export{_e as _};
