import{m as u,r as E,K as C,p as A,c as g,j as l,u as d,a as e,d as M,t as v,h as f,n as N,k as S,b as B,o as h}from"./app-fc385eef.js";import{u as P,b as U,c as x,d as b}from"./vue-flow-core-4566b618.js";import{F as W}from"./FormSelect-f9c7eec2.js";import{_ as j}from"./FormCheckbox-2495ce31.js";import{F}from"./FormInput-74b7c38b.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./keyboard-c768790a.js";import"./use-text-value-115c312c.js";const q={class:"webhook-node"},z={class:"bg-white border-2 border-teal-200 rounded-lg p-4 shadow-sm w-[400px]",style:{"min-width":"400px"}},D={class:"flex items-center mb-3"},H={class:"flex items-center gap-2 flex-1"},O={class:"font-medium text-gray-900 text-sm"},I={class:"text-xs text-gray-600 mb-2"},G={class:"flex items-center justify-between text-xs"},R={class:"flex items-center gap-1"},$={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},K={class:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},J={class:"space-y-4"},Q={class:"space-y-3"},X={class:"space-y-2"},Y={class:"flex items-center"},Z={__name:"Webhook-node",props:{id:String,data:Object,selected:Boolean},setup(w){const n=w,{removeNodes:y}=P(),p=U(),i=u(()=>{var s;return((s=n.data)==null?void 0:s.config)||{}}),r=u(()=>{var s;return((s=n.data)==null?void 0:s.is_active)!==!1}),c=E(!1),_=u(()=>(i.value,"Webhook")),o=C({config:{},is_active:!0}),k=()=>{o.config={url:i.value.url||"",method:i.value.method||"POST"},o.is_active=r.value,c.value=!0},m=()=>{c.value=!1},V=()=>{p.node.data={...p.node.data,actionType:"webhook",config:o.config,is_active:o.is_active},m()},T=()=>{confirm("Are you sure you want to delete this action?")&&y([n.id])};return A(()=>{}),(s,t)=>(h(),g("div",q,[l(d(b),{type:"target",position:d(x).Top,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),e("div",z,[e("div",D,[e("div",H,[t[3]||(t[3]=M('<div class="w-8 h-8 bg-slate-50 rounded-lg flex items-center justify-center" data-v-cddef461><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-teal-600" data-v-cddef461><circle cx="12" cy="12" r="10" data-v-cddef461></circle><path d="M2 12h20" data-v-cddef461></path><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-cddef461></path></svg></div>',1)),e("div",null,[e("h3",O,v(_.value),1)])]),e("div",{class:"flex items-center gap-1 ml-auto"},[e("button",{onClick:k,class:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Edit Action"},[...t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),e("button",{onClick:T,class:"p-1 text-red-400 hover:text-red-600 rounded",title:"Delete Action"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)])])])]),e("div",I,[e("div",null,[t[6]||(t[6]=e("span",{class:"font-medium"},"Webhook:",-1)),f(" "+v(i.value.url),1)])]),e("div",G,[t[7]||(t[7]=e("span",{class:"text-gray-500"},"Action",-1)),e("div",R,[e("span",{class:N([r.value?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-2 py-1 rounded-full text-xs"])},v(r.value?"Active":"Inactive"),3)])])]),l(d(b),{type:"source",position:d(x).Bottom,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),c.value?(h(),g("div",$,[e("div",K,[t[11]||(t[11]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit Webhook Action")],-1)),e("form",{onSubmit:S(V,["prevent"]),class:"p-6"},[e("div",J,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Configuration",-1)),e("div",Q,[e("div",X,[e("div",null,[l(F,{modelValue:o.config.url,"onUpdate:modelValue":t[0]||(t[0]=a=>o.config.url=a),label:"URL",type:"url",required:""},null,8,["modelValue"])]),e("div",null,[l(W,{modelValue:o.config.method,"onUpdate:modelValue":t[1]||(t[1]=a=>o.config.method=a),label:"Method",name:"Method",options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],required:""},null,8,["modelValue"])])]),t[8]||(t[8]=e("div",{class:"bg-gray-50 border border-blue-200 rounded-lg p-3"},[e("p",{class:"text-xs text-gray-600 mb-1"},[e("strong",null,"What happens:"),f(" A webhook request will be sent to the specified URL with the contact data. ")]),e("p",{class:"text-xs text-gray-500"}," The webhook will include contact information and any relevant flow data in the request payload. ")],-1))])]),e("div",Y,[l(j,{modelValue:o.is_active,"onUpdate:modelValue":t[2]||(t[2]=a=>o.is_active=a),label:"Active",class:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"},null,8,["modelValue"])])]),e("div",{class:"flex justify-end space-x-3 mt-6"},[e("button",{type:"button",onClick:m,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Cancel "),t[10]||(t[10]=e("button",{type:"submit",class:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors"}," Save Changes ",-1))])],32)])])):B("",!0)]))}},ne=L(Z,[["__scopeId","data-v-cddef461"]]);export{ne as default};
